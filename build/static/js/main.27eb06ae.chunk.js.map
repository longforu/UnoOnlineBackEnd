{"version":3,"sources":["redux.js","lght/util/util.js","lght/lght.js","view.js","controller.js","Page/Game.js","Page/Join.js","Page/Landing.js","App.js","serviceWorker.js","index.js","api.js"],"names":["createStore","require","token","localStorage","getItem","defaultState","id","playerid","username","tempJoinID","joined","loggedIn","Store","state","type","tempJoinId","setItem","removeItem","console","log","mergeDefaultPropertyObject","p","d","o","prop","_","cloneDeep","findDistance2Point","x1","y1","x2","y2","Math","sqrt","pow","findAngle2Point","dx","dy","tan","atan","radToDeg","rad","PI","degToRad","deg","rotatePoint","cx","cy","x","y","calculateRotatePoint","r","angleIndex","indexOf","coeff","cos","sin","findIntersection","s1","s2","x11","y11","x12","y12","x21","y21","x22","y22","round","minX1","min","maxX1","max","minX2","maxX2","slope1","slope2","coeff1","findClosestPoint","s","angle","abs","findAngle3Point","d1","d2","changeByDotNotation","propertyString","object","value","propertyArray","split","objectLink","forEach","e","i","length","Array","isArray","parseInt","getByDotNotation","lght","inputReference","movementIndex","coeffIndex","defaultAppConfig","initFunctions","animateFunctions","lastFrame","undefined","constantRender","background","pixelDensity","defaultObjectProps","shapes","animations","hoverEvents","animationCount","static","rotation","positionIndicator","display","opacity","mouseUpEvent","mouseDownEvent","mouseMoveEvent","zIndex","defaultStorageProps","spacing","direction","model","defaultShapeOptions","kind","scaleX","scaleY","color","lineWidth","borderColor","borderWidth","border","borderOnly","shadow","defaultRectOptions","w","h","clip","clipImageLink","clipCanvas","clipSpriteSheetX","clipSpriteSheetY","spriteLengthX","spriteLengthY","defaultArcOptions","arcDegree","defaultTextOptions","textAlign","font","text","defaultImgOptions","spriteLink","drawWidth","drawHeight","loadedFunction","defaultPolyOptions","points","specialPolygon","numberOfSide","radius","defaultLineOptions","apps","gameloop","list","frameTime","loop","time","requestAnimationFrame","app","elem","options","this","canvas","objects","push","turnFunctions","prototype","obj","update","translateMouseCoor","pageX","pageY","clientX","document","body","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","offsetTop","objectCount","property","parent","name","objectName","splice","collide","pointInShape","xs","ys","findMax","minX","maxX","minY","maxY","storage","storageShapes","elementFunction","updateToModel","kill","shape","reverse","width","firstX","content","height","firstY","updateVisual","spriteLinkReference","spriteImageReference","funcLists","sprite","link","func","index","image","complete","Image","onload","src","vertex","findVertex","offsetMinX","borderWidthIfBorderIsOn","offsetMaxX","offsetMinY","offsetMaxY","shadowOffsetMinX","blur","shadowOffsetMaxX","shadowOffsetMinY","shadowOffsetMaxY","offsetX","offsetY","sides","findSides","compareSide","intersect","result","maxY1","minY1","maxY2","minY2","side1","side2","hasBorder","rect","rx","ry","nx","absoluteX","ny","absoluteY","arc","minAngle","maxAngle","minRadAngle","maxRadAngle","referenceX","referenceY","vertex1","vertex2","pureCircle","ray1","ray2","side","closest","roundedRectangle","borderRadius","clipImage","imageUrl","poly","polyPoints","map","radiusCoefficient","line","notIncluded","position","point","rotatedPoints","distance","angleQuadrant","firstDistance","pointOneInFirstQuadrant","pointSecondInSecondQuadrant","pointThreeInThirdQuadrant","pointFourInFourthQuadrant","c","context","save","measureText","restore","textSize","img","imageLoaded","attachQuickMovement","velocity","cooldown","cd","addEventListener","key","setTimeout","startCursor","style","cursor","endCursor","enterCursorEvent","alreadyCursorEvent","hoverEvent","mouseInputInit","attachEvent","event","pointInObject","LargeLoop","a","pressedEvent","makeDraggable","funcDone","onDrag","draggable","funcin","funcout","mouseIn","touch","animate","timeDifference","animateFunctionReference","animation","init","timeUp","newValue","addAnimation","timeout","cancelAnimation","alreadyAnimated","find","findIndex","clearTimeout","arguments","render","clearCanvas","fillBackground","renderShape","visualInit","backgroundColor","getContext","renderPositions","sort","b","drawPreloader","draw","clearRect","fillStyle","fillRect","beginPath","closePath","fill","preloader","maxes","createPreloader","clearPreloader","ox","oy","drawShape","createElement","ceil","translate","drawImg","drawShapeKind","stroke","globalAlpha","strokeStyle","scale","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawRect","drawArc","drawText","drawPoly","drawLine","drawRoundedRectangle","clipImageLoaded","rotate","spriteWidth","spriteHeight","clipStartX","clipStartY","drawImage","strokeRect","moveTo","lineTo","quadraticCurveTo","br","er","fillText","addShape","addObject","addStorage","removeObject","View","ref","animatePlayerPlay","animatePlay","positionReference","playerDeck","animatePlayerDraw","animateDraw","animateLeaderboardDraw","leaderBoard","animateLeaderboardPlay","endX","endY","Promise","card","createCard","drawDeck","startX","startY","playDeck","cardSpriteColumn","cardSpriteRow","cardSpriteReference","wild","Draw4","colorReference","otherReference","handHeight","drawable","resolveFunction","createDeck","flip","awaitDraw","cancelDraw","createHand","createLeaderboard","drawAnnouncement","configureStartGameMessage","configureUnoMessage","turnIndicator","updateTurnIndicator","turn","numberOfLoops","fadeOut","fadeIn","updateLeaderboard","players","verifyFunction","onSelect","playerHand","action","slice","join","offSetY","updateCards","awaitSelection","vf","cancelSelection","deckCardOption","deck","back","flipped","changeToBack","changeClipImage","changeToFront","flipAnimation","announcementQueue","announcmentPerpetual","onAnnouncementPerpetual","onAnnoucementChanged","announcement","annoucementText","fadeOutThenFadeIn","updateAnnouncement","uno","UNO","startGameObject","activated","initiateStartGameMessage","turnOffStartGameMessage","io","Controller","canvasref","userid","view","socket","connect","query","play","emit","verify","currentTopCard","color2","action2","on","m","oldModel","inGame","onTurn","then","newAnnoucements","feed","newDirectives","directives","oldPlayer","JSON","stringify","message","addToAnnoucementQueue","code","user","latestDraw","cards","animateToPlayer","animateToLeaderBoard","oldCard","newCard","winner","error","Game","dispatch","useRef","useEffect","current","url","className","alignItems","margin","href","padding","onClick","preventDefault","str","el","appendChild","select","execCommand","removeChild","cogoToast","success","copyToClipboard","Join","changeHistory","useState","loading","setLoading","joinGame","data","boxShadow","initialValues","onSubmit","handleSubmit","handleChange","handleBlur","onChange","onBlur","top","css","create","Landing","withRouter","history","createGame","Content","pathname","useLocation","match","path","exact","component","App","store","Boolean","window","location","hostname","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","baseAPI","baseURL","module","exports","post"],"mappings":"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","file":"static/js/main.27eb06ae.chunk.js","sourcesContent":["const {createStore} = require('redux')\n\nconst token = localStorage.getItem('token')\nconst id = localStorage.getItem('id')\nconst playerid = localStorage.getItem('playerid')\nconst username = localStorage.getItem('username')\nconst defaultState = {\n    token,id,playerid,username,tempJoinID:null,joined:false,\n    loggedIn:!!token,\n}\n\nconst reducer = (state=defaultState,{id,playerid,token,type,username,tempJoinId})=>{\n    switch(type){\n        case 'LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            localStorage.setItem('username',username)\n            return {...state,id,playerid,token,loggedIn:true,username}\n        case 'JOIN_LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            localStorage.setItem('username',username)\n            return {...state,id,playerid,token,loggedIn:true,username,joined:true}\n        case 'LOG_OUT':\n            localStorage.removeItem('token')\n            localStorage.removeItem('id')\n            localStorage.removeItem('playerid')\n            localStorage.removeItem('username')\n            return {...state,id:null,username:null,token:null,playerid:null,loggedIn:false}\n        case 'SET_TEMP_JOIN':\n            console.log(tempJoinId)\n            return {...state,tempJoinId}\n        case 'JOINED':\n            return {...state,joined:true}\n        default:\n            return{...state}\n    }\n}\n\nconst Store = createStore(reducer)\n\nexport default Store","import _ from 'lodash'\n\nconst random = (high,low) => {return Math.round(Math.random()*(high-low+1) + low);}\n\t\nconst mergeDefaultPropertyObject = (p,d,o)=>{\n\tfor(var prop in d){\n\t\tif(typeof p == 'object'){\n\t\t\tif(typeof p[prop] === 'function') o[prop] = p[prop]\n\t\t\telse if(typeof p[prop] != 'undefined') o[prop] = _.cloneDeep(p[prop]);\n\t\t\telse o[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t\telse{\n\t\t\to[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t}\n}\n\n//<---------------------GEOMETRIC FUNCTION-------------------->\n\nconst findQuadrant = (angle) => {\n\tif(angle < 90 && angle > 0) return 1;\n\tif(angle > 90 && angle < 180) return 2;\n\tif(angle > 180 && angle < 270) return 3;\n\tif(angle > 270 && angle < 360) return 4;\n}\n\nconst findDistance2Point = (x1,y1,x2,y2)=>Math.sqrt(Math.pow((x1-x2),2) + Math.pow((y1-y2),2))\n\n\nconst findAngle2Point = function(x1,y1,x2,y2){\n\t//CHECK SPECIAL CASES\n\tif(x1===x2&&y1===y2) return 0;\n\tif(x1===x2){\n\t\tif(y1 < y2) return 270;\n\t\tif(y1 > y2) return 90;\n\t} \n\tif(y1===y2){\n\t\tif(x1<x2) return 0;\n\t\tif(x2<x1) return 180;\n\t}\n\n\t//FIND QUADRANT\n\tvar dx = x2-x1; var dy = y2-y1;\n\tvar tan = Math.atan((-dy)/dx);\n\n\tif(x1<x2&&y1>y2) return radToDeg(tan);//QUADRANT 1\n\tif(x1>x2&&y1>y2) return\t180 + radToDeg(tan); //QUADRANT 2\n\tif(x1>x2&&y1<y2) return 180 + radToDeg(tan);//QUADRANT 3\n\tif(x1<x2&&y1<y2) return 360 + radToDeg(tan);//QUADRANT 4\n}\n\nconst radToDeg = (rad) => (rad*180)/Math.PI;\n\nconst degToRad = (deg) => (deg*Math.PI)/180;\n\nconst rotatePoint = (cx,cy,x,y,deg) => (deg===0||deg===360)? [x,y]: calculateRotatePoint(cx,cy,findAngle2Point(cx,cy,x,y)+deg,findDistance2Point(cx,cy,x,y));\n\nconst calculateRotatePoint = function(cx,cy,r,d){\n\tconst rad = degToRad(r);\n\n\t//IF IT'S IN SPECIAL CASE\n\tconst angleIndex = [0,90,180,270,360];\n\tconst coeffIndex = [[1,0],[0,1],[-1,0],[0,-1],[1,0]];\n\tif(angleIndex.indexOf(r) !== -1){\n\t\tconst coeff = coeffIndex[angleIndex.indexOf(r)];\n\t\treturn [cx+coeff[0]*d,cy-coeff[1]*d];\n\t}\n\treturn [cx + Math.cos(rad)*d, cy - Math.sin(rad)*d];\n}\n\n\n//<----------------------SEGMENT INTERSECTION, USED FOR OBJECT COLLISION------------------------------>\nlet findIntersection = function(s1,s2){\n\t//FIND CONSTRAINS FOR USE BEFORE INTERSECTION FUNCTION\n\tlet [x11,y11,x12,y12] = s1\n\tlet [x21,y21,x22,y22] = s2\n\tif(Math.round(x11) === Math.round(x12) || Math.round(x21) === Math.round(x22)){\n\t\t[x11,y11] = rotatePoint(0,0,x11,y11,30);\n\t\t[x12,y12] = rotatePoint(0,0,x12,y12,30);\n\t\t[x21,y21] = rotatePoint(0,0,x21,y21,30);\n\t\t[x22,y22] = rotatePoint(0,0,x22,y22,30);\n\t}\n\n\n\tconst minX1 = Math.min(x11,x12); const maxX1 = Math.max(x11,x12);\n\tconst minX2 = Math.min(x21,x22); const maxX2 = Math.max(x21,x22);\n\n\tconst slope1 =(y11-y12)/(x11-x12); \n\tconst slope2 =(y21-y22)/(x21-x22);\n\tconst coeff1 = -(x11*slope1) + y11;\n\tconst coeff2 = -(x21*slope2) + y21;\n\n\tif(slope1===slope2) return false;\n\tconst x = (coeff2 - coeff1)/(slope1 - slope2);\n\tconst y = slope1*x + coeff1;\n\tif(((x>minX1)&&(x<maxX1))&&((x>minX2)&&(x<maxX2))) return [x,y];\n\treturn false;\n}\n\n\n//<--------------------------OTHER SEGMENT FUNCTION------------------------------>\nconst findAngle3Point = (cx,cy,x1,y1,x2,y2) => Math.abs(findAngle2Point(cx,cy,x2,y2) - findAngle2Point(cx,cy,x1,y1))\n\n//FIND THE 'HEIGHT' OF A POINT TO A SEGMENT\nconst findClosestPoint = function(x,y,s){\n\tconst [x1,y1,x2,y2] = s\n\n\tlet angle = findAngle3Point(x1,y1,x,y,x2,y2);\n\tconst d = findDistance2Point(x,y,x1,y1);\n\n\tconst d1 = Math.abs(d*Math.cos(degToRad(angle)));\n\tconst d2 = Math.sqrt(Math.pow(d,2) - Math.pow(d1,2));\n\n\tif(d1 > findDistance2Point(x1,y1,x2,y2)) return false;\n\n\tangle = degToRad(findAngle2Point(x1,y1,x2,y2));\n\tconst xh = x1 + Math.cos(angle) * d1; \n\tconst yh = y1 - Math.sin(angle) * d1;\n\treturn [xh,yh,d2];\n}\n\nconst changeByDotNotation = (propertyString,object,value) => {\n\tconst propertyArray = propertyString.split(\".\")\n\tlet objectLink = object\n\tpropertyArray.forEach((e,i)=>{\n\t\tif (i === propertyArray.length - 1){\n\t\t\tif(Array.isArray(objectLink)) objectLink[parseInt(e)] = value\n\t\t\telse objectLink[e] = value\n\t\t}\n\t\telse{\n\t\t\tif(Array.isArray(objectLink)) objectLink = objectLink[parseInt(e)]\n\t\t\telse objectLink = objectLink[e]\n\t\t}\n\t})\n}\n\nconst getByDotNotation = (propertyString,object)=>{\n\tconst propertyArray = propertyString.split(\".\")\n\tlet value = object\n\tpropertyArray.forEach(e=>{\n\t\tif(Array.isArray(value)) value = value[parseInt(e)]\n\t\telse value=object[e]\n\t})\n\treturn value\n}\n\nexport {findClosestPoint,findAngle3Point,findAngle2Point,findIntersection,calculateRotatePoint,random,\nmergeDefaultPropertyObject,findQuadrant,findDistance2Point,radToDeg,degToRad,rotatePoint,changeByDotNotation,getByDotNotation}","/* eslint-disable no-fallthrough */\n/* eslint-disable no-unused-vars */\n//LIGHT LIBRARY IS DEVELOPED BY LONG TRAN\n//COPYRIGHT 2020, ALL RIGHTS RESERVED\n\nimport {getByDotNotation, changeByDotNotation , mergeDefaultPropertyObject, findDistance2Point, findIntersection, rotatePoint, degToRad, findAngle2Point ,findClosestPoint, calculateRotatePoint, radToDeg} from './util/util'\n\nlet lght = {};\n\n//Config\nlght.inputReference = {};\nlght.inputReference.movementIndex = \n    ['w','a','s','d','ArrowUp','ArrowLeft','ArrowDown','ArrowRight'];\n\nlght.inputReference.coeffIndex = \n    [[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]];\n\nlght.defaultAppConfig = {\n    initFunctions:[\"visualInit\",'mouseInputInit'],\n    animateFunctions:[\"animate\",\"update\",\"render\"],\n    lastFrame:undefined,\n    constantRender:true,\n    background:\"black\",\n    pixelDensity:1\n}\n\nlght.defaultObjectProps = {\n    shapes:[],\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    initFunctions:[\"createPreloader\"],\n    static:true,\n    x:0,y:0,\n    rotation:0, \n    positionIndicator:false,\n    display:true,opacity:1,\n    mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],\n    zIndex:0\n}\n\nlght.defaultStorageProps = {\n    spacing:0,\n    direction:'row',\n    model:[]\n}\n\nlght.defaultShapeOptions = {\n    kind:\"rect\",\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    x:0,y:0,rotation:0,scaleX:1,scaleY:1,\n    color:\"black\",display:true,\n    lineWidth:1, opacity:1,\n    borderColor:'yellow',\n    borderWidth:10,\n    border:false, borderOnly:false,\n    shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]\n}\n\nlght.defaultRectOptions = {\n    w:0,h:0,clip:false,\n    clipImageLink:null,clipCanvas:null,\n    clipSpriteSheetX:null,clipSpriteSheetY:null,\n    spriteLengthX:null,spriteLengthY:null\n}\n\nlght.defaultArcOptions = {\n    rad:0, arcDegree:360,\n}\n\nlght.defaultTextOptions = {\n    textAlign:'left',\n    font:'10px Ariel',\n    text:'Hello World'\n}\n\nlght.defaultImgOptions = {\n    spriteLink:null,\n    drawWidth:null,drawHeight:null,\n    loadedFunction:undefined\n}\n\nlght.defaultPolyOptions = {\n    points:[],\n    specialPolygon:false,\n    numberOfSide:0,\n    radius:10,\n    clip:false,\n    clipImageLink:null\n}\n\nlght.defaultLineOptions = {\n    points:[]\n}\n\n//Main\nlght.apps = [];\n\nlght.gameloop = {\n    list:[],\n    frameTime:undefined,\n    lastFrame:undefined\n};\n\nlght.gameloop.loop = (time)=>{\n    requestAnimationFrame(lght.gameloop.loop);\n\n    for(var i = 0;i<lght.gameloop.list.length;i++){\n        lght.gameloop.list[i](lght.apps[i]);\n    }\n    \n    if(time!==undefined){\n        lght.lastFrame = lght.frameTime;\n        lght.frameTime = time;\n    }\n}\n\n\n\nlght.gameloop.loop();\n\nlght.app = function(elem,options) {\n\n    this.options = {};\n    mergeDefaultPropertyObject(options,lght.defaultAppConfig,this.options)        \n    this.canvas = elem;\n    this.options.initFunctions.forEach((e)=>this[e]())\n    \n    this.objects = []\n    lght.gameloop.list.push((this.options.constantRender)?this.turnFunctions:()=>{})\n    lght.apps.push(this);\n}\n\nlght.app.prototype.turnFunctions = (obj)=>{\n    obj.options.animateFunctions.forEach((e)=>obj[e]())\n}\n\nlght.app.prototype.update = function(){\n    this.objects.forEach(e => {\n        if(typeof e.update === 'function') e.update(e)\n    });\n}\n\nlght.app.prototype.translateMouseCoor = function(e){\n\tvar x;\n\tvar y;\n\tif (e.pageX || e.pageY) { \n\t\tx = e.pageX;\n\t\ty = e.pageY;\n\t}\n\telse { \n\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft; \n\t\ty = e.clientY + document.body.scrollTop + document.documentElement.scrollTop; \n\t} \n\tx -= this.canvas.offsetLeft;\n\ty -= this.canvas.offsetTop;\n\treturn [x*this.pixelDensity,y*this.pixelDensity];\n}\n\n//Object\n\n//TOTAL OBJECT COUNT, USED TO PRODUCE ID\nlght.objectCount = 0;\n\nlght.object = class {\n    constructor(property,parent){\n        lght.objectCount++\n        this.id = lght.objectCount;\n        this.parent = parent;\n        this.parent.objects.push(this)\n        mergeDefaultPropertyObject\n        (property,lght.defaultObjectProps,this);    \n        this.initFunctions.forEach((e)=>this[e]())        \n        this.name = (property.objectName)?property.objectName:`Object ${this.id}`\n    }\n    \n    kill(){\n        this.parent.objects.splice(this.parent.objects.indexOf(this),1)\n    }\n\n    collide(obj){\n        for(let s1 of this.shapes){\n            for (let s2 of obj.shapes){\n                if(s1.collide(s2)) return true\n            }\n        }\n\n        return false\n    }\n\n    pointInObject(x,y){\n        for(let s1 of this.shapes){\n           if(s1.pointInShape(x,y)) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let xs = []\n        let ys = []\n        this.shapes.forEach(s=>{\n            let [minX,maxX,minY,maxY] = s.findMax()\n            xs = [...xs,minX,maxX]\n            ys = [...ys,minY,maxY]\n        })\n        return [Math.min(...xs),Math.max(...xs),Math.min(...ys),Math.max(...ys)]\n    }\n\n    findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(x,y){\n        return [x-this.x,y-this.y]\n    }\n}\n\nlght.storage = class extends lght.object{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultStorageProps,this)\n        this.storageShapes = []\n        this.model = property.model || []\n        this.elementFunction = property.elementFunction || null\n        this.updateToModel()\n    }\n    updateToModel(){\n        let model =[...this.model]\n        console.log(model)\n        this.storageShapes.forEach(e=>{e.kill();console.log(this.storageShapes)})\n        this.storageShapes = []\n        if(!model.length) return\n        if(!this.elementFunction) return\n        let shape\n        let totalLength\n        switch(this.direction){\n            case 'row-reverse':\n                model.reverse()\n            case 'row':\n                shape = this.elementFunction(model[0],0)\n                const w = shape.width\n                shape.kill()\n                totalLength = w*model.length + this.spacing*(model.length-1)\n                const firstX = -totalLength/2 + 0.5*w\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.x = firstX + i*w + i*this.spacing\n                })\n                break;\n            case 'column-reverse':\n                model.reverse()\n            case 'column':\n                shape = this.elementFunction(model[0],0)\n                const h = shape.height\n                shape.kill()\n                totalLength = h*model.length + this.spacing*(model.length-1)\n                const firstY = -totalLength/2 + 0.5*h\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.y = firstY +( i*h) + (i*this.spacing)\n                })\n                break\n            default:\n                break;\n        }\n        this.updateVisual()\n\n    }\n}\n\nlght.spriteLinkReference = []\nlght.spriteImageReference = []\nlght.funcLists = []\n\nlght.sprite = (link,func)=> {\n    const index = lght.spriteLinkReference.indexOf(link)\n    if(index !== -1){\n        const image = lght.spriteImageReference[index]\n        lght.funcLists[index].push(func)\n        if(image.complete) requestAnimationFrame(func)\n        return image\n    }\n    else{\n        const image = new Image()\n        const id = lght.spriteImageReference.length\n        image.onload = ()=>{\n            lght.funcLists[id].forEach(e=>e())\n        }\n        lght.funcLists[id] = []\n        lght.funcLists[id].push(func)\n        image.src = link\n        lght.spriteLinkReference.push(link)\n        lght.spriteImageReference.push(image)\n        return image\n    }\n}\n\nlght.shape = class {\n    constructor (property,parent) {\n        this.kind = property.kind\n        this.parent = parent;\n        this.parent.shapes.push(this);\n        mergeDefaultPropertyObject\n        (property,lght.defaultShapeOptions,this);\n    }\n\n    kill (){\n        const index = this.parent.shapes.indexOf(this)\n        if(index<0) return\n        this.parent.shapes.splice(index,1);\n        this.parent.updateVisual()\n    }\n\n    get absoluteX(){\n        return this.x + this.parent.x\n    }\n\n    get absoluteY(){\n        return this.y + this.parent.y\n    }\n\n    get hasBorder(){\n        return this.border||this.borderOnly\n    }\n\n    get width(){\n        return (((this.hasBorder)?(this.w + this.borderWidth):this.w))*this.scaleX\n    }\n\n    get height(){\n        return ((this.hasBorder)?this.h + this.borderWidth:this.h)*this.scaleY\n    }\n\n    get outOfBound(){\n        let [minX,maxX,minY,maxY] = this.findMax();\n        let {width,height} = this.parent.parent.canvas;\n        return (minX > width || maxX < 0 || minY > height || maxY < 0) \n    }\n\n    findVertex(){\n        return []\n    }\n\n    findMax(){\n        const vertex = this.findVertex()\n        const xs = []\n        const ys = []\n\n        vertex.forEach(([x,y])=>{\n            xs.push(x); ys.push(y)\n        })\n\n        let offsetMinX = - this.borderWidthIfBorderIsOn \n        let offsetMaxX = this.borderWidthIfBorderIsOn \n        let offsetMinY = - this.borderWidthIfBorderIsOn \n        let offsetMaxY = this.borderWidthIfBorderIsOn \n\n        if(this.shadow){\n            let shadowOffsetMinX = -this.shadow.blur -2\n            let shadowOffsetMaxX = this.shadow.blur + 2\n            let shadowOffsetMinY = -this.shadow.blur -2\n            let shadowOffsetMaxY = this.shadow.blur +2\n            if(this.shadow.offsetX){\n                shadowOffsetMinX += this.shadow.offsetX\n                shadowOffsetMaxX += this.shadow.offsetX\n            }\n            if(this.shadow.offsetY){\n                shadowOffsetMinY += this.shadow.offsetY\n                shadowOffsetMaxY += this.shadow.offsetY\n            }\n            if(shadowOffsetMinX<0) offsetMinX += shadowOffsetMinX\n            if(shadowOffsetMaxX>0) offsetMaxX += shadowOffsetMaxX\n            if(shadowOffsetMinY<0) offsetMinY += shadowOffsetMinY\n            if(shadowOffsetMaxY>0) offsetMaxY += shadowOffsetMaxY\n        }\n\n        return [\n            Math.min(...xs) + offsetMinX,\n            Math.max(...xs) + offsetMaxX,\n            Math.min(...ys) + offsetMinY,\n            Math.max(...ys) + offsetMaxY\n        ]\n    }\n\n    get borderWidthIfBorderIsOn(){\n        if(this.border||this.borderOnly) return this.borderWidth\n        return 0\n    }\n\n    pointInShape(x,y){\n        let sides = this.findSides()\n        const [minX,maxX,minY,maxY] = this.findMax()\n        let distance = findDistance2Point(x,y,maxX,maxY)\n        let compareSide = [x,y,x+distance,y]\n        let intersect = 0\n        if(x>maxX||x<minX||y>maxY||y<minY) return false\n        sides.forEach(e=>{\n            if(findIntersection(e,compareSide)) intersect++\n        })\n        return !(intersect%2 === 0)\n    }\n\n    findSides(){\n        let vertex = this.findVertex()\n        let result = []\n        for(let i = 0;i<vertex.length;i++){\n            result.push([...vertex[i],...((vertex[i+1])?vertex[i+1]:vertex[0])])\n        }\n        return result\n    }\n\n    collide(shape){\n        if(shape.kind==='arc') return shape.collide(this)\n        let [maxX1,minX1,maxY1,minY1] = this.findMax()\n        let [maxX2,minX2,maxY2,minY2] = shape.findMax()\n        if (((minX1 < minX2) && (maxX1 > maxX2) && (minY1<minY2) && (maxY1>maxY2)) || ((minX2 < minX1) && (maxX2 > maxX1) && (minY2<minY1) && (maxY2>maxY1))) return true\n\n        let side1 = this.findSides()\n        let side2 = shape.findSides()\n\n        for (let s1 of side1){\n            for (let s2 of side2){\n                if(findIntersection(s1,s2)) return true\n            }\n        }\n        return false\n    }\n}\n\nlght.rect = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultRectOptions,this)\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.arc = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultArcOptions,this)\n    }\n\n    get radius(){\n        return (this.hasBorder)?this.rad + this.borderWidth : this.rad\n    }\n\n    get minAngle(){\n        return this.rotation\n    }\n\n    get maxAngle(){\n        return this.rotation + this.arcDegree\n    }\n\n    get minRadAngle(){\n        return degToRad(this.minAngle)\n    }\n\n    get maxRadAngle(){\n        return degToRad(this.maxAngle)\n    }\n\n    get pureCircle(){\n        return this.arcDegree===360\n    }\n\n    pointInShape(x,y){\n        var angle = findAngle2Point(this.absoluteX,this.absoluteY,x,y)\n        if (angle>this.minAngle && angle<this.maxAngle){\n            if(findDistance2Point(this.absoluteX,this.absoluteY,x,y)<=this.radius) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let result = [this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius]\n        let xs = [this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius]\n        let ys = [this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        if(!this.pointInShape(result[0],this.absoluteY)) result[0] = Math.min(...xs) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(result[1],this.absoluteY)) result[1] = Math.max(...xs) + this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[2])) result[2] = Math.min(...ys) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[3])) result[3] = Math.max(...ys) + this.borderWidthIfBorderIsOn/2;\n        return result\n    }\n\n    findVertex(){\n        let [minX,maxX,minY,maxY] = this.findMax()\n        let referenceX = [this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX]\n        let referenceY = [this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY]\n\n        return [\n            [minX,referenceY[referenceX.indexOf(minX)]],\n            [maxX,referenceY[referenceX.indexOf(maxX)]],\n            [referenceX[referenceY.indexOf(minY)],minY],\n            [referenceX[referenceY.indexOf(maxY)],maxY],\n        ]\n    }\n\n    fidnSides(){\n        if(this.arcDegree === 360) return false\n        return [\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        ]\n    }\n\n    collide(shape){\n        let vertex1 = this.findVertex()\n        let vertex2 = shape.findVertex()\n\n        for(let [x,y] of vertex1){\n            if(shape.pointInShape(x,y)) return true\n        }\n        for(let [x,y] of vertex2){\n            if(this.pointInShape(x,y)) return true\n        }\n        if(shape.kind==='arc'){                \n            //when checking for intersection between 2 arcs, there are 2 cases\n            //Case 1: they are both circles. In this case the distance between the 2 center have to be smaller or equal to\n            //sum of radius for them to intersect\n\n            if(this.pureCircle && shape.pureCircle){\n                return findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) <= this.radius + shape.radius\n            }\n\n            //Case 2: either of them are arcs\n            //In these cases, there are 2 scenarios\n            //Scenario 1: one of the vertexes will be inside the circle, this is easy to check\n            //Scenario 2: none of the vertex is inside the circle. There is only one possible explanation for this. In this case, check if \n            //the \"ray\" that connect the 2 center is inside both arcs, then check that the length of the ray is less than the length of both radius\n\n            if(findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) > this.radius + shape.radius) return false\n\n            let ray1 = findAngle2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY)\n            let ray2 = findAngle2Point(shape.absoluteX,shape.absoluteY,this.absoluteX,this.absoluteY)\n            return ((ray1<this.maxAngle&&ray1>this.minAngle)&&(ray2<shape.maxAngle&&ray2>shape.minAngle))\n        }\n        else{\n            let side = shape.findSides()\n\n            for(let s of side){\n                let closest = findClosestPoint(this.absoluteX,this.absoluteY,s)\n                if(closest){\n                    if (this.pointInShape(closest[0],closest[1])) return true\n                }\n            }\n            return false\n        }\n    }\n}\n\nlght.roundedRectangle = class extends lght.rect{\n    constructor(property,parent){\n        super(property,parent)\n        this.borderRadius = (property.borderRadius) || 0\n        if(this.clip){\n            if(property.clipCanvas){\n                this.clipImage = property.clipCanvas;\n                this.clipCanvas=true\n            }\n            else{\n                this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                    this.parent.updateVisual()\n                })\n            }\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        if(this.clipCanvas) return true\n        return this.clipImage.complete\n    }\n\n    changeClipImage(imageUrl){\n        this.clipImage = lght.sprite(imageUrl,()=>{\n            this.parent.updateVisual()\n        })\n    }\n}\n\nlght.poly = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultPolyOptions,this)\n        if(this.clip){\n            this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                this.parent.updateVisual()\n            })\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        return this.clipImage.complete\n    }\n\n    get polyPoints(){\n        if(!this.specialPolygon) return this.points\n        const radiusCoefficient = 360/this.numberOfSide\n        const result = []\n        for(let i = 0;i<this.numberOfSide;i++){\n            result.push(calculateRotatePoint(0,0,radiusCoefficient*i,this.radius))\n        }\n        return result\n    }  \n\n    get width(){\n        return this.findMax()[1] - this.findMax()[0]\n    }\n\n    get height(){\n        return this.findMax()[3] - this.findMax()[2]\n    }\n\n    get sideLength(){\n        if(!this.specialPolygon) return null\n        const radiusCoefficient = degToRad(360/this.numberOfSide)\n        return Math.sqrt(2*Math.pow(this.radius,2) - 2*Math.pow(this.radius,2)*Math.cos(radiusCoefficient))\n    }\n\n    findVertex(){\n        return this.polyPoints.map(([x,y])=>rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation))\n    }\n}\n\nlght.line = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultLineOptions,this)\n    }\n\n    get rotatedPoints(){\n        return this.points.map(([x,y])=>(rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation)))\n    }\n\n    findVertex(){\n        const result = []\n        const notIncluded = ([x,y]) => {\n            for (const position of result) {\n                const [x2,y2] = position\n                if(Math.round(x)===Math.round(x2) && Math.round(y)===Math.round(y2)) return false\n            }\n            return true\n        }\n        const point = [...this.rotatedPoints]\n        point.forEach(([x1,y1],index)=>{\n            if (index===point.length-1) return\n            const [x2,y2] = this.rotatedPoints[index+1]\n            const distance = findDistance2Point(x1,y1,x2,y2)\n            const tan = Math.atan((this.lineWidth/2)/distance)\n            const angle = findAngle2Point(x1,y1,x2,y2)\n            const angleQuadrant = radToDeg(tan)+angle\n            const firstDistance = Math.sqrt(distance*distance + (0.5*this.lineWidth)*(0.5*this.lineWidth))\n            const pointOneInFirstQuadrant = calculateRotatePoint(x1,y1,angleQuadrant,firstDistance)\n            const pointSecondInSecondQuadrant = calculateRotatePoint(...pointOneInFirstQuadrant,180+angle,distance)\n            const pointThreeInThirdQuadrant = calculateRotatePoint(...pointSecondInSecondQuadrant,270+angle,distance)\n            const pointFourInFourthQuadrant = calculateRotatePoint(...pointThreeInThirdQuadrant,angle,distance)\n            if(notIncluded(pointFourInFourthQuadrant)) result.push(pointFourInFourthQuadrant)\n            if(notIncluded(pointOneInFirstQuadrant)) result.push(pointOneInFirstQuadrant)\n            if(notIncluded(pointSecondInSecondQuadrant)) result.push(pointSecondInSecondQuadrant)\n            if(notIncluded(pointThreeInThirdQuadrant)) result.push(pointThreeInThirdQuadrant)\n        })\n        return result\n    }\n}\n\nlght.text = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultTextOptions,this)\n    }\n\n    get textSize(){\n        var c = lght.apps[0].context;\n        c.save();\n        c.font = this.font;\n        var width = c.measureText(this.text).width;\n        var height = c.measureText('gM').width;\n        c.restore();\n        return [width,height];\n    }\n\n    get w(){\n        return this.textSize[0] + this.borderWidthIfBorderIsOn\n    }\n\n    get h(){\n        return this.textSize[1] + this.borderWidthIfBorderIsOn\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,0.5],[1,0.5]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.img = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultImgOptions,this)\n        this.sprite = lght.sprite(this.spriteLink,()=>{\n            if(this.loadedFunction) this.loadedFunction()\n            this.parent.updateVisual()\n        })\n    }\n\n    get imageLoaded(){\n        return this.sprite.complete\n    }\n\n    get w(){\n        if(this.drawWidth) return this.drawWidth\n        if(this.imageLoaded){\n            if(this.drawHeight) return (this.drawHeight*this.sprite.width)/this.sprite.height\n            return this.sprite.width\n        }\n        return 0\n    }\n\n    get h(){\n        if(this.drawHeight) return this.drawHeight\n        if(this.imageLoaded){\n            if(this.drawWidth) return (this.drawWidth*this.sprite.height)/this.sprite.width\n            return this.sprite.height\n        }\n        return 0 \n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\n//Input\n //<--------------KEYBOARD INPUT GO HERE------------------->\n lght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\nlght.app.prototype.startCursor = function(){\n    this.canvas.style.cursor = 'pointer'\n}\n\nlght.app.prototype.endCursor = function(){\n    this.canvas.style.cursor = 'default'\n}\n\nlght.object.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.startCursor(),()=>this.parent.endCursor())\n}\n\nlght.shape.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.parent.startCursor(),()=>this.parent.parent.endCursor())\n}\n\nlght.app.prototype.mouseInputInit = function(){\n    const attachEvent = (e,event)=>{\n        const [x,y] = this.translateMouseCoor(e)\n        if(this.objects.length === 0) return\n        for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj[event].length === 0) continue\n            if(!obj.display) continue\n            if(obj.pointInObject(x,y)){\n                for(let func of obj[event])( func(x,y))\n                break;\n            }\n        }\n        LargeLoop:for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj.shapes.length === 0) continue\n            if(!obj.display) continue\n            for(let a = obj.shapes.length;a--;a>=0){\n                const shape = obj.shapes[a]\n                if(shape[event].length === 0) continue\n                if(!shape.display) continue\n                if(shape.pointInShape(x,y)){\n                    for(let func of shape[event]){func(x,y)}\n                    break LargeLoop;\n                }\n            }\n        }\n    }\n\n    this.canvas.addEventListener('mouseup',(e)=>attachEvent(e,'mouseUpEvent'))\n    this.canvas.addEventListener('mousemove',(e)=>attachEvent(e,'mouseMoveEvent'))\n    this.canvas.addEventListener('mousedown',(e)=>attachEvent(e,'mouseDownEvent'))\n}\n\n//PRESS EVENT FOR AN APP\nlght.object.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//MAKE AN OBJECT DRAGGABLE\nlght.object.prototype.makeDraggable = function (func,funcDone) {\n    this.enterCursorEvent()\n    this.onDrag = false; var obj = this; this.draggable = true;\n    var rx = 0; var ry = 0; \n\n    this.mouseDownEvent.push((x,y)=>{\n        if(obj.draggable){\n            if(!obj.onDrag){\n                obj.onDrag = true;\n                rx = x - obj.x; ry = y - obj.y;\n            }\n        }\n    })\n\n    document.addEventListener('mousemove', (e) => {\n        var c = this.parent.translateMouseCoor(e);\n        if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height) obj.onDrag = false\n        if(obj.onDrag){\n            obj.x = c[0] - rx; obj.y = c[1] - ry;\n            obj.updateVisual();\n            if(typeof func == 'function') func(obj);\n        }\n    })\n\n    this.parent.canvas.addEventListener('mouseup', (e) => {\n        if(obj.onDrag){\n            obj.onDrag = false;\n            if(funcDone) funcDone()\n        }\n    })\n}\n\n//HOVER EVENT\nlght.object.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        document.addEventListener('mousemove', (e)=>{\n            var c = this.parent.translateMouseCoor(e);\n            if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.updateVisual()\n                return;\n            }\n            var touch = obj.pointInObject(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.updateVisual()\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n                obj.updateVisual()\n            }\n        })\n    }\n}\n\n//INPUT FOR SHAPES\nlght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\n//PRESS EVENT FOR AN APP\nlght.shape.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//HOVER EVENT\nlght.shape.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        document.addEventListener('mousemove', (e)=>{\n            if(!this.display) return\n            var c = this.parent.parent.translateMouseCoor(e);\n            if(c[0] < 0 || c[0] >this.parent.parent.canvas.width || c[1] < 0 || c[1] > this.parent.parent.canvas.height){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n                return;\n            }\n            var touch = obj.pointInShape(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n                obj.parent.updateVisual()\n            }\n        })\n    }\n}\n\n//Animation\nlght.app.prototype.animate = function() {\n    if(lght.frameTime !== undefined && lght.lastFrame !== undefined){\n        let timeDifference = lght.frameTime - lght.lastFrame\n        this.objects.forEach(e => {\n            e.animate(timeDifference);\n            e.shapes.forEach(a => {\n                a.animate(timeDifference)\n            })\n        });\n    }\n}\n\nconst addAnimation = function(property,value,time,func){\n    this.animationCount++;\n    let id = this.animationCount;\n\n    let timeout = setTimeout(()=>{\n        changeByDotNotation(property,this,value)\n        this.cancelAnimation(id)\n        if (this.parent.updateVisual) this.parent.updateVisual()\n        else this.updateVisual()\n        if(func) func();\n    },time)\n\n    const alreadyAnimated = this.animations.find((animation)=>animation[0] === property)\n    if(alreadyAnimated){\n        this.cancelAnimation(alreadyAnimated[6])\n    }\n\n    this.animations.push([property,value,getByDotNotation(property,this),time,timeout,func,id]);\n    return id;\n}\n\nconst cancelAnimation = function(){\n    for(let id of [...arguments]){\n        let animation = this.animations.find(e=>e[6] === id)\n        let index = this.animations.findIndex(e=>e[6]===id)\n        if(!animation) return false\n        clearTimeout(animation[4])\n        this.animations.splice(index,1)\n    }\n}\n\nconst animate = function (time){\n    let obj = this\n    this.animations.forEach(animation=>{\n        let [property,value,init,timeUp] = animation\n        let newValue = getByDotNotation(property,obj) + (time/timeUp)*(value-init)\n        if(init < value && newValue > value) newValue = value\n        if(init>value && newValue < value) newValue = value\n        changeByDotNotation(property,obj,newValue)\n        if (this.parent.updateVisual) this.parent.updateVisual()\n        else this.updateVisual()\n    })\n}\n\nlght.animateFunctionReference = {\n    animate,\n    addAnimation,\n    cancelAnimation,\n}\n\nfor(var prop in lght.animateFunctionReference){\n    lght.object.prototype[prop] = lght.animateFunctionReference[prop];\n    lght.shape.prototype[prop] = lght.animateFunctionReference[prop];\n}\n\n//Draw\nlght.app.prototype.render = function(){\n    this.clearCanvas();\n    this.fillBackground();\n    this.renderShape();\n}\n\nlght.app.prototype.visualInit = function(){\n    this.backgroundColor = this.options.background;\n    this.context = this.canvas.getContext(\"2d\");\n}\n\nlght.app.prototype.renderShape = function(){\n    this.renderPositions();\n\n    this.objects.sort((a,b)=>a.zIndex -b.zIndex).forEach(obj=>{\n        if(obj.static) obj.drawPreloader();\n        else obj.draw();\n    })\n}\n\n//<-------------------BASIC CANVAS STUFF---------------------->\n//CLEARING CANVAS AND BACKGROUND COLOR\nlght.app.prototype.clearCanvas = function(){\n    this.context.save(); \n    this.context.clearRect(0,0,this.canvas.width,this.canvas.height); \n    this.context.restore();\n}\n\nlght.app.prototype.fillBackground = function(){\n    if(this.backgroundColor!=='none'){\n        this.context.save(); \n        this.context.fillStyle = this.backgroundColor;\n        this.context.fillRect(0,0,this.canvas.width,this.canvas.height);\n        this.context.restore();\n    }\n}\n\n/*POSITION INDICATOR FUNCTIONS GO HERE\nDraw all position indicators at once to save performance from context state change*/\nlght.app.prototype.renderPositions = function(){\n    this.context.save();\n    this.context.fillStyle = 'red';\n\n    this.objects.forEach(({x,y,positionIndicator}) => {\n        if(!positionIndicator) return\n        this.context.beginPath()\n        this.context.arc(x,y,5,0,2*Math.PI)\n        this.context.closePath()\n        this.context.fill()\n    });\n    \n    this.context.restore();\n}\n\n\n/* SHAPE PRERENDERING FUNCTIONS GO HERE\nShape prerendering prerender shapes on canvases to save performance*/\n\nlght.object.prototype.updateVisual = function(){\n    //If the dimension changes a new canvas have to be created\n    var max = this.findMax();\n    for(var i = 0;i<max.length;i++){\n        if(Math.round(max[i])!==Math.round(this.preloader.maxes[i])){\n            this.createPreloader(); return;\n        }\n    }\n\n    this.clearPreloader();\n\n    this.shapes.forEach(s=>{\n        let x = this.preloader.ox + s.x\n        let y = this.preloader.oy + s.y\n        lght.drawShape(this.preloader.context,x,y,s,)\n    })\n}\n\nlght.object.prototype.clearPreloader = function(){\n    this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height);\n}\n\nlght.object.prototype.createPreloader = function(){\n    this.preloader = document.createElement('canvas');\n    \n    this.preloader.maxes = this.findMax();\n    let [minX,maxX,minY,maxY] = this.preloader.maxes\n\n    this.preloader.width = maxX-minX;\n    this.preloader.height = maxY-minY;\n\n    this.preloader.ox = this.x - minX;\n    this.preloader.oy = this.y - minY;\n\n    this.preloader.context = this.preloader.getContext('2d');\n\n    this.updateVisual();\n}\n\nlght.object.prototype.drawPreloader = function(){\n    if(!this.display) return\n    if(this.preloader.width >0 && this.preloader.height > 0){\n        let x = this.preloader.maxes[0] + this.preloader.width/2;\n        let y = this.preloader.maxes[2] + this.preloader.height/2;\n        x = Math.ceil(x); y = Math.ceil(y);\n\n        this.parent.context.save()\n        this.parent.context.translate(x,y)\n        lght.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height);\n        this.parent.context.restore()\n    }\n}\n\n\n//<------------------SHAPE DRAWING FUNCTION---------------->\nlght.object.prototype.draw = function(){\n    if(!this.display) return\n    this.shapes.forEach(s=>{\n        lght.drawShape(this.parent.context,this.x+s.x,this.y+s.y,s)\n    })\n}\n\n//MASTER FUNCTION\nlght.drawShape = function(c,x,y,shape){\n    if(!shape.display) return\n    if(shape.border || shape.borderOnly) this.drawShapeKind(c,shape,x,y,true,1,shape.borderColor,shape.shadow);\n    else if(!shape.borderOnly && !shape.border) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color,shape.shadow);\n    if(!shape.borderOnly) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color);\n}\n\nlght.drawShapeKind = function(c,s,x,y,stroke,opacity,color,shadow){\n    opacity = opacity * s.parent.opacity;\n    if(opacity == 0 || opacity <0 ) return\n    x= Math.ceil(x); y = Math.ceil(y);\n\n    c.save()\n    c.globalAlpha = opacity\n    c.fillStyle = color\n    c.strokeStyle = color\n    c.lineWidth = s.borderWidth\n    c.translate(x,y)\n    c.scale(s.scaleX,s.scaleY)\n\n    if(shadow){\n        const {color,blur,offsetX,offsetY} = shadow\n        c.shadowColor = color\n        c.shadowBlur = blur\n        c.shadowOffsetX = offsetX\n        c.shadowOffsetY = offsetY\n    }\n\n    switch(s.kind){\n        case 'rect':\n            lght.drawRect(c, s.w, s.h, s.rotation, stroke); break;\n        case 'arc':\n            lght.drawArc(c, s.rad,s.arcDegree,s.rotation, stroke); break;\n        case 'text':\n            lght.drawText(c, s.text,s.font, stroke,s.textAlign ,s.w, s.h,s.rotation); break;\n        case 'img':\n            if(s.imageLoaded) lght.drawImg(c, s.sprite,s.w,s.h,s.rotation); break;\n        case 'poly':\n            lght.drawPoly(c, s.polyPoints,s.rotation, stroke); break;\n        case 'line':\n            if(stroke){\n                const points = s.points.map(((position,index)=>{\n                    const [x,y] = position\n                    if(index === 0){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index+1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else if(index === s.points.length-1){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index-1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else return [x,y]\n                }))\n                lght.drawLine(c,points,s.rotation,s.lineWidth+s.borderWidth);\n            }\n            else lght.drawLine(c,s.points,s.rotation,s.lineWidth); break;\n        case 'roundedRectangle':\n            lght.drawRoundedRectangle(c,s.w,s.h,s.rotation,s.borderRadius,stroke)\n            break\n        default:\n            break\n    }\n    if(s.clip && s.clipImageLoaded){\n        c.clip()\n        c.rotate(degToRad(s.rotation))\n        if(typeof s.clipSpriteSheetX === 'number' && typeof s.clipSpriteSheetY === 'number'){\n            const spriteWidth = s.clipImage.width / s.spriteLengthX\n            const spriteHeight = s.clipImage.height / s.spriteLengthY\n            const clipStartX = s.clipSpriteSheetX * spriteWidth\n            const clipStartY = s.clipSpriteSheetY * spriteHeight\n            c.drawImage(s.clipImage,clipStartX,clipStartY,spriteWidth,spriteHeight,-s.width/2,-s.height/2,s.width,s.height)\n        }\n        else c.drawImage(s.clipImage,-s.width/2,-s.height/2,s.width,s.height)\n    }\n\n    c.restore()\n}\n\n//DRAWING RECTANGLE\nlght.drawRect = function(c,w,h,rotation,stroke){\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.strokeRect(-w/2,-h/2,w,h);\n    else c.fillRect(-w/2,-h/2,w,h);\n}\n\nlght.drawRoundedRectangle = (c,w,h,rotation,borderRadius,stroke)=>{\n    c.rotate(degToRad(360,rotation))\n    c.beginPath()\n    c.moveTo(0,-h*0.5)\n    c.lineTo(-w*0.5+borderRadius,-h*0.5)\n    c.quadraticCurveTo(-w*0.5,-h*0.5,-w*0.5,-h*0.5+borderRadius)\n    c.lineTo(-w*0.5,h*0.5-borderRadius)\n    c.quadraticCurveTo(-w*0.5,h*0.5,-w*0.5+borderRadius,h*0.5)\n    c.lineTo(w*0.5-borderRadius,h*0.5)\n    c.quadraticCurveTo(w*0.5,h*0.5,w*0.5,h*0.5-borderRadius)\n    c.lineTo(w*0.5,-h*0.5+borderRadius)\n    c.quadraticCurveTo(w*0.5,-h*0.5,w*0.5-borderRadius,-h*0.5)\n    c.lineTo(0,-h*0.5)\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\n//DRAWING CIRCLES\nlght.drawArc = function(c,rad,arcDegree,rotation,stroke){\n    c.beginPath();\n\n    const br = degToRad(360 - rotation - arcDegree);\n    const er = degToRad(360 - rotation);\n\n    if(arcDegree < 360){\n        const [x,y] = rotatePoint(0,0,rad,0,360-rotation-arcDegree);\n        c.moveTo(x,y); c.moveTo(0,0);\n    }\n\n    c.arc(0,0,rad,br,er);\n\n    if(stroke) c.stroke();\n    else c.fill();\n    c.closePath();\n\n}\n\n//DRAWING TEXT\n\nlght.drawText = function(c,text,font,stroke,textAlign,width,height,rotation){\n    c.textAlign = textAlign;\n    c.font = font;\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5));\n    else c.fillText(text,Math.ceil(-width/2),Math.ceil(height/3.5))\n}\n\n//DRAWING IMAGES\nlght.drawImg = function(c,sprite,w,h,rotation){\n    c.rotate(degToRad(360-rotation));\n    c.drawImage(sprite,-w/2,-h/2,w,h);\n}\n\nlght.drawPoly = (c,points,rotation,stroke) => {\n    if(points.length === 0 || !points) return \n    c.rotate(degToRad(360-rotation))\n    c.beginPath()\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\nlght.drawLine = (c,points,rotation,lineWidth)=>{\n    c.beginPath()\n    c.rotate(degToRad(360-rotation))\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.lineWidth = lineWidth\n    c.stroke()\n}\n\nlght.object.prototype.addShape = function (property) {\n    let shape = new lght[property.kind](property,this);\n    this.updateVisual()\n    return shape\n}\n\nlght.app.prototype.addObject = function (property) {\n    return new lght.object(property,this);\n}\n\nlght.app.prototype.addStorage = function (property){\n    return new lght.storage(property,this)\n}\n\nlght.app.prototype.removeObject = function (obj) {\n    this.objects.splice(this.objects.indexOf(obj),1);\n}\n\nexport default lght","import lght from './lght/lght'\nconst pd = 2\nconst handHeight = 75*pd\nconst spriteLink = 'https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg'\nconst View = class{\n  constructor(ref){\n    this.cardSpriteColumn = 14\n    this.cardSpriteRow = 8\n    this.cardSpriteReference = {\n      wild:[0,13],\n      Draw4:[4,13],\n      colorReference:['red','yellow','green','blue'],\n      otherReference:['Skip','Reverse','Draw 2']\n    }\n    this.app = new lght.app(ref)\n    this.app.backgroundColor = 'white'\n    this.app.pixelDensity = pd\n    this.app.canvas.width = 850*pd\n    this.app.canvas.height = 650*pd\n    this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:'roundedRectangle',w:this.app.canvas.width,h:this.app.canvas.height,clip:true,clipImageLink:'assets/wood.jpg'})\n    this.positionReference = {\n      leaderBoard:[655*pd,279*pd],\n      drawDeck:[215*pd,279*pd],\n      playDeck:[this.app.canvas.width/2,279*pd],\n      playerDeck:[this.app.canvas.width/2,this.app.canvas.height-(handHeight/2)]\n    }\n\n    let drawable = false\n    let resolveFunction = ()=>{}\n    this.drawDeck = this.createDeck('blue 2',215*pd,279*pd)\n    this.drawDeck.flip()\n    this.drawDeck.pressedEvent(()=>{\n      if(!drawable) return\n      else resolveFunction()\n    })\n    this.awaitDraw = ()=>new Promise(r=>{\n            drawable = true\n            resolveFunction = (r)\n    })\n    this.cancelDraw = ()=>drawable = false\n\n    this.createHand()\n    this.createLeaderboard()\n    this.drawAnnouncement()\n    this.configureStartGameMessage()\n    this.configureUnoMessage()    \n  }\n\n  animatePlayerPlay = (content)=>this.animatePlay(content,...this.positionReference.playerDeck)\n  animatePlayerDraw = ()=>this.animateDraw(...this.positionReference.playerDeck)\n  animateLeaderboardDraw = ()=>this.animateDraw(...this.positionReference.leaderBoard)\n  animateLeaderboardPlay = (content)=> this.animatePlay(content,...this.positionReference.leaderBoard)\n\n  animateDraw = (endX,endY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(null,true)\n    card.x = this.positionReference.drawDeck[0]\n    card.y = this.positionReference.drawDeck[1]\n    card.zIndex = -1\n    card.display = true\n    card.addAnimation('x',endX,animationTime)\n    card.addAnimation('y',endY,animationTime)\n    card.shapes[0].addAnimation('scaleX',0.2,animationTime,r)\n    card.shapes[0].addAnimation('scaleY',0.2,animationTime,()=>card.kill())\n  })\n\n  animatePlay = (content,startX,startY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(content)\n    card.shapes[0].scaleX = 0.2\n    card.shapes[0].scaleY = 0.2\n    card.x = startX\n    card.y = startY\n    card.display = true\n    card.addAnimation('x',this.playDeck.x,animationTime,()=>{\n      this.playDeck.kill()\n      this.playDeck=card\n    })\n    card.addAnimation('y',this.playDeck.y,animationTime,r)\n    card.shapes[0].addAnimation('scaleX',1,animationTime)\n    card.shapes[0].addAnimation('scaleY',1,animationTime)\n  })\n\n  createLeaderboard(){\n    const leaderBoard = this.app.addStorage({x:655*pd,y:279*pd,spacing:20,direction:'column'})\n    leaderBoard.addShape({kind:'roundedRectangle',w:120*pd,h:150*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    leaderBoard.addShape({kind:'text',font:'32px Times News Roman',text:\"Turn Board:\",y:-60*pd})\n    const turnIndicator = leaderBoard.addShape({x:85*pd,kind:'poly',specialPolygon:true,numberOfSide:3,color:'yellow',radius:10*pd,rotation:180})\n    let color = ['green','red','darkyellow']\n    leaderBoard.elementFunction = (content,i)=>{return leaderBoard.addShape({kind:'text',font:'30px Times News Roman',color:color[i],text:content})}\n    \n    this.updateTurnIndicator = (turn)=>{\n      const {y} = leaderBoard.shapes[turn+3]\n      turnIndicator.addAnimation('y',y,200,()=>{\n        let numberOfLoops = 5\n        const fadeOut = ()=>{\n          numberOfLoops--\n          if(numberOfLoops<0) return\n          turnIndicator.addAnimation('opacity',0,500,fadeIn)\n        }\n        const fadeIn = ()=>turnIndicator.addAnimation('opacity',1,500,fadeOut)\n        fadeOut()\n      })\n    }\n    this.updateLeaderboard = (players)=>{\n          leaderBoard.model = players\n          leaderBoard.updateToModel()\n    }\n  }\n\n  createHand(){\n    let cards = []\n    let resolveFunction = ()=>{}\n    let verifyFunction = ()=>{}\n    let onSelect = false\n    const playerHand = this.app.addStorage({spacing:-70*pd,y:this.app.canvas.height-(handHeight/2),x:this.app.canvas.width/2,model:cards})\n    playerHand.addShape({kind:'rect',color:'brown',w:this.app.canvas.width,h:handHeight})\n    playerHand.elementFunction = (content)=>{\n      let position = []\n      if(content === 'Wild') position = this.cardSpriteReference.wild\n      else if(content === 'Draw 4') position = this.cardSpriteReference.Draw4\n      else{\n        const color = content.split(' ')[0]\n        const action = content.split(' ').slice(1).join(' ')\n        position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n        if(parseInt(action)) position[1] = parseInt(action)\n        else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n      }\n      const shape = playerHand.addShape({y:30,clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd*1.2,h:145.5*pd*1.2,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n      shape.hoverEvent(()=>{\n        if(verifyFunction(content) && onSelect) shape.borderColor = 'yellow'\n        shape.borderWidth = 5*pd\n        shape.addAnimation('y',-100,200)\n      },()=>{\n        shape.borderColor = 'black'\n        shape.borderWidth = 1.25*pd\n        shape.addAnimation('y',30,200)\n      })\n      shape.pressedEvent(()=>{\n            if(!verifyFunction(content)) return\n            onSelect = false\n            shape.kill()\n            resolveFunction(content)\n      })\n      return shape\n    }\n    this.updateCards = (card)=>{\n      playerHand.model = card\n      playerHand.updateToModel()\n    }\n    this.awaitSelection = (vf)=>new Promise(r=>{\n      verifyFunction = vf\n      resolveFunction = r\n      onSelect = true\n    })\n    this.cancelSelection = ()=>onSelect = false\n  }\n\n  createDeck(content,x,y){\n    const deckCardOption = {kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black'}\n    const deck = this.app.addObject({x,y})\n    deck.addShape({x:6*pd,y:-5*pd,...deckCardOption})\n    deck.addShape({x:4*pd,y:-3.75*pd,...deckCardOption})\n    deck.addShape({x:3*pd,y:-2.5*pd,...deckCardOption})\n    deck.addShape({x:1.5*pd,y:-1.25*pd,...deckCardOption})\n    const card = this.createCard(content)\n    card.x = x; card.y = y\n    card.shapes[0].shadow = null\n    card.shapes[0].border = false\n    card.display = true\n    card.updateVisual()\n    return card\n  }\n\n  createCard(content,back = false){\n    const card = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:false})\n    if(back){\n      card.addShape({kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:'assets/back.png',borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n    }\n    else{let flipped = false\n    let position = []\n    if(content === 'Wild') position = this.cardSpriteReference.wild\n    else if(content === 'Draw 4') position = this.cardSpriteReference.Draw4\n    else{\n      const color = content.split(' ')[0]\n      const action = content.split(' ').slice(1).join(' ')\n      position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n      if(parseInt(action)) position[1] = parseInt(action)\n      else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n    }\n    const shape = card.addShape({clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n  \n    const changeToBack =()=>{\n      shape.clipSpriteSheetX = null\n      shape.changeClipImage('assets/back.png')\n    }\n\n    const changeToFront = ()=>{\n      shape.clipSpriteSheetX = position[1]\n      shape.changeClipImage(spriteLink)\n    }\n\n    const flipAnimation = (back=true)=>new Promise(r=>{\n      shape.addAnimation('scaleX',0,100,()=>{\n        if(back) changeToBack()\n        else changeToFront()\n        shape.addAnimation('scaleX',1,100,r)\n      })\n    })\n    card.flip = ()=>{\n      flipped = !flipped\n      return flipAnimation(flipped)\n    }}\n    return card\n  }\n\n  drawAnnouncement(){\n      let animationDuration = 500\n\n      this.announcementQueue = []\n      this.announcmentPerpetual = []\n      this.onAnnouncementPerpetual = false\n      this.onAnnoucementChanged = false\n      \n      //Format: [text,color,time/perpetual,started]\n      this.announcement = this.app.addObject({x:this.app.canvas.width/2,y:50*pd,positionIndicator:false})\n      this.annoucementText = this.announcement.addShape({kind:'text',font:'100px Times News Roman',color:'orange',text:'',display:false})\n      this.announcement.addShape({kind:'roundedRectangle',w:this.app.canvas.width/2,h:100*pd,display:false})\n      const fadeOut = (func)=>this.annoucementText.addAnimation('opacity',0,animationDuration,()=>{this.annoucementText.display=false;if(func) func()})\n      const fadeIn = (funcDone)=>this.annoucementText.addAnimation('opacity',1,animationDuration,funcDone)\n      const fadeOutThenFadeIn = (func,funcDone)=> fadeOut(()=>{func();this.annoucementText.display = true; fadeIn(funcDone)})\n\n      this.updateAnnouncement = ()=>{\n          if(this.announcementQueue.length > 0 && !this.announcementQueue[0][3]){\n              let [text,color,time] = this.announcementQueue[0]\n              fadeOutThenFadeIn(()=>{\n                  this.annoucementText.text = text\n                  this.annoucementText.color = color\n                  setTimeout(()=>{this.announcementQueue.splice(0,1);this.updateAnnouncement();},time+animationDuration)\n              })\n              this.announcementQueue[0][3] = true\n          }\n          else if(this.announcementQueue.length >0) return\n          else if(!this.onAnnouncementPerpetual && this.annoucementText.display) return fadeOut()\n          else if(this.onAnnouncementPerpetual && ((!this.annoucementText.display) || this.onAnnoucementChanged)) return fadeOutThenFadeIn(()=>{\n              let [text,color] = this.announcmentPerpetual\n              this.annoucementText.text = text\n              this.annoucementText.color = color\n          })\n      }\n    }\n\n    changeAnnoucementPerpetual(text,color){\n      this.announcmentPerpetual = [text,color]\n      this.onAnnoucementChanged = true\n      this.updateAnnouncement()\n    }\n\n    addToAnnoucementQueue(text,color,time){\n      this.announcementQueue.push([text,color,time,false])\n      this.updateAnnouncement()\n    }\n\n    configureUnoMessage(){\n      const uno = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1000})\n      const shape = uno.addShape({kind:'img',spriteLink:'./assets/18.svg',scaleX:0,scaleY:0})\n      uno.display = false\n      this.UNO = ()=>{\n        uno.display = true\n        shape.addAnimation('scaleX',1.5,400,()=>{\n          setTimeout(()=>{\n            shape.addAnimation('scaleX',0,100,()=>uno.display = false)\n            shape.addAnimation('scaleY',0,100)\n          },500)\n        })\n        shape.addAnimation('scaleY',1.5,400)\n      }\n    }\n\n    configureStartGameMessage(){\n      const startGameObject = this.app.addObject({x:this.app.canvas.width-75*pd,y:this.app.canvas.height-30*pd,display:false})\n      const text = startGameObject.addShape({kind:'text',text:'Start Game',color:'orange',font:'40px Times News Roman'})\n      startGameObject.addShape({kind:'roundedRectangle',w:200,h:100,display:false})\n      let activated = false\n      let resolveFunction = ()=>{}\n      const fadeIn = ()=>{\n          if(!activated){\n              text.opacity = 1;\n          }\n          else text.addAnimation('opacity',1,1000,fadeOut)\n      }\n      const fadeOut = ()=>{\n          if(!activated){\n              text.opacity = 1\n          }\n          else text.addAnimation('opacity',0,1000,fadeIn)\n      }\n\n      startGameObject.pressedEvent(()=>{\n          activated = false\n          startGameObject.display = false\n          resolveFunction()\n      })\n\n      this.initiateStartGameMessage = (func=()=>{})=>{\n          if(!activated){\n              resolveFunction = func\n              activated = true\n              startGameObject.display = true\n              fadeOut()\n          }\n      }\n      this.turnOffStartGameMessage = ()=>{\n          startGameObject.display = false\n      }\n  }\n}\n\nexport default View","import View from './view'\nconst io = require('socket.io-client')\nconst axios = require('axios')\nconst _ = require('lodash')\n\nconst Controller = async (canvasref,token,userid)=>{\n      const view = new View(canvasref)\n      let model = null\n      const url = (process.env.NODE_ENV==='production')?'/':'http://localhost:4000'\n      const socket = io.connect(url,{query:{token}})\n\n      const play = (card)=>{\n            socket.emit('Play Card',card)\n      }\n\n      const draw = ()=>{\n            socket.emit('Draw Card')\n      }\n\n      const verify = card=>{\n            if(card === 'Wild' || card==='Draw 4' || model.currentTopCard === 'Wild' || model.currentTopCard === 'Draw 4') return true\n            const color = model.currentTopCard.split(' ')[0]\n            const action = model.currentTopCard.split(' ').slice(1).join(' ')\n            const color2 = card.split(' ')[0]\n            const action2 = card.split(' ').slice(1).join(' ')\n            return ((color===color2) || (action===action2))\n      }\n\n      socket.on('Update',async (m)=>{\n            console.log(m)\n            let oldModel = (model)?_.cloneDeep(model):null\n            model = m\n            if(model.inGame) view.turnOffStartGameMessage()\n            if(parseInt(model.onTurn) == userid){\n                  view.awaitSelection(verify).then((content)=>{view.cancelDraw();play(content)})\n                  view.awaitDraw().then(()=>{view.cancelSelection();draw()})\n            }\n            else{\n                  view.cancelDraw()\n                  view.cancelSelection()\n            }\n            //check with old model\n            if(oldModel){\n                  if(parseInt(oldModel.onTurn) != parseInt(model.onTurn) && model.onTurn >= 0) view.updateTurnIndicator(parseInt(model.onTurn))\n                  let newAnnoucements = model.feed.slice(oldModel.feed.length)\n                  let newDirectives = model.directives.slice(oldModel.directives.length)\n                  const players = model.players.map(e=>e.username)\n                  const oldPlayer = oldModel.players.map(e=>e.username)\n                  if(JSON.stringify(players) !== JSON.stringify(oldPlayer)) view.updateLeaderboard(players)\n                  if(newAnnoucements.length) newAnnoucements.forEach(message=>view.addToAnnoucementQueue(message,'black',1000))\n                  if(newDirectives.length){\n                        for(let [code,user] of newDirectives){\n                              switch(code){\n                                    case 1:\n                                          if(user === userid){\n                                                await view.animatePlayerDraw()\n                                                const latestDraw = model.players[userid].cards.slice(oldModel.players[userid].cards.length)[0]\n                                                if(verify(latestDraw)) play(latestDraw)\n                                                else socket.emit('Pass Turn')  \n                                          }\n                                          else view.animateLeaderboardDraw()\n                                          break;\n                                    case 2:\n                                          if(user === userid) for(let i = 0;i<4;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 3:\n                                          if(user === userid) for(let i = 0;i<2;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<2;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 4:\n                                          if(user===userid) await view.animatePlayerPlay(model.currentTopCard)\n                                          else await view.animateLeaderboardPlay(model.currentTopCard)\n                                          break;      \n                                    case 5:\n                                          view.UNO()\n                                          break;\n                                    case 7:\n                                          const animateToPlayer = async ()=>{for(let i = 0;i<4;i++)(await view.animatePlayerDraw())}\n                                          const animateToLeaderBoard = async ()=>{for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())}\n                                          animateToPlayer()\n                                          animateToLeaderBoard()\n                                          break;\n                                    default:break;\n                              }\n                        }\n                  }\n                  const oldCard = oldModel.players[userid].cards\n                  const newCard = model.players[userid].cards\n                  if(JSON.stringify(oldCard) !== JSON.stringify(newCard))view.updateCards(model.players[userid].cards)\n            }\n            else{\n                  const players = model.players.map(e=>e.username)\n                  view.updateLeaderboard(players)\n                  view.updateCards(model.players[userid].cards)\n                  if(model.onTurn>=0)view.updateTurnIndicator(model.onTurn)\n                  view.playDeck = view.createDeck(model.currentTopCard,view.app.canvas.width/2,279*2)\n                  if(!model.inGame) view.initiateStartGameMessage(()=>socket.emit('Start Game'))\n            }\n            \n      })\n\n      socket.on('End Game',(winner)=>{\n            view.addToAnnoucementQueue(`${model.players[winner].username} had won the game`)\n      })\n\n      socket.on('Error',(error)=>console.log(error))\n      console.log = ()=>{}\n}\n\nexport default Controller","import React, { useEffect, useState, useRef } from 'react'\nimport {connect} from 'react-redux'\nimport Controller from '../controller'\nimport cogoToast from 'cogo-toast'\n\nconst Game = connect(({token,playerid,id})=>({token,playerid,id}),dispatch=>({dispatch}))(({token,playerid,id,dispatch})=>{\n    const ref = useRef()\n    useEffect(()=>{\n      Controller(ref.current,token,playerid)\n    },[])\n    const copyToClipboard = str => {\n        const el = document.createElement('textarea');\n        el.value = str;\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n        cogoToast.success('Copied!')\n    };\n    const url = `https://playunoonline.herokuapp.com/join/${id}`\n    return (\n      <div className=\"App\">\n        <div className='d-flex game' style={{alignItems:'center',height:'100%',width:'100%',position:'absolute'}}>\n          <canvas ref={ref} className='bg-primary' style={{width:850,height:650,margin:'auto'}}></canvas>      \n        </div>\n        <div className='test' style={{zIndex:10000}}>\n            Invite Link : <a href={url}>{url}</a> \n            <div href='/' className='border rounded d-inline ml-2' style={{padding:'5px',cursor:'pointer',zIndex:1000}} onClick={e=>{e.preventDefault();copyToClipboard(url)}}>Copy</div>\n            <a href='/' onClick={e=>{e.preventDefault();dispatch({type:'LOG_OUT'})}} className='text-danger'>Log Out</a>\n        </div>\n      </div>\n    );\n})\nexport default Game","import React, { useState, useEffect } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form} from 'formik'\nconst {join} = require('../api')\n\nconst Join = (connect(({tempJoinId})=>({tempJoinId}),dispatch=>({dispatch}))(({dispatch,changeHistory,tempJoinId})=>{\n    const [loading,setLoading] = useState(false)\n\n\n    useEffect(()=>{\n        if(!tempJoinId){\n            dispatch({type:'JOINED'})\n        }\n    },[])\n\n    const joinGame = async ({username})=>{\n        setLoading(true)\n        console.log(tempJoinId)\n        const {data} = await join(tempJoinId,username)\n        const {token,id,playerid} = data\n        console.log(data)\n        dispatch({type:'JOIN_LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container'>\n            {!loading &&\n                <div className='text-center'>\n                    <h1>Uno Online</h1>\n                    <div className='text-secondary'>Created by Long Tran</div>\n                    <div className='pt-5 pb-5 mt-5' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)'}}>\n                        <Formik initialValues={{username:''}} onSubmit={joinGame}>\n                            {({handleSubmit,handleChange,handleBlur})=>(\n                                <Form>\n                                    <div className = 'container w-50'>\n                                        <label className='font-weight-bold'>Name:</label>\n                                        <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Join game</button>\n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                </div>\n            }\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Join","import React, { useState } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form} from 'formik'\nconst {create} = require('../api')\n\nconst Landing = withRouter(connect(null,dispatch=>({dispatch}))(({dispatch,history})=>{\n    const [loading,setLoading] = useState(false)\n\n    const createGame = async ({username})=>{\n        setLoading(true)\n        const {data} = await create(username)\n        const {token,id,playerid} = data\n        dispatch({type:'LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container'>\n            {!loading &&\n                <div className='text-center'>\n                    <h1>Uno Online</h1>\n                    <div className='text-secondary'>Created by Long Tran</div>\n                    <div className='pt-5 pb-5 mt-5' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)'}}>\n                        <Formik initialValues={{username:''}} onSubmit={createGame}>\n                            {({handleSubmit,handleChange,handleBlur})=>(\n                                <Form>\n                                    <div className = 'container w-50'>\n                                        <label className='font-weight-bold'>Name:</label>\n                                        <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Create game</button>\n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                </div>\n            }\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Landing","import React,{useEffect} from 'react';\nimport './App.css';\nimport {Provider,connect} from 'react-redux'\nimport {BrowserRouter as Router,Switch,Link,Route,useLocation,withRouter} from 'react-router-dom'\nimport Store from './redux'\nimport Game from './Page/Game';\nimport Join from './Page/Join';\nimport Landing from './Page/Landing';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nconst Content = withRouter(connect(({loggedIn,joined})=>({loggedIn,joined}),(dispatch)=>({dispatch}))(({loggedIn,dispatch,history,joined})=>{\n    const {pathname} = useLocation()\n    useEffect(()=>{\n      console.log('pathname',pathname)\n      if(pathname.match(/join/) && !joined){\n        dispatch({type:'LOG_OUT'})\n        const tempJoinId = pathname.split('/')[2]\n        console.log(tempJoinId)\n        dispatch({type:'SET_TEMP_JOIN',tempJoinId})\n        history.push('/join')\n      }\n      else if(loggedIn){\n        console.log('hello')\n        if(!pathname.match(/game/)) history.push('/game')\n      }\n      else history.push('/')\n    },[loggedIn,joined])\n\n    return(\n      <Switch>\n        <Route path='/game' exact component={Game}/>\n        <Route path='/join' exact>\n          <Join changeHistory={history}/>\n        </Route>\n        <Route path='/'exact component={Landing}/>\n      </Switch>\n    )\n}))\n\nfunction App() {\n  return (\n    <Provider store={Store}>\n      <Router>\n        <Content/>\n      </Router>\n    </Provider>\n  );\n}\n\nconsole.log = ()=>{}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","const axios = require('axios')\nconst url = (process.env.NODE_ENV === 'production')?'/':'http://localhost:4000'\n\nconst baseAPI = axios.create({baseURL:url})\nconst join = (id,username)=>baseAPI.post('join',{id,username})\nconst create = (username)=>baseAPI.post('create',{username})\n\nmodule.exports = {join,create}"],"sourceRoot":""}