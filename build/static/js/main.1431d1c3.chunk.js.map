{"version":3,"sources":["title.svg","redux.js","lght/util/util.js","lght/lght.js","webView.js","mobileView.js","view.js","controller.js","Page/Game.js","Page/Join.js","Page/Landing.js","App.js","serviceWorker.js","index.js","polygon.svg","9.svg","api.js"],"names":["module","exports","createStore","require","token","localStorage","getItem","defaultState","id","playerid","parseInt","tempJoinID","joined","loggedIn","Store","state","type","tempJoinId","setItem","removeItem","console","log","mergeDefaultPropertyObject","p","d","o","prop","_","cloneDeep","findDistance2Point","x1","y1","x2","y2","Math","sqrt","pow","findAngle2Point","dx","dy","tan","atan","radToDeg","rad","PI","degToRad","deg","rotatePoint","cx","cy","x","y","calculateRotatePoint","r","angleIndex","indexOf","coeff","cos","sin","findIntersection","s1","s2","x11","y11","x12","y12","x21","y21","x22","y22","round","minX1","min","maxX1","max","minX2","maxX2","slope1","slope2","coeff1","findClosestPoint","s","angle","abs","findAngle3Point","d1","d2","changeByDotNotation","propertyString","object","value","propertyArray","split","objectLink","forEach","e","i","length","Array","isArray","getByDotNotation","lght","inputReference","movementIndex","coeffIndex","defaultAppConfig","initFunctions","animateFunctions","lastFrame","undefined","constantRender","background","pixelDensity","eventListeners","eventListenersFunction","defaultObjectProps","shapes","animations","hoverEvents","animationCount","static","rotation","positionIndicator","display","opacity","mouseUpEvent","mouseDownEvent","mouseMoveEvent","zIndex","alignX","alignDirectionX","alignMarginX","alignY","alignDirectionY","alignMarginY","defaultStorageProps","spacing","direction","model","margin","defaultAdvanceStorageProps","paddingTop","paddingBottom","paddingLeft","paddingRight","backgroundOption","color","kind","borderRadius","defaultShapeOptions","scaleX","scaleY","lineWidth","borderColor","borderWidth","border","borderOnly","shadow","defaultRectOptions","w","h","clip","clipImageLink","clipCanvas","clipSpriteSheetX","clipSpriteSheetY","spriteLengthX","spriteLengthY","defaultArcOptions","arcDegree","defaultTextOptions","textAlign","fontFamily","fontSize","text","fontBackwardCompatibility","defaultImgOptions","spriteLink","drawWidth","drawHeight","loadedFunction","defaultPolyOptions","points","specialPolygon","numberOfSide","radius","defaultLineOptions","apps","gameloop","list","frameTime","loop","time","requestAnimationFrame","app","elem","options","this","canvas","objects","index","push","turnFunctions","prototype","obj","addEventListener","event","func","removeEventListenr","removeEventListener","kill","f","killed","splice","update","translateMouseCoor","pageX","pageY","clientX","document","body","scrollLeft","documentElement","scrollTop","parentElement","style","position","offsetLeft","offsetTop","objectCount","property","parent","translateToRealPixel","num","extraInfo","match","filter","join","name","objectName","posX","posY","collide","pointInShape","xs","ys","findMax","minX","maxX","minY","maxY","width","arr","height","storage","storageShapes","elementFunction","updateToModel","shape","reverse","firstX","content","firstY","updateVisual","advanceStorage","backgroundShape","addShape","totalLength","map","unshift","spriteLinkReference","spriteImageReference","funcLists","sprite","link","image","complete","Image","onload","src","sound","createElement","oncanplaythrough","loaded","updateQueue","volume","setAttribute","appendChild","queue","running","mute","play","setTimeout","duration","audioReference","audioLinkReference","playSound","addToQueue","stopAll","from","getElementsByTagName","pause","muteAll","unmuteAll","component","components","Error","option","addComponent","classes","addClass","class","className","attr","importantAttr","includes","vertex","findVertex","offsetMinX","borderWidthIfBorderIsOn","offsetMaxX","offsetMinY","offsetMaxY","shadowOffsetMinX","blur","shadowOffsetMaxX","shadowOffsetMinY","shadowOffsetMaxY","offsetX","offsetY","sides","findSides","compareSide","intersect","result","maxY1","minY1","maxY2","minY2","side1","side2","hasBorder","rect","rx","ry","nx","absoluteX","ny","absoluteY","arc","minAngle","maxAngle","minRadAngle","maxRadAngle","referenceX","referenceY","vertex1","vertex2","pureCircle","ray1","ray2","side","closest","roundedRectangle","clipImage","imageUrl","poly","polyPoints","radiusCoefficient","line","notIncluded","point","rotatedPoints","distance","angleQuadrant","firstDistance","pointOneInFirstQuadrant","pointSecondInSecondQuadrant","pointThreeInThirdQuadrant","pointFourInFourthQuadrant","font","reference","coefficient","c","context","save","measureText","restore","textSize","img","imageLoaded","attachQuickMovement","velocity","cooldown","cd","key","startCursor","cursor","endCursor","enterCursorEvent","alreadyCursorEvent","hoverEvent","attachEvent","trueEvent","window","mobileCheck","changedTouches","touch","mouseInputInit","handleCoor","pointInObject","LargeLoop","a","pressedEvent","makeDraggable","funcDone","onDrag","draggable","changePosition","funcin","funcout","mouseIn","animate","timeDifference","animateFunctionReference","animation","init","timeUp","newValue","addAnimation","timeout","cancelAnimation","alreadyAnimated","find","findIndex","clearTimeout","arguments","fadeIn","Promise","fadeOut","render","clearCanvas","fillBackground","renderShape","visualInit","backgroundColor","getContext","renderPositions","sort","b","draw","clearRect","fillStyle","fillRect","beginPath","closePath","fill","preloader","maxes","createPreloader","clearPreloader","ox","oy","drawShape","drawPreloader","translate","drawImg","drawShapeKind","stroke","globalAlpha","strokeStyle","scale","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","drawRect","drawArc","drawText","drawPoly","drawLine","drawRoundedRectangle","clipImageLoaded","rotate","spriteWidth","spriteHeight","clipStartX","clipStartY","drawImage","strokeRect","moveTo","lineTo","quadraticCurveTo","br","er","strokeText","fillText","addObject","getObject","addStorage","addAdvanceStorage","removeObject","webView","ref","ref2","ref3","drawSoundIcon","soundIcon","soundOn","soundOff","animatePlayerPlay","addToAnimationQueue","positionReference","playerDeck","animatePlayerDraw","animateLeaderboardDraw","leaderBoard","animateLeaderboardPlay","drawSpecialInfo","specialInfo","playDeck","colors","textColor","activateInfo","tc","toUpperCase","cancelInfo","animateDraw","endX","endY","card","createCard","drawDeck","animatePlay","startX","startY","drawColorChoser","choosingColor","resolveFunction","colorChooser","chooseColor","staticApp","cardSpriteColumn","cardSpriteRow","cardSpriteReference","wild","Draw4","colorReference","otherReference","handHeight","drawable","createDeck","flip","awaitDraw","cancelDraw","createHand","createLeaderboard","drawAnnouncement","configureStartGameMessage","configureUnoMessage","drawEmote","drawAddBot","drawEndGame","initAnimation","endGame","restartText","activateEndGame","tutorial","showTutorial","addBot","startAddBot","cancelAddBot","emoteChooser","emoteText","timeInterval","emote","emoji","clearInterval","animationQueue","animationCallback","animating","updateAnimation","playordraw","px","py","ec","firstFunc","actionFunction","actionalPanel","turnIndicator","updateTurnIndicator","turn","numberOfLoops","cardElement","updateLeaderboard","players","cardsAmount","verifyFunction","onSelect","playerHand","action","slice","offSetY","updateCards","awaitSelection","vf","cancelSelection","deckCardOption","deck","back","flipped","changeToBack","changeClipImage","changeToFront","flipAnimation","announcementQueue","announcmentPerpetual","onAnnouncementPerpetual","onAnnoucementChanged","announcement","annoucementText","fadeOutThenFadeIn","updateAnnouncement","uno","UNO","startGameObject","activated","initiateStartGameMessage","turnOffStartGameMessage","mobileView","cardApp","ratio","devicePixelRatio","clientWidth","screen","innerWidth","clientHeight","innerHeight","createActionPanel","textShapes","timeOut","handWidth","left","getElementById","check","navigator","userAgent","vendor","opera","test","substr","View","io","Controller","canvasref","canvasstatic","userid","CopyLink","LeaveGame","canvasSpecial","view","drawTutorial","socket","connect","query","emit","sortHand","hand","newhand","countable","notCountable","sorted","sortDeck","currentTopCard","red","blue","green","yellow","final","verify","color2","action2","m","oldModel","inGame","onTurn","then","newAnnoucements","feed","newDirectives","directives","username","cards","message","addToAnnoucementQueue","code","user","otherinfo","latestDraw","animateToPlayer","animateToLeaderBoard","oldCard","newCard","JSON","stringify","on","RestartGame","drawEmoteChooser","winner","error","changeAnnoucementPerpetual","Game","dispatch","useRef","url","useEffect","current","str","el","select","execCommand","removeChild","cogoToast","success","copyToClipboard","alignItems","overflowX","overflowY","top","bottom","Join","changeHistory","useState","loading","setLoading","joinGame","data","maxWidth","Polygon","boxShadow","initialValues","onSubmit","handleSubmit","handleChange","handleBlur","onChange","onBlur","css","create","Checkbox","props","field","form","checked","nextValue","setFieldValue","concat","displayname","Landing","withRouter","history","createGame","houseRule","values","Content","pathname","location","path","exact","App","store","Boolean","hostname","ReactDOM","StrictMode","serviceWorker","ready","registration","unregister","catch","baseAPI","baseURL","post"],"mappings":"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","file":"static/js/main.1431d1c3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/title.ad076024.svg\";","const {createStore} = require('redux')\n\nconst token = localStorage.getItem('token')\nconst id = localStorage.getItem('id')\nconst playerid = parseInt(localStorage.getItem('playerid'))\nconst defaultState = {\n    token,id,playerid,tempJoinID:null,joined:false,\n    loggedIn:!!token,\n}\n\nconst reducer = (state=defaultState,{id,playerid,token,type,tempJoinId})=>{\n    switch(type){\n        case 'LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            return {...state,id,playerid,token,loggedIn:true}\n        case 'JOIN_LOG_IN':\n            localStorage.setItem('token',token)\n            localStorage.setItem('id',id)\n            localStorage.setItem('playerid',playerid)\n            return {...state,id,playerid,token,loggedIn:true,joined:true}\n        case 'LOG_OUT':\n            localStorage.removeItem('token')\n            localStorage.removeItem('id')\n            localStorage.removeItem('playerid')\n            return {...state,id:null,token:null,playerid:null,loggedIn:false}\n            case 'LOG_OUT_WITH_TEMP_JOIN':\n                localStorage.removeItem('token')\n                localStorage.removeItem('id')\n                localStorage.removeItem('playerid')\n                return {...state,id:null,token:null,playerid:null,loggedIn:false,tempJoinId:state.tempJoinId||tempJoinId}\n        case 'SET_TEMP_JOIN':\n            console.log(tempJoinId)\n            return {...state,tempJoinId}\n        case 'JOINED':\n            return {...state,joined:true}\n        default:\n            return{...state}\n    }\n}\n\nconst Store = createStore(reducer)\n\nexport default Store","import _ from 'lodash'\n\nconst random = (high,low) => {return Math.round(Math.random()*(high-low+1) + low);}\n\t\nconst mergeDefaultPropertyObject = (p,d,o)=>{\n\tfor(var prop in d){\n\t\tif(typeof p == 'object'){\n\t\t\tif(typeof p[prop] === 'function') o[prop] = p[prop]\n\t\t\telse if(typeof p[prop] != 'undefined') o[prop] = _.cloneDeep(p[prop]);\n\t\t\telse o[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t\telse{\n\t\t\to[prop] = _.cloneDeep(d[prop]);\n\t\t}\n\t}\n}\n\n//<---------------------GEOMETRIC FUNCTION-------------------->\n\nconst findQuadrant = (angle) => {\n\tif(angle < 90 && angle > 0) return 1;\n\tif(angle > 90 && angle < 180) return 2;\n\tif(angle > 180 && angle < 270) return 3;\n\tif(angle > 270 && angle < 360) return 4;\n}\n\nconst findDistance2Point = (x1,y1,x2,y2)=>Math.sqrt(Math.pow((x1-x2),2) + Math.pow((y1-y2),2))\n\n\nconst findAngle2Point = function(x1,y1,x2,y2){\n\t//CHECK SPECIAL CASES\n\tif(x1===x2&&y1===y2) return 0;\n\tif(x1===x2){\n\t\tif(y1 < y2) return 270;\n\t\tif(y1 > y2) return 90;\n\t} \n\tif(y1===y2){\n\t\tif(x1<x2) return 0;\n\t\tif(x2<x1) return 180;\n\t}\n\n\t//FIND QUADRANT\n\tvar dx = x2-x1; var dy = y2-y1;\n\tvar tan = Math.atan((-dy)/dx);\n\n\tif(x1<x2&&y1>y2) return radToDeg(tan);//QUADRANT 1\n\tif(x1>x2&&y1>y2) return\t180 + radToDeg(tan); //QUADRANT 2\n\tif(x1>x2&&y1<y2) return 180 + radToDeg(tan);//QUADRANT 3\n\tif(x1<x2&&y1<y2) return 360 + radToDeg(tan);//QUADRANT 4\n}\n\nconst radToDeg = (rad) => (rad*180)/Math.PI;\n\nconst degToRad = (deg) => (deg*Math.PI)/180;\n\nconst rotatePoint = (cx,cy,x,y,deg) => (deg===0||deg===360)? [x,y]: calculateRotatePoint(cx,cy,findAngle2Point(cx,cy,x,y)+deg,findDistance2Point(cx,cy,x,y));\n\nconst calculateRotatePoint = function(cx,cy,r,d){\n\tconst rad = degToRad(r);\n\n\t//IF IT'S IN SPECIAL CASE\n\tconst angleIndex = [0,90,180,270,360];\n\tconst coeffIndex = [[1,0],[0,1],[-1,0],[0,-1],[1,0]];\n\tif(angleIndex.indexOf(r) !== -1){\n\t\tconst coeff = coeffIndex[angleIndex.indexOf(r)];\n\t\treturn [cx+coeff[0]*d,cy-coeff[1]*d];\n\t}\n\treturn [cx + Math.cos(rad)*d, cy - Math.sin(rad)*d];\n}\n\n\n//<----------------------SEGMENT INTERSECTION, USED FOR OBJECT COLLISION------------------------------>\nlet findIntersection = function(s1,s2){\n\t//FIND CONSTRAINS FOR USE BEFORE INTERSECTION FUNCTION\n\tlet [x11,y11,x12,y12] = s1\n\tlet [x21,y21,x22,y22] = s2\n\tif(Math.round(x11) === Math.round(x12) || Math.round(x21) === Math.round(x22)){\n\t\t[x11,y11] = rotatePoint(0,0,x11,y11,30);\n\t\t[x12,y12] = rotatePoint(0,0,x12,y12,30);\n\t\t[x21,y21] = rotatePoint(0,0,x21,y21,30);\n\t\t[x22,y22] = rotatePoint(0,0,x22,y22,30);\n\t}\n\n\n\tconst minX1 = Math.min(x11,x12); const maxX1 = Math.max(x11,x12);\n\tconst minX2 = Math.min(x21,x22); const maxX2 = Math.max(x21,x22);\n\n\tconst slope1 =(y11-y12)/(x11-x12); \n\tconst slope2 =(y21-y22)/(x21-x22);\n\tconst coeff1 = -(x11*slope1) + y11;\n\tconst coeff2 = -(x21*slope2) + y21;\n\n\tif(slope1===slope2) return false;\n\tconst x = (coeff2 - coeff1)/(slope1 - slope2);\n\tconst y = slope1*x + coeff1;\n\tif(((x>minX1)&&(x<maxX1))&&((x>minX2)&&(x<maxX2))) return [x,y];\n\treturn false;\n}\n\n\n//<--------------------------OTHER SEGMENT FUNCTION------------------------------>\nconst findAngle3Point = (cx,cy,x1,y1,x2,y2) => Math.abs(findAngle2Point(cx,cy,x2,y2) - findAngle2Point(cx,cy,x1,y1))\n\n//FIND THE 'HEIGHT' OF A POINT TO A SEGMENT\nconst findClosestPoint = function(x,y,s){\n\tconst [x1,y1,x2,y2] = s\n\n\tlet angle = findAngle3Point(x1,y1,x,y,x2,y2);\n\tconst d = findDistance2Point(x,y,x1,y1);\n\n\tconst d1 = Math.abs(d*Math.cos(degToRad(angle)));\n\tconst d2 = Math.sqrt(Math.pow(d,2) - Math.pow(d1,2));\n\n\tif(d1 > findDistance2Point(x1,y1,x2,y2)) return false;\n\n\tangle = degToRad(findAngle2Point(x1,y1,x2,y2));\n\tconst xh = x1 + Math.cos(angle) * d1; \n\tconst yh = y1 - Math.sin(angle) * d1;\n\treturn [xh,yh,d2];\n}\n\nconst changeByDotNotation = (propertyString,object,value) => {\n\tconst propertyArray = propertyString.split(\".\")\n\tlet objectLink = object\n\tpropertyArray.forEach((e,i)=>{\n\t\tif (i === propertyArray.length - 1){\n\t\t\tif(Array.isArray(objectLink)) objectLink[parseInt(e)] = value\n\t\t\telse objectLink[e] = value\n\t\t}\n\t\telse{\n\t\t\tif(Array.isArray(objectLink)) objectLink = objectLink[parseInt(e)]\n\t\t\telse objectLink = objectLink[e]\n\t\t}\n\t})\n}\n\nconst getByDotNotation = (propertyString,object)=>{\n\tconst propertyArray = propertyString.split(\".\")\n\tlet value = object\n\tpropertyArray.forEach(e=>{\n\t\tif(Array.isArray(value)) value = value[parseInt(e)]\n\t\telse value=object[e]\n\t})\n\treturn value\n}\n\nexport {findClosestPoint,findAngle3Point,findAngle2Point,findIntersection,calculateRotatePoint,random,\nmergeDefaultPropertyObject,findQuadrant,findDistance2Point,radToDeg,degToRad,rotatePoint,changeByDotNotation,getByDotNotation}","/* eslint-disable no-fallthrough */\n/* eslint-disable no-unused-vars */\n//LIGHT LIBRARY IS DEVELOPED BY LONG TRAN\n//COPYRIGHT 2020, ALL RIGHTS RESERVED\n\nimport {getByDotNotation, changeByDotNotation , mergeDefaultPropertyObject, findDistance2Point, findIntersection, rotatePoint, degToRad, findAngle2Point ,findClosestPoint, calculateRotatePoint, radToDeg} from './util/util'\n\nlet lght = {};\n\n//Config\nlght.inputReference = {};\nlght.inputReference.movementIndex = \n    ['w','a','s','d','ArrowUp','ArrowLeft','ArrowDown','ArrowRight'];\n\nlght.inputReference.coeffIndex = \n    [[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]];\n\nlght.defaultAppConfig = {\n    initFunctions:[\"visualInit\",'mouseInputInit'],\n    animateFunctions:[\"animate\",\"update\",\"render\"],\n    lastFrame:undefined,\n    constantRender:true,\n    background:\"black\",\n    pixelDensity:1,\n    eventListeners:[],\n    eventListenersFunction:[]\n}\n\nlght.defaultObjectProps = {\n    shapes:[],\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    initFunctions:[\"createPreloader\"],\n    static:true,\n    x:0,y:0,\n    rotation:0, \n    positionIndicator:false,\n    display:true,opacity:1,\n    mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],\n    zIndex:0,\n    alignX:false,\n    alignDirectionX:'right',\n    alignMarginX:5,\n    alignY:false,\n    alignDirectionY:'top',\n    alignMarginY:5\n}\n\nlght.defaultStorageProps = {\n    spacing:0,\n    direction:'row',\n    model:[],\n    margin:0\n}\n\nlght.defaultAdvanceStorageProps = {\n    paddingTop:10,\n    paddingBottom:10,\n    paddingLeft:10,\n    paddingRight:10,\n    backgroundOption:{color:'white',kind:'roundedRectangle',borderRadius:20}\n}\n\nlght.defaultShapeOptions = {\n    kind:\"rect\",\n    animations:[],\n    hoverEvents:[],\n    animationCount:0,\n    x:0,y:0,rotation:0,scaleX:1,scaleY:1,\n    color:\"black\",display:true,\n    lineWidth:1, opacity:1,\n    borderColor:'yellow',\n    borderWidth:10,\n    border:false, borderOnly:false,\n    shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]\n}\n\nlght.defaultRectOptions = {\n    w:0,h:0,clip:false,\n    clipImageLink:null,clipCanvas:null,\n    clipSpriteSheetX:null,clipSpriteSheetY:null,\n    spriteLengthX:null,spriteLengthY:null\n}\n\nlght.defaultArcOptions = {\n    rad:0, arcDegree:360,\n}\n\nlght.defaultTextOptions = {\n    textAlign:'center',\n    fontFamily:'Arial Bold',\n    fontSize:10,\n    text:'Hello World',\n    fontBackwardCompatibility:undefined\n}\n\nlght.defaultImgOptions = {\n    spriteLink:null,\n    drawWidth:null,drawHeight:null,\n    loadedFunction:undefined\n}\n\nlght.defaultPolyOptions = {\n    points:[],\n    specialPolygon:false,\n    numberOfSide:0,\n    radius:10,\n    clip:false,\n    clipImageLink:null\n}\n\nlght.defaultLineOptions = {\n    points:[]\n}\n\n//Main\nlght.apps = [];\n\nlght.gameloop = {\n    list:[],\n    frameTime:undefined,\n    lastFrame:undefined\n};\n\nlght.gameloop.loop = (time)=>{\n    requestAnimationFrame(lght.gameloop.loop);\n\n    for(var i = 0;i<lght.gameloop.list.length;i++){\n        lght.gameloop.list[i](lght.apps[i]);\n    }\n    \n    if(time!==undefined){\n        lght.lastFrame = lght.frameTime;\n        lght.frameTime = time;\n    }\n}\n\n\n\nlght.gameloop.loop();\n\nlght.app = function(elem,options) {\n\n    this.options = {};\n    mergeDefaultPropertyObject(options,lght.defaultAppConfig,this.options)        \n    this.canvas = elem;\n    this.eventListeners = []\n    this.eventListenersFunction = []\n    this.options.initFunctions.forEach((e)=>this[e]())\n    \n    this.objects = []\n    this.index = lght.gameloop.list.length\n    lght.gameloop.list.push((this.options.constantRender)?this.turnFunctions:()=>{})\n    lght.apps.push(this);\n}\n\nlght.app.prototype.turnFunctions = (obj)=>{\n    obj.options.animateFunctions.forEach((e)=>obj[e]())\n}\n\nlght.app.prototype.addEventListener =function(event,func){\n    this.eventListeners.push(event)\n    this.eventListenersFunction.push(func)\n    this.canvas.addEventListener(event,func)\n}\n\nlght.app.prototype.removeEventListenr = function(){\n    this.eventListeners.forEach((e,i)=>this.canvas.removeEventListener(e,this.eventListenersFunction[i]))\n}\n\nlght.app.prototype.kill = function(){\n    this.objects.forEach(e=>{\n        e.shapes.forEach(f=>f.kill())\n        e.kill()\n    })\n    this.killed = true\n    lght.gameloop.list.splice(this.index,1)\n    lght.apps.splice(this.index,1)\n    this.removeEventListenr()\n}\n\nlght.app.prototype.update = function(){\n    this.objects.forEach(e => {\n        if(typeof e.update === 'function') e.update(e)\n    });\n}\n\nlght.app.prototype.translateMouseCoor = function(e){\n\tvar x;\n    var y;\n\tif (e.pageX || e.pageY) { \n\t\tx = e.pageX;\n\t\ty = e.pageY;\n\t}\n\telse { \n\t\tx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft\n        y=e.clientX + document.body.scrollTop + document.documentElement.scrollTop\n    } \n    if(this.canvas.parentElement.scrollLeft && this.canvas.style.position !== 'fixed') x+=this.canvas.parentElement.scrollLeft\n    if(this.canvas.parentElement.scrollTop && this.canvas.style.position !== 'fixed') x+=this.canvas.parentElement.scrollTop\n\tx -= this.canvas.offsetLeft;\n\ty -= this.canvas.offsetTop;\n\treturn [x*this.pixelDensity,y*this.pixelDensity];\n}\n\n//Object\n\n//TOTAL OBJECT COUNT, USED TO PRODUCE ID\nlght.objectCount = 0;\n\nlght.object = class {\n    constructor(property,parent){\n        lght.objectCount++\n        this.id = lght.objectCount;\n        this.parent = parent;\n        this.parent.objects.push(this)\n        mergeDefaultPropertyObject\n        (property,lght.defaultObjectProps,this);    \n        this.initFunctions.forEach((e)=>this[e]())        \n        this.name = (property.objectName)?property.objectName:`Object ${this.id}`\n    }\n\n    translateToRealPixel = (num,extraInfo)=>{\n        if(num.match(/%/)) return (parseInt(num.split('').filter(e=>e!=='%').join(''))/100) * extraInfo\n        return parseInt(num)\n    }\n\n    changePosition(x,y){\n        if(x){\n            if(this.alignX){\n                let coeff = (this.alignDirectionX === 'left' || this.alignDirectionX === 'center')?1:-1\n                this.alignMarginX = x - coeff*this.posX\n            }\n            else this.x = x\n        }\n        if(y){\n            if(this.alignY){\n                let coeff = (this.alignDirectionY==='top' || this.alignDirectionY==='center')?1:-1\n                this.alignMarginY = y - coeff*this.posY\n            }\n            else this.y = y\n        }\n    }\n\n    get posX(){\n        if(this.alignX){\n            let base\n            if(this.alignDirectionX === 'left') base = 0\n            else if(this.alignDirectionX === 'right') base = this.parent.canvas.width\n            else base = this.parent.canvas.width/2\n            const coeff = (this.alignDirectionX === 'left' || this.alignDirectionX === 'center')?1:-1\n            return base + coeff*(this.alignMarginX)\n        }\n        if(typeof this.x === 'number') return this.x\n        const arr = this.x.split(' ')\n        if(arr.length === 1) return this.translateToRealPixel(arr[0],this.parent.canvas.width)\n        else{\n            let i = 0\n            while(i<arr.length){\n                if(arr[i] === '+' || arr[i] === '-'){\n                    const coeff = (arr[i] === '+') ? 1 : -1\n                    arr[i] = this.translateToRealPixel(arr.splice(i+1,1),this.parent.canvas.width) + coeff*this.translateToRealPixel(arr.splice(i-1,1),this.parent.canvas.width)\n                }\n                else i++\n            }\n        }\n        return arr[0]\n    }\n    \n    get posY(){\n        if(this.alignY){\n            let base\n            if(this.alignDirectionY === 'top') base = 0\n            else if(this.alignDirectionY==='bottom') base = this.parent.canvas.height\n            else base = this.parent.canvas.height/2\n            const coeff = (this.alignDirectionY==='top' || this.alignDirectionY==='center')?1:-1\n            return base + coeff*( this.alignMarginY)\n        }\n        if(typeof this.y === 'number') return this.y\n        const arr = this.y.split(' ')\n        if(arr.length === 1) return this.translateToRealPixel(arr[0],this.parent.canvas.height)\n        else{\n            let i = 0\n            while(i<arr.length){\n                if(arr[i] === '+' || arr[i] === '-'){\n                    const coeff = (arr[i] === '+') ? 1 : -1\n                    arr[i] = this.translateToRealPixel(arr.splice(i+1,1),this.parent.canvas.height) + coeff*this.translateToRealPixel(arr.splice(i-1,1),this.parent.canvas.height)\n                }\n                else i++\n            }\n        }\n        return arr[0]\n    }\n\n    kill(){\n        this.parent.objects.splice(this.parent.objects.indexOf(this),1)\n    }\n\n    collide(obj){\n        for(let s1 of this.shapes){\n            for (let s2 of obj.shapes){\n                if(s1.collide(s2)) return true\n            }\n        }\n\n        return false\n    }\n\n    pointInObject(x,y){\n        for(let s1 of this.shapes){\n           if(s1.pointInShape(x,y)) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let xs = []\n        let ys = []\n        this.shapes.forEach(s=>{\n            let [minX,maxX,minY,maxY] = s.findMax()\n            xs = [...xs,minX,maxX]\n            ys = [...ys,minY,maxY]\n        })\n        return [Math.min(...xs),Math.max(...xs),Math.min(...ys),Math.max(...ys)]\n    }\n\n    findThePositionThatIsRelativeToThisObjectFromAbsolutePosition(x,y){\n        return [x-this.x,y-this.y]\n    }\n\n    get w(){\n        return this.findMax()[1] - this.findMax()[0]\n    }\n    get h(){\n        return this.findMax()[3] - this.findMax(2)\n    }\n}\n\nlght.storage = class extends lght.object{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultStorageProps,this)\n        this.storageShapes = []\n        this.model = property.model || []\n        this.elementFunction = property.elementFunction || null\n        this.updateToModel()\n    }\n    get totalLength(){\n        if(!this.model.length) return 0\n        if(!this.elementFunction) return 0\n        let shape\n        switch(this.direction){\n            case 'row-reverse':\n            case 'row':\n                shape = this.elementFunction(this.model[0],0)\n                const w = shape.width\n                shape.kill()\n                return w*this.model.length + this.spacing*(this.model.length-1)\n            case 'column-reverse':\n            case 'column':\n                shape = this.elementFunction(this.model[0],0)\n                const h = shape.height\n                shape.kill()\n                return h*this.model.length + this.spacing*(this.model.length-1)\n            default:\n                return 0\n                break;\n        }\n    }\n    updateToModel(){\n        let model =[...this.model]\n        this.storageShapes.forEach(e=>{e.kill();})\n        this.storageShapes = []\n        if(!model.length) return\n        if(!this.elementFunction) return\n        let shape\n        let totalLength\n        switch(this.direction){\n            case 'row-reverse':\n                model.reverse()\n            case 'row':\n                shape = this.elementFunction(model[0],0)\n                const w = shape.width\n                shape.kill()\n                totalLength = w*model.length + this.spacing*(model.length-1)\n                const firstX = -totalLength/2 + 0.5*w + this.margin\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.x = firstX + i*w + i*this.spacing\n                })\n                break;\n            case 'column-reverse':\n                model.reverse()\n            case 'column':\n                shape = this.elementFunction(model[0],0)\n                const h = shape.height\n                shape.kill()\n                totalLength = h*model.length + this.spacing*(model.length-1)\n                const firstY = -totalLength/2 + 0.5*h - this.margin\n                model.forEach((content,i)=>{\n                    const shape = this.elementFunction(content,i)\n                    this.storageShapes.push(shape)\n                    shape.y = firstY +( i*h) + (i*this.spacing)\n                })\n                break\n            default:\n                break;\n        }\n        this.updateVisual()\n\n    }\n}\n\nlght.advanceStorage = class extends lght.storage{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultAdvanceStorageProps,this)\n        this.updateToModel()\n    }\n\n    updateToModel(){\n        super.updateToModel()\n        this.backgroundShape = this.addShape(this.backgroundOption)\n        let h,w\n        if(this.direction.match(/column/)){\n            h = this.totalLength\n            w = Math.max(...this.storageShapes.map(e=>e.w))\n        }\n        else{\n            w = this.totalLength\n            h = Math.max(...this.storageShapes.map(e=>e.h))\n        }\n        this.backgroundShape.h = h + this.paddingBottom + this.paddingTop\n        this.backgroundShape.w = w + this.paddingLeft + this.paddingRight\n        this.backgroundShape.x += this.paddingRight - this.paddingLeft\n        this.backgroundShape.y += this.paddingTop - this.paddingBottom\n        this.shapes.splice(this.parent.shapes.length-1,1)\n        this.shapes.unshift(this.backgroundShape)\n        this.updateVisual()\n    }\n}\n\nlght.spriteLinkReference = []\nlght.spriteImageReference = []\nlght.funcLists = []\n\nlght.sprite = (link,func)=> {\n    const index = lght.spriteLinkReference.indexOf(link)\n    if(index !== -1){\n        const image = lght.spriteImageReference[index]\n        lght.funcLists[index].push(func)\n        if(image.complete) requestAnimationFrame(func)\n        return image\n    }\n    else{\n        const image = new Image()\n        const id = lght.spriteImageReference.length\n        image.onload = ()=>{\n            lght.funcLists[id].forEach(e=>e())\n        }\n        lght.funcLists[id] = []\n        lght.funcLists[id].push(func)\n        image.src = link\n        lght.spriteLinkReference.push(link)\n        lght.spriteImageReference.push(image)\n        return image\n    }\n}\n\nlght.sound = class{\n    constructor(link,loop){\n        this.elem = document.createElement('audio')\n        this.elem.oncanplaythrough = ()=>{\n            this.loaded = true\n            this.updateQueue()\n        }\n        this.elem.loop = loop\n        this.elem.volume = 0.2\n        this.elem.src = link\n        this.elem.setAttribute('preload','auto')\n        this.elem.setAttribute('controls','none')\n        this.elem.style.display = 'none'\n        document.body.appendChild(this.elem)\n        this.queue = 1\n        this.running = false\n        this.loaded = false\n    }\n    updateQueue(){\n        if(!this.running && this.queue && this.loaded && !lght.mute){\n            this.running = true\n            this.elem.play()\n            setTimeout(()=>{\n                this.running = false\n                this.updateQueue()\n            },this.elem.duration + 300)\n            this.queue--\n        }\n    }\n    addToQueue(){\n        this.queue++\n        this.updateQueue()\n    }\n}\n\nlght.audioReference = []\nlght.audioLinkReference = []\nlght.playSound = (src,loop)=>{\n    if(lght.audioLinkReference.indexOf(src)<0){\n        const sound = new lght.sound(src,loop)\n        lght.audioReference.push(sound)\n        lght.audioLinkReference.push(sound)\n    }\n    else lght.audioReference[lght.audioLinkReference.indexOf(src)].addToQueue()\n}\nlght.stopAll = ()=>{\n    Array.from(document.getElementsByTagName('audio')).forEach(e=>{\n        e.pause()\n    })\n}\nlght.muteAll = ()=>{\n    lght.mute = true\n    lght.stopAll()\n    Array.from(document.getElementsByTagName('audio')).forEach(e=>e.mute=true)\n}\nlght.unmuteAll = ()=>{\n    lght.mute = false\n    lght.stopAll()\n    Array.from(document.getElementsByTagName('audio')).forEach(e=>e.mute=false)\n    lght.audioReference.forEach(e=>{if(e.elem.loop) e.addToQueue()})\n}\n\nlght.component = class {\n    constructor(object){\n        if(!lght.components) lght.components = {}\n        if(!object.name) throw Error(\"Component must have name\")\n        lght.components[object.name] = object\n    }\n    static addComponent(name,property,object){\n        let option = {...lght.components[name]}\n        for(let prop in property)(option[prop] = property[prop])\n        return new lght[option.kind](option,object)\n    }\n}\n\nlght.addComponent = (property) => new lght.component(property)\n\nlght.classes = {}\nlght.addClass = (name,options)=>lght.classes[name] = options\n\nlght.shape = class {\n    constructor (property,parent) {\n        if(property.class) for(let className of property.class.split(' ')) for(let attr in lght.classes[className] || {}){\n            if(property.importantAttr) if(property.importantAttr.split(' ').includes(attr)) continue\n            property[attr] = lght.classes[className][attr]\n        }\n        this.kind = property.kind\n        this.parent = parent;\n        this.parent.shapes.push(this);\n        mergeDefaultPropertyObject\n        (property,lght.defaultShapeOptions,this);\n    }\n\n    kill (){\n        const index = this.parent.shapes.indexOf(this)\n        if(index<0) return\n        this.parent.shapes.splice(index,1);\n        this.parent.updateVisual()\n    }\n\n    get absoluteX(){\n        return this.x + this.parent.posX\n    }\n\n    get absoluteY(){\n        return this.y + this.parent.posY\n    }\n\n    get hasBorder(){\n        return this.border||this.borderOnly\n    }\n\n    get width(){\n        return (((this.hasBorder)?(this.w + this.borderWidth):this.w))*this.scaleX\n    }\n\n    get height(){\n        return ((this.hasBorder)?this.h + this.borderWidth:this.h)*this.scaleY\n    }\n\n    get outOfBound(){\n        let [minX,maxX,minY,maxY] = this.findMax();\n        let {width,height} = this.parent.parent.canvas;\n        return (minX > width || maxX < 0 || minY > height || maxY < 0) \n    }\n\n    findVertex(){\n        return []\n    }\n\n    findMax(){\n        const vertex = this.findVertex()\n        const xs = []\n        const ys = []\n\n        vertex.forEach(([x,y])=>{\n            xs.push(x); ys.push(y)\n        })\n\n        let offsetMinX = - this.borderWidthIfBorderIsOn \n        let offsetMaxX = this.borderWidthIfBorderIsOn \n        let offsetMinY = - this.borderWidthIfBorderIsOn \n        let offsetMaxY = this.borderWidthIfBorderIsOn \n\n        if(this.shadow){\n            let shadowOffsetMinX = -this.shadow.blur -2\n            let shadowOffsetMaxX = this.shadow.blur + 2\n            let shadowOffsetMinY = -this.shadow.blur -2\n            let shadowOffsetMaxY = this.shadow.blur +2\n            if(this.shadow.offsetX){\n                shadowOffsetMinX += this.shadow.offsetX\n                shadowOffsetMaxX += this.shadow.offsetX\n            }\n            if(this.shadow.offsetY){\n                shadowOffsetMinY += this.shadow.offsetY\n                shadowOffsetMaxY += this.shadow.offsetY\n            }\n            if(shadowOffsetMinX<0) offsetMinX += shadowOffsetMinX\n            if(shadowOffsetMaxX>0) offsetMaxX += shadowOffsetMaxX\n            if(shadowOffsetMinY<0) offsetMinY += shadowOffsetMinY\n            if(shadowOffsetMaxY>0) offsetMaxY += shadowOffsetMaxY\n        }\n\n        return [\n            Math.min(...xs) + offsetMinX,\n            Math.max(...xs) + offsetMaxX,\n            Math.min(...ys) + offsetMinY,\n            Math.max(...ys) + offsetMaxY\n        ]\n    }\n\n    get borderWidthIfBorderIsOn(){\n        if(this.border||this.borderOnly) return this.borderWidth\n        return 0\n    }\n\n    pointInShape(x,y){\n        let sides = this.findSides()\n        const [minX,maxX,minY,maxY] = this.findMax()\n        let distance = findDistance2Point(x,y,maxX,maxY)\n        let compareSide = [x,y,x+distance,y]\n        let intersect = 0\n        if(x>maxX||x<minX||y>maxY||y<minY) return false\n        sides.forEach(e=>{\n            if(findIntersection(e,compareSide)) intersect++\n        })\n        return !(intersect%2 === 0)\n    }\n\n    findSides(){\n        let vertex = this.findVertex()\n        let result = []\n        for(let i = 0;i<vertex.length;i++){\n            result.push([...vertex[i],...((vertex[i+1])?vertex[i+1]:vertex[0])])\n        }\n        return result\n    }\n\n    collide(shape){\n        if(shape.kind==='arc') return shape.collide(this)\n        let [maxX1,minX1,maxY1,minY1] = this.findMax()\n        let [maxX2,minX2,maxY2,minY2] = shape.findMax()\n        if (((minX1 < minX2) && (maxX1 > maxX2) && (minY1<minY2) && (maxY1>maxY2)) || ((minX2 < minX1) && (maxX2 > maxX1) && (minY2<minY1) && (maxY2>maxY1))) return true\n\n        let side1 = this.findSides()\n        let side2 = shape.findSides()\n\n        for (let s1 of side1){\n            for (let s2 of side2){\n                if(findIntersection(s1,s2)) return true\n            }\n        }\n        return false\n    }\n}\n\nlght.rect = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultRectOptions,this)\n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.arc = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultArcOptions,this)\n    }\n\n    get radius(){\n        return (this.hasBorder)?this.rad + this.borderWidth : this.rad\n    }\n\n    get minAngle(){\n        return this.rotation\n    }\n\n    get maxAngle(){\n        return this.rotation + this.arcDegree\n    }\n\n    get minRadAngle(){\n        return degToRad(this.minAngle)\n    }\n\n    get maxRadAngle(){\n        return degToRad(this.maxAngle)\n    }\n\n    get pureCircle(){\n        return this.arcDegree===360\n    }\n\n    pointInShape(x,y){\n        var angle = findAngle2Point(this.absoluteX,this.absoluteY,x,y)\n        if (angle>this.minAngle && angle<this.maxAngle){\n            if(findDistance2Point(this.absoluteX,this.absoluteY,x,y)<=this.radius) return true\n        }\n        return false\n    }\n\n    findMax(){\n        let result = [this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius]\n        let xs = [this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius]\n        let ys = [this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        if(!this.pointInShape(result[0],this.absoluteY)) result[0] = Math.min(...xs) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(result[1],this.absoluteY)) result[1] = Math.max(...xs) + this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[2])) result[2] = Math.min(...ys) - this.borderWidthIfBorderIsOn/2;\n        if(!this.pointInShape(this.absoluteX,result[3])) result[3] = Math.max(...ys) + this.borderWidthIfBorderIsOn/2;\n        return result\n    }\n\n    findVertex(){\n        let [minX,maxX,minY,maxY] = this.findMax()\n        let referenceX = [this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX]\n        let referenceY = [this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY]\n\n        return [\n            [minX,referenceY[referenceX.indexOf(minX)]],\n            [maxX,referenceY[referenceX.indexOf(maxX)]],\n            [referenceX[referenceY.indexOf(minY)],minY],\n            [referenceX[referenceY.indexOf(maxY)],maxY],\n        ]\n    }\n\n    fidnSides(){\n        if(this.arcDegree === 360) return false\n        return [\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],\n            [this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]\n        ]\n    }\n\n    collide(shape){\n        let vertex1 = this.findVertex()\n        let vertex2 = shape.findVertex()\n\n        for(let [x,y] of vertex1){\n            if(shape.pointInShape(x,y)) return true\n        }\n        for(let [x,y] of vertex2){\n            if(this.pointInShape(x,y)) return true\n        }\n        if(shape.kind==='arc'){                \n            //when checking for intersection between 2 arcs, there are 2 cases\n            //Case 1: they are both circles. In this case the distance between the 2 center have to be smaller or equal to\n            //sum of radius for them to intersect\n\n            if(this.pureCircle && shape.pureCircle){\n                return findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) <= this.radius + shape.radius\n            }\n\n            //Case 2: either of them are arcs\n            //In these cases, there are 2 scenarios\n            //Scenario 1: one of the vertexes will be inside the circle, this is easy to check\n            //Scenario 2: none of the vertex is inside the circle. There is only one possible explanation for this. In this case, check if \n            //the \"ray\" that connect the 2 center is inside both arcs, then check that the length of the ray is less than the length of both radius\n\n            if(findDistance2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY) > this.radius + shape.radius) return false\n\n            let ray1 = findAngle2Point(this.absoluteX,this.absoluteY,shape.absoluteX,shape.absoluteY)\n            let ray2 = findAngle2Point(shape.absoluteX,shape.absoluteY,this.absoluteX,this.absoluteY)\n            return ((ray1<this.maxAngle&&ray1>this.minAngle)&&(ray2<shape.maxAngle&&ray2>shape.minAngle))\n        }\n        else{\n            let side = shape.findSides()\n\n            for(let s of side){\n                let closest = findClosestPoint(this.absoluteX,this.absoluteY,s)\n                if(closest){\n                    if (this.pointInShape(closest[0],closest[1])) return true\n                }\n            }\n            return false\n        }\n    }\n}\n\nlght.roundedRectangle = class extends lght.rect{\n    constructor(property,parent){\n        super(property,parent)\n        this.borderRadius = (property.borderRadius) || 0\n        if(this.clip){\n            if(property.clipCanvas){\n                this.clipImage = property.clipCanvas;\n                this.clipCanvas=true\n            }\n            else{\n                this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                    this.parent.updateVisual()\n                })\n            }\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        if(this.clipCanvas) return true\n        return this.clipImage.complete\n    }\n\n    changeClipImage(imageUrl){\n        this.clipImage = lght.sprite(imageUrl,()=>{\n            this.parent.updateVisual()\n        })\n    }\n}\n\nlght.poly = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultPolyOptions,this)\n        if(this.clip){\n            this.clipImage = lght.sprite(this.clipImageLink,()=>{\n                this.parent.updateVisual()\n            })\n        }\n    }\n\n    get clipImageLoaded(){\n        if(!this.clip) return false\n        return this.clipImage.complete\n    }\n\n    get polyPoints(){\n        if(!this.specialPolygon) return this.points\n        const radiusCoefficient = 360/this.numberOfSide\n        const result = []\n        for(let i = 0;i<this.numberOfSide;i++){\n            result.push(calculateRotatePoint(0,0,radiusCoefficient*i,this.radius))\n        }\n        return result\n    }  \n\n    get width(){\n        return this.findMax()[1] - this.findMax()[0]\n    }\n\n    get height(){\n        return this.findMax()[3] - this.findMax()[2]\n    }\n\n    get sideLength(){\n        if(!this.specialPolygon) return null\n        const radiusCoefficient = degToRad(360/this.numberOfSide)\n        return Math.sqrt(2*Math.pow(this.radius,2) - 2*Math.pow(this.radius,2)*Math.cos(radiusCoefficient))\n    }\n\n    findVertex(){\n        return this.polyPoints.map(([x,y])=>rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation))\n    }\n}\n\nlght.line = class extends lght.shape{\n    constructor(property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultLineOptions,this)\n    }\n\n    get rotatedPoints(){\n        return this.points.map(([x,y])=>(rotatePoint(this.absoluteX,this.absoluteY,x+this.absoluteX,y+this.absoluteY,this.rotation)))\n    }\n\n    findVertex(){\n        const result = []\n        const notIncluded = ([x,y]) => {\n            for (const position of result) {\n                const [x2,y2] = position\n                if(~~ (x + 0.5)===~~ (x2+ 0.5) && ~~ (y + 0.5)===~~ (y2+0.5)) return false\n            }\n            return true\n        }\n        const point = [...this.rotatedPoints]\n        point.forEach(([x1,y1],index)=>{\n            if (index===point.length-1) return\n            const [x2,y2] = this.rotatedPoints[index+1]\n            const distance = findDistance2Point(x1,y1,x2,y2)\n            const tan = Math.atan((this.lineWidth/2)/distance)\n            const angle = findAngle2Point(x1,y1,x2,y2)\n            const angleQuadrant = radToDeg(tan)+angle\n            const firstDistance = Math.sqrt(distance*distance + (0.5*this.lineWidth)*(0.5*this.lineWidth))\n            const pointOneInFirstQuadrant = calculateRotatePoint(x1,y1,angleQuadrant,firstDistance)\n            const pointSecondInSecondQuadrant = calculateRotatePoint(...pointOneInFirstQuadrant,180+angle,distance)\n            const pointThreeInThirdQuadrant = calculateRotatePoint(...pointSecondInSecondQuadrant,270+angle,distance)\n            const pointFourInFourthQuadrant = calculateRotatePoint(...pointThreeInThirdQuadrant,angle,distance)\n            if(notIncluded(pointFourInFourthQuadrant)) result.push(pointFourInFourthQuadrant)\n            if(notIncluded(pointOneInFirstQuadrant)) result.push(pointOneInFirstQuadrant)\n            if(notIncluded(pointSecondInSecondQuadrant)) result.push(pointSecondInSecondQuadrant)\n            if(notIncluded(pointThreeInThirdQuadrant)) result.push(pointThreeInThirdQuadrant)\n        })\n        return result\n    }\n}\n\nlght.text = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultTextOptions,this)\n        if(property.font) this.fontBackwardCompatibility = property.font\n    }\n    \n    get font(){\n        return this.fontBackwardCompatibility || `${this.fontSize}px ${this.fontFamily}`\n    }\n\n    get textSize(){\n        var c = lght.apps[0].context;\n        c.save();\n        c.font = this.font;\n        var width = c.measureText(this.text).width;\n        var height = c.measureText('gM').width;\n        c.restore();\n        return [width,height];\n    }\n\n    get w(){\n        return this.textSize[0] + this.borderWidthIfBorderIsOn\n    }\n\n    get h(){\n        return this.textSize[1] + this.borderWidthIfBorderIsOn\n    }\n\n    findVertex(){\n        let reference\n        let coefficient = 1\n        if(this.textAlign === 'center') reference = [[1,-1],[-1,-1],[-1,0.8],[1,0.8]]\n        else{\n            if(this.textAlign === 'right') coefficient = -1\n            reference = [[2,-1],[0,-1],[0,0.8],[2,0.8]].map(e=>[e[0]*coefficient,e[1]])\n        }\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\nlght.img = class extends lght.shape{\n    constructor (property,parent){\n        super(property,parent)\n        mergeDefaultPropertyObject(property,lght.defaultImgOptions,this)\n        this.sprite = lght.sprite(this.spriteLink,()=>{\n            if(this.loadedFunction) this.loadedFunction()\n            this.parent.updateVisual()\n        })\n    }\n\n    get imageLoaded(){\n        return this.sprite.complete\n    }\n\n    get w(){\n        if(this.drawWidth) return this.drawWidth\n        if(this.imageLoaded){\n            if(this.drawHeight) return (this.drawHeight*this.sprite.width)/this.sprite.height\n            return this.sprite.width\n        }\n        return 0\n    }\n\n    get h(){\n        if(this.drawHeight) return this.drawHeight\n        if(this.imageLoaded){\n            if(this.drawWidth) return (this.drawWidth*this.sprite.height)/this.sprite.width\n            return this.sprite.height\n        }\n        return 0 \n    }\n\n    findVertex(){\n        let reference = [[1,-1],[-1,-1],[-1,1],[1,1]]\n        let result = []\n        reference.forEach(([rx,ry])=>{\n            let nx = this.absoluteX + 0.5*this.width*rx\n            let ny = this.absoluteY + 0.5*this.height*ry\n            result.push(rotatePoint(this.absoluteX,this.absoluteY,nx,ny,this.rotation))\n        })\n        return result\n    }\n}\n\n//Input\n //<--------------KEYBOARD INPUT GO HERE------------------->\n lght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\nlght.app.prototype.startCursor = function(){\n    this.canvas.style.cursor = 'pointer'\n}\n\nlght.app.prototype.endCursor = function(){\n    this.canvas.style.cursor = 'default'\n}\n\nlght.object.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.startCursor(),()=>this.parent.endCursor())\n}\n\nlght.shape.prototype.enterCursorEvent = function(){\n    if(this.alreadyCursorEvent) return\n    this.alreadyCursorEvent = true\n    this.hoverEvent(()=>this.parent.parent.startCursor(),()=>this.parent.parent.endCursor())\n}\n\nlght.app.prototype.attachEvent = function(event,func){\n    const mobile = window.mobileCheck()\n    let trueEvent = event\n    if(mobile){\n        switch(trueEvent){\n            case 'mousedown':\n                trueEvent = 'touchstart'\n                break\n            case 'mouseup':\n                trueEvent='touchend'\n                break\n            case 'mousemove':\n                trueEvent='touchmove'\n                break\n            default:\n                break;\n        }\n    }\n    this.addEventListener(trueEvent,(e)=>{\n        if(this.killed) return \n        if(window.mobileCheck()){\n            Array.from(e.changedTouches).forEach(touch=>{\n                const [x,y] = this.translateMouseCoor(touch)\n                func(x,y)\n            })\n            return\n        }\n        const [x,y] = this.translateMouseCoor(e)\n        func(x,y)\n    })\n}\n\nlght.app.prototype.mouseInputInit = function(){\n    const handleCoor = (x,y,event)=>{\n        if(this.objects.length === 0) return\n        for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj[event].length === 0) continue\n            if(!obj.display) continue\n\n            if(obj.pointInObject(x,y)){\n                for(let func of obj[event])( func(x,y))\n                break;\n            }\n        }\n        LargeLoop:for (let i = this.objects.length;i--;i>=0){\n            const obj = this.objects[i]\n            if(obj.shapes.length === 0) continue\n            if(!obj.display) continue\n            for(let a = obj.shapes.length;a--;a>=0){\n                const shape = obj.shapes[a]\n                if(shape[event].length === 0) continue\n                if(!shape.display) continue\n                if(shape.pointInShape(x,y)){\n                    for(let func of shape[event]){func(x,y)}\n                    break LargeLoop;\n                }\n            }\n        }\n    }\n\n    this.attachEvent('mouseup',(x,y)=>handleCoor(x,y,'mouseUpEvent'))\n    this.attachEvent('mousemove',(x,y)=>handleCoor(x,y,'mouseMoveEvent'))\n    this.attachEvent('mousedown',(x,y)=>handleCoor(x,y,'mouseDownEvent'))\n}\n\n//PRESS EVENT FOR AN APP\nlght.object.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//MAKE AN OBJECT DRAGGABLE\nlght.object.prototype.makeDraggable = function (func,funcDone) {\n    this.enterCursorEvent()\n    this.onDrag = false; var obj = this; this.draggable = true;\n    var rx = 0; var ry = 0; \n\n    this.mouseDownEvent.push((x,y)=>{\n        if(obj.draggable){\n            if(!obj.onDrag){\n                obj.onDrag = true;\n                rx = x - obj.posX; ry = y - obj.posY;\n            }\n        }\n    })\n\n    this.parent.attachEvent('mousemove', (...c) => {\n        if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height) obj.onDrag = false\n        if(obj.onDrag){\n            this.changePosition(c[0] - rx,c[1] - ry)\n            if(typeof func == 'function') func(obj);\n        }\n    })\n\n    this.parent.attachEvent('mouseup', (e) => {\n        if(obj.onDrag){\n            obj.onDrag = false;\n            if(funcDone) funcDone()\n        }\n    })\n}\n\n//HOVER EVENT\nlght.object.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        this.parent.attachEvent('mousemove', (...c)=>{\n            if(c[0] < 0 || c[0] >this.parent.canvas.width || c[1] < 0 || c[1] > this.parent.canvas.height){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                return;\n            }\n            var touch = obj.pointInObject(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n            }\n        })\n    }\n}\n\n//INPUT FOR SHAPES\nlght.object.prototype.attachQuickMovement = function (velocity,cooldown,func) {\n    var cd = true; var obj = this\n    document.addEventListener('keydown',function(key){\n        if(cd){\n            if(lght.inputReference.movementIndex.indexOf(key.key)!==-1){\n                obj.x += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][0]*velocity;\n                obj.y += lght.inputReference.coeffIndex[lght.inputReference.movementIndex.indexOf(key.key)][1]*velocity;\n                obj.updateVisual();\n                if(func) func(key,obj);\n                cd = false; \n                setTimeout(()=>{cd = true;},cooldown)\n            }\n        }\n    })\n}\n\n//<--------------MOUSE INPUT GO HERE---------------------->\n\n//PRESS EVENT FOR AN APP\nlght.shape.prototype.pressedEvent = function (func) {\n    this.enterCursorEvent()\n    this.mouseUpEvent.push(func)\n}\n\n//HOVER EVENT\nlght.shape.prototype.hoverEvent = function (funcin,funcout)  {\n    this.mouseIn = false; var obj = this;\n    this.hoverEvents.push([funcin,funcout])\n    if(this.hoverEvents.length === 1){\n        this.enterCursorEvent()\n        this.parent.parent.attachEvent('mousemove', (...c)=>{\n            if(!this.display) return\n            if(c[0] < 0 || c[0] >this.parent.parent.canvas.width || c[1] < 0 || c[1] > this.parent.parent.canvas.height){\n                obj.mouseIn = false; \n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n                return;\n            }\n            var touch = obj.pointInShape(c[0],c[1]);\n            if(obj.mouseIn && (!touch)){\n                obj.mouseIn = false;\n                for(let event of this.hoverEvents){\n                    if(event[1]) event[1]() \n                }\n                obj.parent.updateVisual();\n            }\n            \n        })\n        this.mouseMoveEvent.push(()=>{\n            if(!obj.mouseIn){\n                obj.mouseIn = true;\n                for(let event of this.hoverEvents){\n                    if(event[0]) event[0]() \n                }\n                obj.parent.updateVisual()\n            }\n        })\n    }\n}\n\n//Animation\nlght.app.prototype.animate = function() {\n    if(lght.frameTime !== undefined && lght.lastFrame !== undefined){\n        let timeDifference = lght.frameTime - lght.lastFrame\n        this.objects.forEach(e => {\n            e.animate(timeDifference);\n            e.shapes.forEach(a => {\n                a.animate(timeDifference)\n            })\n        });\n    }\n}\n\nconst addAnimation = function(property,value,time,func){\n    this.animationCount++;\n    let id = this.animationCount;\n\n    let timeout = setTimeout(()=>{\n        console.log(property,this,value)\n        changeByDotNotation(property,this,value)\n        this.cancelAnimation(id)\n        if(this.parent.static !== undefined) this.parent.static = true\n        else this.static = true\n        if(this.updateVisual) this.updateVisual()\n        else this.parent.updateVisual()\n        if(func) func();\n    },time)\n\n    const alreadyAnimated = this.animations.find((animation)=>animation[0] === property)\n    if(alreadyAnimated){\n        this.cancelAnimation(alreadyAnimated[6])\n    }\n    if(this.parent.static !== undefined) this.parent.static = false\n    else this.static = false\n    this.animations.push([property,value,getByDotNotation(property,this),time,timeout,func,id]);\n    return id;\n}\n\nconst awaitAnimation = function(property,value,time){\n    return new Promise(r=>this.addAnimation(property,value,time,r))\n}\n\nconst cancelAnimation = function(){\n    for(let id of [...arguments]){\n        let animation = this.animations.find(e=>e[6] === id)\n        let index = this.animations.findIndex(e=>e[6]===id)\n        if(!animation) return false\n        clearTimeout(animation[4])\n        this.animations.splice(index,1)\n    }\n}\n\nconst animate = function (time){\n    let obj = this\n    this.animations.forEach(animation=>{\n        let [property,value,init,timeUp] = animation\n        let newValue = getByDotNotation(property,obj) + (time/timeUp)*(value-init)\n        if(init < value && newValue > value) newValue = value\n        if(init>value && newValue < value) newValue = value\n        changeByDotNotation(property,obj,newValue)\n    })\n}\n\nconst fadeIn = function(time){return new Promise(r=>this.addAnimation('opacity',1,time,r))}\nconst fadeOut = function(time){return new Promise(r=>this.addAnimation('opacity',0,time,r))}\n\nlght.animateFunctionReference = {\n    animate,\n    addAnimation,\n    cancelAnimation,\n    fadeIn,\n    fadeOut\n}\n\nfor(var prop in lght.animateFunctionReference){\n    lght.object.prototype[prop] = lght.animateFunctionReference[prop];\n    lght.shape.prototype[prop] = lght.animateFunctionReference[prop];\n}\n\n//Draw\nlght.app.prototype.render = function(){\n    this.clearCanvas();\n    this.fillBackground();\n    this.renderShape();\n}\n\nlght.app.prototype.visualInit = function(){\n    this.backgroundColor = this.options.background;\n    this.context = this.canvas.getContext(\"2d\");\n}\n\nlght.app.prototype.renderShape = function(){\n    this.renderPositions();\n\n    this.objects.sort((a,b)=>a.zIndex -b.zIndex).forEach(obj=>{\n        obj.draw();\n    })\n}\n\n//<-------------------BASIC CANVAS STUFF---------------------->\n//CLEARING CANVAS AND BACKGROUND COLOR\nlght.app.prototype.clearCanvas = function(){\n    this.context.save(); \n    this.context.clearRect(0,0,this.canvas.width,this.canvas.height); \n    this.context.restore();\n}\n\nlght.app.prototype.fillBackground = function(){\n    if(this.backgroundColor!=='none'){\n        this.context.save(); \n        this.context.fillStyle = this.backgroundColor;\n        this.context.fillRect(0,0,this.canvas.width,this.canvas.height);\n        this.context.restore();\n    }\n}\n\n/*POSITION INDICATOR FUNCTIONS GO HERE\nDraw all position indicators at once to save performance from context state change*/\nlght.app.prototype.renderPositions = function(){\n    this.context.save();\n    this.context.fillStyle = 'red';\n\n    this.objects.forEach(({posX,posY,positionIndicator}) => {\n        if(!positionIndicator) return\n        this.context.beginPath()\n        this.context.arc(posX,posY,5,0,2*Math.PI)\n        this.context.closePath()\n        this.context.fill()\n    });\n    \n    this.context.restore();\n}\n\n\n/* SHAPE PRERENDERING FUNCTIONS GO HERE\nShape prerendering prerender shapes on canvases to save performance*/\n\nlght.object.prototype.updateVisual = function(){\n    //If the dimension changes a new canvas have to be created\n    var max = this.findMax();\n    for(var i = 0;i<max.length;i++){\n        if(~~ (max[i] + 0.5)!== ~~ (this.preloader.maxes[i] + 0.5)){\n            this.createPreloader(); return;\n        }\n    }\n\n    this.clearPreloader();\n\n    this.shapes.forEach(s=>{\n        let x = this.preloader.ox + s.x\n        let y = this.preloader.oy + s.y\n        lght.drawShape(this.preloader.context,x,y,s,)\n    })\n    if(!this.parent.options.constantRender) this.parent.turnFunctions(this.parent)\n}\n\nlght.object.prototype.clearPreloader = function(){\n    this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height);\n}\n\nlght.object.prototype.createPreloader = function(){\n    this.preloader = document.createElement('canvas');\n    \n    this.preloader.maxes = this.findMax();\n    let [minX,maxX,minY,maxY] = this.preloader.maxes\n\n    this.preloader.width = maxX-minX;\n    this.preloader.height = maxY-minY;\n\n    this.preloader.ox = this.posX - minX;\n    this.preloader.oy = this.posY - minY;\n\n    this.preloader.context = this.preloader.getContext('2d');\n\n    this.updateVisual();\n}\n\nlght.object.prototype.drawPreloader = function(){\n    if(!this.display) return\n    if(this.preloader.width >0 && this.preloader.height > 0){\n        let x = this.preloader.maxes[0] + this.preloader.width/2;\n        let y = this.preloader.maxes[2] + this.preloader.height/2;\n        x = ~~(x+0.5); y = ~~(y+0.5);\n\n        this.parent.context.save()\n        this.parent.context.translate(x,y)\n        lght.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height);\n        this.parent.context.restore()\n    }\n}\n\n\n//<------------------SHAPE DRAWING FUNCTION---------------->\nlght.object.prototype.draw = function(){\n    if(!this.display) return\n    if(this.static) return this.drawPreloader()\n    this.shapes.forEach(s=>{\n        lght.drawShape(this.parent.context,this.posX+s.x,this.posY+s.y,s)\n    })\n}\n\n//MASTER FUNCTION\nlght.drawShape = function(c,x,y,shape){\n    x = ~~(x+0.5)\n    y = ~~(y+0.5)\n    if(!shape.display) return\n    if(shape.border || shape.borderOnly) this.drawShapeKind(c,shape,x,y,true,1,shape.borderColor,shape.shadow);\n    else if(!shape.borderOnly && !shape.border) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color,shape.shadow);\n    if(!shape.borderOnly) this.drawShapeKind(c,shape,x,y,false,shape.opacity,shape.color);\n}\n\nlght.drawShapeKind = function(c,s,x,y,stroke,opacity,color,shadow){\n    opacity = opacity * s.parent.opacity;\n    if(opacity == 0 || opacity <0 ) return\n\n    c.save()\n    c.globalAlpha = opacity\n    c.fillStyle = color\n    c.strokeStyle = color\n    c.lineWidth = s.borderWidth\n    c.translate(x,y)\n    c.scale(s.scaleX,s.scaleY)\n\n    if(shadow){\n        const {color,blur,offsetX,offsetY} = shadow\n        c.shadowColor = color\n        c.shadowBlur = blur\n        c.shadowOffsetX = offsetX\n        c.shadowOffsetY = offsetY\n    }\n\n    switch(s.kind){\n        case 'rect':\n            lght.drawRect(c, s.w, s.h, s.rotation, stroke); break;\n        case 'arc':\n            lght.drawArc(c, s.rad,s.arcDegree,s.rotation, stroke); break;\n        case 'text':\n            lght.drawText(c, s.text,s.font, stroke,s.textAlign ,s.w, s.h,s.rotation); break;\n        case 'img':\n            if(s.imageLoaded) lght.drawImg(c, s.sprite,s.w,s.h,s.rotation); break;\n        case 'poly':\n            lght.drawPoly(c, s.polyPoints,s.rotation, stroke); break;\n        case 'line':\n            if(stroke){\n                const points = s.points.map(((position,index)=>{\n                    const [x,y] = position\n                    if(index === 0){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index+1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else if(index === s.points.length-1){\n                        const angle = degToRad(findAngle2Point(...position,...s.points[index-1]))\n                        return [x-s.borderWidth*Math.cos(angle),y+s.borderWidth*Math.sin(angle)]\n                    }\n                    else return [x,y]\n                }))\n                lght.drawLine(c,points,s.rotation,s.lineWidth+s.borderWidth);\n            }\n            else lght.drawLine(c,s.points,s.rotation,s.lineWidth); break;\n        case 'roundedRectangle':\n            lght.drawRoundedRectangle(c,s.w,s.h,s.rotation,s.borderRadius,stroke)\n            break\n        default:\n            break\n    }\n    if(s.clip && s.clipImageLoaded){\n        c.clip()\n        c.rotate(degToRad(s.rotation))\n        if(typeof s.clipSpriteSheetX === 'number' && typeof s.clipSpriteSheetY === 'number'){\n            const spriteWidth = s.clipImage.width / s.spriteLengthX\n            const spriteHeight = s.clipImage.height / s.spriteLengthY\n            const clipStartX = s.clipSpriteSheetX * spriteWidth\n            const clipStartY = s.clipSpriteSheetY * spriteHeight\n            c.drawImage(s.clipImage,clipStartX,clipStartY,spriteWidth,spriteHeight,(-s.width/2)/s.scaleX,(-s.height/2)/s.scaleY,s.width/s.scaleX,s.height/s.scaleY)\n        }\n        else c.drawImage(s.clipImage,(-s.width/2)/ s.scaleX,(-s.height/2)/ s.scaleY,s.width / s.scaleX,s.height / s.scaleY)\n    }\n\n    c.restore()\n}\n\n//DRAWING RECTANGLE\nlght.drawRect = function(c,w,h,rotation,stroke){\n    c.rotate(degToRad(360-rotation))\n    if(stroke) c.strokeRect(-w/2,-h/2,w,h);\n    else c.fillRect(-w/2,-h/2,w,h);\n}\n\nlght.drawRoundedRectangle = (c,w,h,rotation,borderRadius,stroke)=>{\n    c.rotate(degToRad(360,rotation))\n    c.beginPath()\n    c.moveTo(0,-h*0.5)\n    c.lineTo(-w*0.5+borderRadius,-h*0.5)\n    c.quadraticCurveTo(-w*0.5,-h*0.5,-w*0.5,-h*0.5+borderRadius)\n    c.lineTo(-w*0.5,h*0.5-borderRadius)\n    c.quadraticCurveTo(-w*0.5,h*0.5,-w*0.5+borderRadius,h*0.5)\n    c.lineTo(w*0.5-borderRadius,h*0.5)\n    c.quadraticCurveTo(w*0.5,h*0.5,w*0.5,h*0.5-borderRadius)\n    c.lineTo(w*0.5,-h*0.5+borderRadius)\n    c.quadraticCurveTo(w*0.5,-h*0.5,w*0.5-borderRadius,-h*0.5)\n    c.lineTo(0,-h*0.5)\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\n//DRAWING CIRCLES\nlght.drawArc = function(c,rad,arcDegree,rotation,stroke){\n    c.beginPath();\n\n    const br = degToRad(360 - rotation - arcDegree);\n    const er = degToRad(360 - rotation);\n\n    if(arcDegree < 360){\n        const [x,y] = rotatePoint(0,0,rad,0,360-rotation-arcDegree);\n        c.moveTo(x,y); c.moveTo(0,0);\n    }\n\n    c.arc(0,0,rad,br,er);\n\n    if(stroke) c.stroke();\n    else c.fill();\n    c.closePath();\n\n}\n\n//DRAWING TEXT\n\nlght.drawText = function(c,text,font,stroke,textAlign,width,height,rotation){\n    c.font = font;\n    c.rotate(degToRad(360-rotation))\n    let x\n    if(textAlign === 'center') x = ~~(-width/2 +  0.5)\n    else if(textAlign==='left') x = 0\n    else x=~~(-width + 0.5)\n    if(stroke) c.strokeText(text,x,~~(height/3.5 + 0.5));\n    else c.fillText(text,x,~~(height/3.5 + 0.5))\n}\n\n//DRAWING IMAGES\nlght.drawImg = function(c,sprite,w,h,rotation){\n    c.rotate(degToRad(360-rotation));\n    c.drawImage(sprite,-w/2,-h/2,w,h);\n}\n\nlght.drawPoly = (c,points,rotation,stroke) => {\n    if(points.length === 0 || !points) return \n    c.rotate(degToRad(360-rotation))\n    c.beginPath()\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.closePath()\n    if(stroke) c.stroke()\n    else c.fill()\n}\n\nlght.drawLine = (c,points,rotation,lineWidth)=>{\n    c.beginPath()\n    c.rotate(degToRad(360-rotation))\n    c.moveTo(...points[0])\n    points.forEach(([x,y])=>c.lineTo(x,y))\n    c.lineWidth = lineWidth\n    c.stroke()\n}\n\nlght.object.prototype.addShape = function (property) {\n    let shape = new lght[property.kind](property,this);\n    this.updateVisual()\n    return shape\n}\n\nlght.object.prototype.addComponent = function(name,property){\n    let shape = lght.component.addComponent(name,property,this)\n    this.updateVisual()\n    return shape\n}\n\nlght.app.prototype.addObject = function (property) {\n    return new lght.object(property,this);\n}\n\nlght.app.prototype.getObject = function(name){\n    return this.objects.find(e=>e.name===name)\n}\n\nlght.app.prototype.addStorage = function (property){\n    return new lght.storage(property,this)\n}\n\nlght.app.prototype.addAdvanceStorage = function(property){\n    return new lght.advanceStorage(property,this)\n}\n\nlght.app.prototype.removeObject = function (obj) {\n    this.objects.splice(this.objects.indexOf(obj),1);\n}\n\nexport default lght","import lght from './lght/lght'\nconst pd = 2\nconst handHeight = 75*pd\nconst spriteLink = 'https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg'\nconst webView = class{\n  constructor(ref,ref2,ref3){\n\n    this.cardSpriteColumn = 14\n    this.cardSpriteRow = 8\n    this.cardSpriteReference = {\n      wild:[0,13],\n      Draw4:[4,13],\n      colorReference:['red','yellow','green','blue'],\n      otherReference:['Skip','Reverse','Draw 2']\n    }\n    this.app = new lght.app(ref)\n    this.app.backgroundColor = 'none'\n    this.staticApp = new lght.app(ref2,{constantRender:false})\n    this.staticApp.backgroundColor='none'\n    this.app.pixelDensity = pd\n    this.app.canvas.width = 850*pd\n    this.app.canvas.height = 650*pd\n    this.staticApp.pixelDensity = pd\n    this.staticApp.canvas.width = 850*pd\n    this.staticApp.canvas.height = 650*pd\n    console.log(this.staticApp.canvas)\n    this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:'roundedRectangle',w:this.app.canvas.width,h:this.app.canvas.height,clip:true,clipImageLink:'assets/wood.jpg'})\n    this.staticApp.turnFunctions(this.staticApp)\n    this.positionReference = {\n      leaderBoard:[700*pd,279*pd],\n      drawDeck:[300*pd,279*pd],\n      playDeck:[this.app.canvas.width/2 + 75*pd,279*pd],\n      playerDeck:[this.app.canvas.width/2,this.app.canvas.height-(handHeight/2)]\n    }\n\n    let drawable = false\n    let resolveFunction = ()=>{}\n    this.drawDeck = this.createDeck('blue 2',300*pd,279*pd)\n    this.drawDeck.addShape({kind:'text',text:'Draw Here',color:'black',y:85*pd,font:'35px Arial Bold'})\n    this.drawDeck.flip()\n    this.drawDeck.pressedEvent(()=>{\n      if(!drawable) return\n      drawable = false\n      resolveFunction()\n    })\n    this.awaitDraw = ()=>new Promise(r=>{\n            drawable = true\n            resolveFunction = (r)\n    })\n    this.cancelDraw = ()=>drawable = false\n\n    this.createHand()\n    this.createLeaderboard()\n    this.drawAnnouncement()\n    this.configureStartGameMessage()\n    this.configureUnoMessage()    \n    this.drawColorChoser()\n    this.drawSpecialInfo()\n    this.drawEmote()\n    this.drawAddBot()\n    this.drawEndGame()\n    this.drawSoundIcon()\n    this.initAnimation()\n  }\n\n  drawSoundIcon = ()=>{\n    const soundIcon = this.app.addObject({x:800*pd,y:50*pd})\n    const soundOn = soundIcon.addShape({kind:'img',drawWidth:70,spriteLink:'./assets/soundon.png',display:true})\n    const soundOff = soundIcon.addShape({kind:'img',drawWidth:70,spriteLink:'./assets/soundoff.png',display:false})\n    let sound = true\n    soundIcon.pressedEvent(()=>{\n      if(sound){\n        lght.muteAll()\n      }\n      else{\n        lght.unmuteAll()\n      }\n      soundOn.display = !soundOn.display\n      soundOff.display = !soundOff.display\n      soundIcon.updateVisual()\n      sound = !sound\n    })\n  }\n\n  drawEndGame(){\n    const endGame = this.app.addObject({display:false,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,zIndex:100000000})\n    endGame.addShape({kind:'roundedRectangle',color:'#ffffed',w:700,h:200,border:true,borderWidth:10,borderColor:'black',borderRadius:20,shadow:{color:'black',offsetX:5,offsetY:-5,blur:10}})\n    const text = endGame.addShape({kind:'text',text:'Someone had won the game!',font:'40px Arial Bold',y:-10})\n    let resolveFunction = ()=>{}\n    const restartText = endGame.addShape({kind:'text',text:'New Game',font:'30px Arial Bold',color:'blue',y:50})\n    restartText.hoverEvent(()=>{\n      restartText.color = 'yellow'\n      endGame.updateVisual()\n    },()=>{\n      restartText.color = 'blue'\n      endGame.updateVisual()\n    })\n    restartText.pressedEvent(()=>resolveFunction())\n    this.activateEndGame = (name,func)=>{\n      text.text = ` ${name} had won the game! `\n      endGame.updateVisual()\n      endGame.display = true\n      resolveFunction = func\n    }\n  }\n\n  drawTutorial(){\n    const tutorial = this.app.addStorage({display:false,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,zIndex:100000,direction:'column',spacing:5,})\n    tutorial.addShape({kind:'roundedRectangle',color:'#ffffed',w:750,h:750,border:true,borderWidth:10,borderColor:'black',borderRadius:20,shadow:{color:'black',offsetX:5,offsetY:-5,blur:10}})\n    const x = tutorial.addShape({kind:'img',spriteLink:'assets/crossIcon.png',drawWidth:50,x:320,y:-320})\n    x.pressedEvent(()=>tutorial.display = false)\n    tutorial.model = [\n      ' Welcome to One Online! ',\n      'Some quick pointers:',\n      ' Use \"Copy Link\" from the left to automatically',\n      'get a link you can send to your friends!',\n      ' You can start the game when at least 2 players ',\n      '(including bots) are present. The panel on the left',\n      'show you who is in the game.',\n      ' You can use the emote panel below to piss', \n      'off your friends when playing.',\n      \" And that is it! If you have any feedback\",\n      \"please  me at vietlongali@gmail.com\",\n      \"Have fun!\",\n      \"Love this app? Buy me a beer on \",\n      'Venmo @LongTran123'\n    ]\n    tutorial.elementFunction = (content)=>{\n      const shape = tutorial.addShape({kind:'text',font:'30px Arial Bold',text:content})\n      shape.x = -340 + 0.5*shape.width\n      return shape\n    }\n    tutorial.updateToModel()\n    this.showTutorial = ()=>tutorial.display = true\n  }\n\n  drawAddBot(){\n    const addBot = this.app.addObject({display:false,x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1] + 120*pd})\n    const text = addBot.addShape({kind:'text',font:'35px Arial Bold',text:'Add Bot ',})\n    let resolveFunction = ()=>{}\n    text.hoverEvent(()=>{\n      text.color = 'yellow'\n      addBot.updateVisual()\n    },()=>{\n      text.color = 'black'\n      addBot.updateVisual()\n    })\n    text.pressedEvent(()=>resolveFunction())\n    this.startAddBot = (func)=>{\n      resolveFunction = func\n      addBot.display = true\n    }\n    this.cancelAddBot = ()=>{\n      addBot.display = false\n    }\n  }\n\n  drawEmoteChooser(func){\n    const emoteChooser = this.app.addStorage({x:250*pd,y:470*pd,spacing:-15,zIndex:-1})\n    emoteChooser.addShape({kind:'roundedRectangle',color:'white',w:370*pd,h:40*pd,borderRadius:10*pd,border:true,borderColor:'black',borderWidth:5,shadow:{color:'black',offsetX:5,offsetY:-5,blur:10}})\n    emoteChooser.model = ['Emote:','','','','','','']\n    emoteChooser.elementFunction = (content,index)=>{\n      if(!index) return emoteChooser.addShape({kind:'text',text:content,fontSize:35,fontFamily:'Arial Bold'})\n      const shape = emoteChooser.addShape({kind:'text',text:content,fontSize:30,fontFamily:'Arial Bold'})\n      shape.hoverEvent(()=>{\n        shape.fontSize = 50;\n        emoteChooser.updateVisual()\n      },()=>{\n        shape.fontSize = 30;\n        emoteChooser.updateVisual()\n      })\n      shape.pressedEvent(()=>func(content))\n      return shape\n    }\n    emoteChooser.updateToModel()\n  }\n\n  drawEmote(){\n    const emoteText = this.app.addObject({display:false,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 170*pd,zIndex:1000})\n    const text = emoteText.addShape({kind:'text',text:\"Someone emote something\",font:'60px Arial Bold',color:'green'})\n    emoteText.addShape({kind:'roundedRectangle',w:this.app.canvas.width,h:100,display:false})\n    let timeInterval = null\n    \n    this.emote = (name,color,emoji)=>{\n      clearInterval(timeInterval)\n      text.text = `${name} emote ${emoji}`\n      text.color = color\n      emoteText.updateVisual()\n      emoteText.display = true\n      text.opacity = 0\n      text.addAnimation('opacity',1,100,()=>{timeInterval = setTimeout(()=>{\n        text.addAnimation('opacity',0,100,()=>{\n          emoteText.display = false\n        })\n        },1000)\n      })\n    }\n  }\n\n  initAnimation(){\n    this.animationQueue = []\n    this.animationCallback = []\n    let animating = false\n    this.updateAnimation = async ()=>{\n      if(animating) return\n      if(!this.animationQueue.length) return\n      animating = true\n      const [playordraw,px,py,ec] = this.animationQueue.splice(0,1)[0]\n      const firstFunc = this.animationCallback.splice(0,1)[0]\n      //Animation: 0:play/draw 1: positionX, 2: positionY, 3: extra content\n      if(playordraw==='play'){\n        await this.animatePlay(ec,px,py)\n        animating = false\n        firstFunc()\n        this.updateAnimation()\n      }\n      else{\n        await this.animateDraw(px,py)\n        animating = false\n        firstFunc()\n        this.updateAnimation()\n      }\n    }\n    this.addToAnimationQueue = (queue,func)=>{\n      this.animationQueue.push(queue)\n      this.animationCallback.push(func)\n      this.updateAnimation()\n    }\n  }\n\n  animatePlayerPlay = (content)=>new Promise(r=>this.addToAnimationQueue(['play',...this.positionReference.playerDeck,content],r))\n  animatePlayerDraw = ()=>new Promise(r=>this.addToAnimationQueue(['draw',...this.positionReference.playerDeck],r))\n  animateLeaderboardDraw = ()=>new Promise(r=>this.addToAnimationQueue(['draw',...this.positionReference.leaderBoard],r))\n  animateLeaderboardPlay = (content)=> new Promise(r=>this.addToAnimationQueue(['play',...this.positionReference.leaderBoard,content],r))\n\n\n  drawSpecialInfo = ()=>{\n    const specialInfo = this.app.addObject({x:this.positionReference.playDeck[0],y:this.positionReference.playDeck[1] + 85*pd})\n    specialInfo.addShape({kind:'roundedRectangle',display:false,w:this.app.canvas.width,h:50*pd})\n    const text = specialInfo.addShape({kind:'text',font:'40px Arial Bold',text:''})\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    this.activateInfo = (color)=>{\n      console.log(color)\n      const tc = textColor[colors.indexOf(color)]\n      text.color = tc\n      text.text = color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')\n      specialInfo.updateVisual()\n    }\n    this.cancelInfo = ()=>{\n      text.text = ''\n      specialInfo.updateVisual()\n    }\n  }\n\n  animateDraw = (endX,endY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(null,true)\n    card.x = this.positionReference.drawDeck[0]\n    card.y = this.positionReference.drawDeck[1]\n    card.zIndex = -1\n    card.display = true\n    lght.playSound('./assets/draw.mp3')\n    card.addAnimation('x',endX,animationTime)\n    card.addAnimation('y',endY,animationTime)\n    card.shapes[0].addAnimation('scaleX',0.2,animationTime,r)\n    card.shapes[0].addAnimation('scaleY',0.2,animationTime,()=>card.kill())\n  })\n\n  animatePlay = (content,startX,startY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(content)\n    card.shapes[0].scaleX = 0.2\n    card.shapes[0].scaleY = 0.2\n    card.x = startX\n    card.y = startY\n    card.display = true\n    lght.playSound('./assets/deal.mp3')\n    card.addAnimation('x',this.playDeck.x,animationTime,()=>{\n      this.playDeck.kill()\n      this.playDeck=card\n    })\n    card.addAnimation('y',this.playDeck.y,animationTime,r)\n    card.shapes[0].addAnimation('scaleX',1,animationTime)\n    card.shapes[0].addAnimation('scaleY',1,animationTime)\n    if(content.match(/Draw 4/) || content.match(/Wild/)) this.activateInfo(content.split(' ')[0])\n    else this.cancelInfo()\n  })\n\n  createActionPanel(actionFunction){\n    const actionalPanel = this.app.addStorage({x:100*pd,y:279*pd,spacing:20,direction:'column'})\n    actionalPanel.addShape({kind:'roundedRectangle',w:120*pd,h:150*pd,borderRadius:10*pd,color:'#ffffed',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    actionalPanel.addShape({kind:'text',font:'32px Arial Bold',text:\"Actions:\",y:-60*pd})\n    actionalPanel.model = ['Copy Link','Leave Game','Restart Game']\n    actionalPanel.elementFunction = (link)=>{\n      const shape = actionalPanel.addShape({kind:'text',font:'30px Arial Bold',text:link})\n      shape.hoverEvent(()=>{\n        shape.color = 'yellow'\n        actionalPanel.updateVisual()\n      },()=>{\n        shape.color = 'black'\n        actionalPanel.updateVisual()\n      })\n      shape.pressedEvent(()=>actionFunction[link.split(' ').join('')]())\n      return shape\n    }\n    actionalPanel.updateToModel()\n  }\n\n  createLeaderboard(){\n    const leaderBoard = this.staticApp.addStorage({x:700*pd,y:279*pd,spacing:30,direction:'column'})\n    leaderBoard.addShape({kind:'roundedRectangle',w:150*pd,h:200*pd,borderRadius:10*pd,color:'#ffffed',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    leaderBoard.addShape({kind:'text',font:'32px Arial Bold',text:\"Turn Board:\",y:-80*pd})\n    const turnIndicator = this.app.addObject({display:false})\n    turnIndicator.addShape({x:85*pd,kind:'poly',specialPolygon:true,numberOfSide:3,color:'yellow',radius:10*pd,rotation:180})\n    let color = ['green','red','darkyellow','blue']\n    leaderBoard.elementFunction = (name,i)=>{\n      return leaderBoard.addShape({kind:'text',font:'30px Arial Bold',color:color[i],text:name})\n    }\n    \n    this.updateTurnIndicator = (turn)=>{\n      const {absoluteY,absoluteX} = leaderBoard.shapes[turn+2]\n      turnIndicator.x = absoluteX + 10*pd\n      turnIndicator.addAnimation('y',absoluteY,200,()=>{\n        turnIndicator.display = true\n        let numberOfLoops = 5\n        const fadeOut = ()=>{\n          numberOfLoops--\n          if(numberOfLoops<0) return\n          turnIndicator.addAnimation('opacity',0,500,fadeIn)\n        }\n        const fadeIn = ()=>turnIndicator.addAnimation('opacity',1,500,fadeOut)\n        fadeOut()\n      })\n    }\n    let cardElement = []\n    this.updateLeaderboard = (players,cardsAmount)=>{\n          cardElement.forEach(e=>e.kill())\n          cardElement = []\n          leaderBoard.model = players\n          leaderBoard.updateToModel()\n          leaderBoard.storageShapes.forEach((e,i)=>{\n            const {x,y} = e\n            cardElement.push(leaderBoard.addShape({kind:'text',text:`Cards: ${cardsAmount[i]}`,x,y:y+30,color:'grey',font:'20px Arial Bold'}))\n          })\n          this.staticApp.turnFunctions(this.staticApp)\n    }\n  }\n\n  createHand(){\n    let cards = []\n    let resolveFunction = ()=>{}\n    let verifyFunction = ()=>{}\n    let onSelect = false\n    const playerHand = this.app.addStorage({spacing:-70*pd,y:this.app.canvas.height-(handHeight/2),x:this.app.canvas.width/2,model:cards})\n    playerHand.addShape({kind:'rect',color:'brown',w:this.app.canvas.width,h:handHeight})\n    playerHand.elementFunction = (content)=>{\n      let position = []\n      if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n      else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n      else{\n        const color = content.split(' ')[0]\n        const action = content.split(' ').slice(1).join(' ')\n        position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n        if(parseInt(action)) position[1] = parseInt(action)\n        else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n      }\n      const shape = playerHand.addShape({borderOnly:true,y:30,clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd*1.2,h:145.5*pd*1.2,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n      shape.hoverEvent(()=>{\n        if(verifyFunction(content) && onSelect) shape.borderColor = 'yellow'\n        shape.borderWidth = 5*pd\n        shape.addAnimation('y',-100,200)\n      },()=>{\n        shape.borderColor = 'black'\n        shape.borderWidth = 1.25*pd\n        shape.addAnimation('y',30,200)\n      })\n      shape.pressedEvent(()=>{\n            if(!verifyFunction(content) || !onSelect) return\n            onSelect = false\n            shape.kill()\n            resolveFunction(content)\n      })\n      return shape\n    }\n    this.updateCards = (card)=>{\n      playerHand.model = card\n      playerHand.updateToModel()\n    }\n    this.awaitSelection = (vf)=>new Promise(r=>{\n      verifyFunction = vf\n      resolveFunction = r\n      onSelect = true\n    })\n    this.cancelSelection = ()=>onSelect = false\n  }\n\n  createDeck(content,x,y){\n    const deckCardOption = {kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black'}\n    const deck = this.staticApp.addObject({x,y})\n    deck.addShape({x:6*pd,y:-5*pd,...deckCardOption})\n    deck.addShape({x:4*pd,y:-3.75*pd,...deckCardOption})\n    deck.addShape({x:3*pd,y:-2.5*pd,...deckCardOption})\n    deck.addShape({x:1.5*pd,y:-1.25*pd,...deckCardOption})\n    const card = this.createCard(content)\n    card.x = x; card.y = y\n    card.shapes[0].shadow = null\n    card.shapes[0].border = false\n    card.display = true\n    card.updateVisual()\n    this.staticApp.turnFunctions(this.staticApp)\n    return card\n  }\n\n  createCard(content,back = false){\n    const card = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:false})\n    if(back){\n      card.addShape({kind:'roundedRectangle',borderOnly:true,color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:'assets/back.svg',borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n    }\n    else{let flipped = false\n    let position = []\n    if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n    else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n    else{\n      const color = content.split(' ')[0]\n      const action = content.split(' ').slice(1).join(' ')\n      position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n      if(parseInt(action)) position[1] = parseInt(action)\n      else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n    }\n    const shape = card.addShape({clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n  \n    const changeToBack =()=>{\n      shape.clipSpriteSheetX = null\n      shape.changeClipImage('assets/back.svg')\n    }\n\n    const changeToFront = ()=>{\n      shape.clipSpriteSheetX = position[1]\n      shape.changeClipImage(spriteLink)\n    }\n\n    const flipAnimation = (back=true)=>new Promise(r=>{\n      shape.addAnimation('scaleX',0,100,()=>{\n        if(back) changeToBack()\n        else changeToFront()\n        shape.addAnimation('scaleX',1,100,r)\n      })\n    })\n    card.flip = ()=>{\n      flipped = !flipped\n      return flipAnimation(flipped)\n    }}\n    return card\n  }\n\n  drawColorChoser = ()=>{\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    let choosingColor = false\n    let resolveFunction = ()=>{}\n    const colorChooser = this.app.addStorage({display:false,zIndex:1000,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,model:colors,spacing:25,direction:'column'})\n    colorChooser.addShape({kind:'roundedRectangle',w:200*pd,h:200*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    colorChooser.addShape({kind:'text',font:'35px Arial Bold',text:'Choose a color:',y:-85*pd})\n    colorChooser.elementFunction = (color,i)=>{\n      const shape = colorChooser.addShape({kind:'text',color:textColor[i],font:'30px Arial Bold',text:color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')})\n      shape.hoverEvent(()=>{\n        shape.color = 'yellow'\n        colorChooser.updateVisual()\n      },()=>{\n        shape.color = textColor[i]\n        colorChooser.updateVisual()\n      })\n      shape.pressedEvent(()=>{if(choosingColor){resolveFunction(color);colorChooser.display = false}})\n      return shape\n    }\n    colorChooser.updateToModel()\n    this.chooseColor = ()=>new Promise(r=>{\n      colorChooser.display = true\n      choosingColor = true\n      resolveFunction = r\n    })\n  }\n\n  drawAnnouncement(){\n      let animationDuration = 100\n\n      this.announcementQueue = []\n      this.announcmentPerpetual = []\n      this.onAnnouncementPerpetual = false\n      this.onAnnoucementChanged = false\n      \n      //Format: [text,color,time/perpetual,started]\n      this.announcement = this.app.addObject({x:this.app.canvas.width/2,y:50*pd,positionIndicator:false})\n      this.annoucementText = this.announcement.addShape({kind:'text',font:'100px Arial Bold',color:'orange',text:'',display:false})\n      this.announcement.addShape({kind:'roundedRectangle',w:this.app.canvas.width/2,h:100*pd,display:false})\n      const fadeOut = (func)=>this.annoucementText.addAnimation('opacity',0,animationDuration,()=>{this.annoucementText.display=false;if(func) func()})\n      const fadeIn = (funcDone)=>this.annoucementText.addAnimation('opacity',1,animationDuration,funcDone)\n      const fadeOutThenFadeIn = (func,funcDone)=> fadeOut(()=>{func();this.annoucementText.display = true; fadeIn(funcDone)})\n\n      this.updateAnnouncement = ()=>{\n          if(this.announcementQueue.length > 0 && !this.announcementQueue[0][3]){\n              let [text,color,time] = this.announcementQueue[0]\n              fadeOutThenFadeIn(()=>{\n                  this.annoucementText.text = text\n                  this.annoucementText.color = color\n                  setTimeout(()=>{this.announcementQueue.splice(0,1);this.updateAnnouncement();},time+animationDuration)\n              })\n              this.announcementQueue[0][3] = true\n          }\n          else if(this.announcementQueue.length >0) return\n          else if(!this.onAnnouncementPerpetual && this.annoucementText.display) return fadeOut()\n          else if(this.onAnnouncementPerpetual && ((!this.annoucementText.display) || this.onAnnoucementChanged)) return fadeOutThenFadeIn(()=>{\n              let [text,color] = this.announcmentPerpetual\n              this.annoucementText.text = text\n              this.annoucementText.color = color\n          })\n      }\n    }\n\n    changeAnnoucementPerpetual(text,color){\n      this.announcmentPerpetual = [text,color]\n      this.onAnnoucementChanged = true\n      this.updateAnnouncement()\n    }\n\n    addToAnnoucementQueue(text,color,time){\n      this.announcementQueue.push([text,color,time,false])\n      this.updateAnnouncement()\n    }\n\n    configureUnoMessage(){\n      const uno = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1000})\n      const shape = uno.addShape({kind:'img',spriteLink:'./assets/polygon.svg',scaleX:0,scaleY:0,drawWidth:500})\n      uno.display = false\n      this.UNO = ()=>{\n        uno.display = true\n        shape.addAnimation('scaleX',1.5,400,()=>{\n          setTimeout(()=>{\n            shape.addAnimation('scaleX',0,100,()=>uno.display = false)\n            shape.addAnimation('scaleY',0,100)\n          },500)\n        })\n        shape.addAnimation('scaleY',1.5,400)\n      }\n    }\n\n    configureStartGameMessage(){\n      const startGameObject = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height-100*pd,display:false})\n      const text = startGameObject.addShape({kind:'text',text:'Start Game',color:'black',font:'50px Arial Bold'})\n      startGameObject.addShape({kind:'roundedRectangle',w:200,h:100,display:false})\n      let activated = false\n      let resolveFunction = ()=>{}\n      const fadeIn = ()=>{\n          if(!activated){\n              text.opacity = 1;\n          }\n          else text.addAnimation('opacity',1,1000,fadeOut)\n      }\n      const fadeOut = ()=>{\n          if(!activated){\n              text.opacity = 1\n          }\n          else text.addAnimation('opacity',0,1000,fadeIn)\n      }\n\n      startGameObject.pressedEvent(()=>{\n          activated = false\n          startGameObject.display = false\n          resolveFunction()\n      })\n\n      this.initiateStartGameMessage = (func=()=>{})=>{\n          if(!activated){\n              resolveFunction = func\n              activated = true\n              startGameObject.display = true\n              fadeOut()\n          }\n      }\n      this.turnOffStartGameMessage = ()=>{\n          startGameObject.display = false\n      }\n  }\n  kill = ()=>{\n    this.app.kill()\n    this.staticApp.kill()\n    lght.stopAll()\n  }\n}\n\nexport default webView","import lght from './lght/lght'\nconst pd = 2\nconst handHeight = 75*pd\nconst spriteLink = 'https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg'\nconst mobileView = class{\n  constructor(ref,ref2,ref3){\n\n      \n    this.cardSpriteColumn = 14\n    this.cardSpriteRow = 8\n    this.cardSpriteReference = {\n      wild:[0,13],\n      Draw4:[4,13],\n      colorReference:['red','yellow','green','blue'],\n      otherReference:['Skip','Reverse','Draw 2']\n    }\n    this.app = new lght.app(ref)\n    this.app.backgroundColor = 'none'\n    this.staticApp = new lght.app(ref2,{constantRender:false})\n    this.staticApp.backgroundColor='none'\n    this.app.pixelDensity = pd\n    this.cardApp = new lght.app(ref3,{constantRender:true})\n    this.cardApp.pixelDensity = pd\n    this.cardApp.backgroundColor = 'none'\n    var ratio = window.devicePixelRatio || 1;\n      var w = window.screen.width * ratio;\n      var h = window.screen.height * ratio;\n      var clientWidth = function () {  return Math.max(window.innerWidth);};\n    var clientHeight = function () {  return Math.max(window.innerHeight);};\n    this.app.canvas.width = clientWidth()*pd\n    this.app.canvas.height = clientHeight()*pd\n    this.staticApp.pixelDensity = window.devicePixelRatio\n    this.staticApp.canvas.width = clientWidth()*pd\n    this.staticApp.canvas.height = clientHeight()*pd\n    this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:'roundedRectangle',w:this.app.canvas.width,h:this.app.canvas.height,clip:true,clipImageLink:'assets/woodMobile.jpg'})\n    this.staticApp.turnFunctions(this.staticApp)\n    this.positionReference = {\n      leaderBoard:[this.app.canvas.width/2,75],\n      drawDeck:[this.app.canvas.width/2 + 100*pd,this.app.canvas.height/2 - 40*pd],\n      playDeck:[this.app.canvas.width/2 - 100*pd,this.app.canvas.height/2 - 40*pd],\n      playerDeck:[this.app.canvas.width/2,this.app.canvas.height-(handHeight/2)]\n    }\n    let drawable = false\n    let resolveFunction = ()=>{}\n    this.drawDeck = this.createDeck('blue 2',this.app.canvas.width/2 + 100*pd,this.app.canvas.height/2 - 40*pd)\n    this.drawDeck.addShape({kind:'text',text:'Draw Here',color:'black',y:85*pd,font:'35px Futura'})\n    this.drawDeck.flip()\n    this.drawDeck.pressedEvent(()=>{\n      if(!drawable) return\n      drawable = false\n      resolveFunction()\n    })\n    this.awaitDraw = ()=>new Promise(r=>{\n            drawable = true\n            resolveFunction = (r)\n    })\n    this.cancelDraw = ()=>drawable = false\n\n    this.createHand()\n    this.createLeaderboard()\n    this.drawAnnouncement()\n    this.configureStartGameMessage()\n    this.configureUnoMessage()    \n    this.createActionPanel()\n    this.drawColorChoser()\n    this.drawSpecialInfo()\n    this.drawAddBot()\n    this.drawEndGame()\n    this.drawSoundIcon()\n  }\n\n  drawSoundIcon = ()=>{\n    const soundIcon = this.app.addObject({x:50*pd,y:this.app.canvas.height/2 + 80*pd})\n    const soundOn = soundIcon.addShape({kind:'img',drawWidth:70,spriteLink:'./assets/soundon.png',display:true})\n    const soundOff = soundIcon.addShape({kind:'img',drawWidth:70,spriteLink:'./assets/soundoff.png',display:false})\n    let sound = true\n    soundIcon.pressedEvent(()=>{\n      if(sound){\n        lght.muteAll()\n      }\n      else{\n        lght.unmuteAll()\n      }\n      soundOn.display = !soundOn.display\n      soundOff.display = !soundOff.display\n      soundIcon.updateVisual()\n      sound = !sound\n    })\n  }\n\n  drawEndGame(){\n    const endGame = this.app.addObject({display:false,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,zIndex:100000000})\n    endGame.addShape({kind:'roundedRectangle',color:'#ffffed',w:700,h:400,border:true,borderWidth:10,borderColor:'black',borderRadius:20,shadow:{color:'black',offsetX:5,offsetY:-5,blur:10}})\n    const text = endGame.addShape({kind:'text',text:'Someone had won the game!',font:'50px Arial Bold',y:-20})\n    let resolveFunction = ()=>{}\n    const restartText = endGame.addShape({kind:'text',text:'New Game',font:'40px Arial Bold',color:'blue',y:70})\n    restartText.hoverEvent(()=>{\n      restartText.color = 'yellow'\n      endGame.updateVisual()\n    },()=>{\n      restartText.color = 'blue'\n      endGame.updateVisual()\n    })\n    restartText.pressedEvent(()=>resolveFunction())\n    this.activateEndGame = (name,func)=>{\n      text.text = ` ${name} had won the game! `\n      endGame.updateVisual()\n      endGame.display = true\n      resolveFunction = func\n    }\n  }\n\n  drawTutorial(){\n    // const tutorial = this.app.addStorage({display:false,x:this.app.canvas.width/2,y:this.app.canvas.height/2 - 50*pd,zIndex:100000,direction:'column',spacing:5,})\n    // tutorial.addShape({kind:'roundedRectangle',color:'#ffffed',w:this.app.canvas.width,h:750,border:true,borderWidth:10,borderColor:'black',borderRadius:20,shadow:{color:'black',offsetX:5,offsetY:-5,blur:10}})\n    // const x = tutorial.addShape({kind:'img',spriteLink:'assets/crossIcon.png',drawWidth:50,x:320,y:-320})\n    // x.pressedEvent(()=>tutorial.display = false)\n    // tutorial.model = [\n    //   ' Welcome to Uno Online! ',\n    //   'Some quick pointers:',\n    //   ' Use \"Copy Link\" from the left to automatically',\n    //   'get a link you can send to your friends!',\n    //   ' You can start the game when at least 2 players ',\n    //   '(including bots) are present. The panel on the left',\n    //   'show you who is in the game.',\n    //   ' You can use the emote panel below to piss', \n    //   'off your friends when playing.',\n    //   \" And that is it! If you have any feedback\",\n    //   \"please  me at vietlongali@gmail.com\",\n    //   \"Have fun!\",\n    //   \"Love this app? Buy me a beer on \",\n    //   'Venmo @LongTran123'\n    // ]\n    // tutorial.elementFunction = (content)=>{\n    //   const shape = tutorial.addShape({kind:'text',font:'30px Arial Bold',text:content})\n    //   shape.x = -340 + 0.5*shape.width\n    //   return shape\n    // }\n    // tutorial.updateToModel()\n    // this.showTutorial = ()=>tutorial.display = true\n    this.showTutorial = ()=>{}\n  }\n\n  drawAddBot(){\n    const addBot = this.app.addObject({display:false,x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1] + 55*pd})\n    const text = addBot.addShape({kind:'text',font:'35px Arial Bold',text:'Add Bot ',})\n    let resolveFunction = ()=>{}\n    text.hoverEvent(()=>{\n      text.color = 'yellow'\n      addBot.updateVisual()\n    },()=>{\n      text.color = 'black'\n      addBot.updateVisual()\n    })\n    text.pressedEvent(()=>resolveFunction())\n    this.startAddBot = (func)=>{\n      resolveFunction = func\n      addBot.display = true\n    }\n    this.cancelAddBot = ()=>{\n      addBot.display = false\n    }\n  }\n\n  drawEmoteChooser(func){\n    \n  }\n\n  animatePlayerPlay = (content)=>this.animatePlay(content,...this.positionReference.playerDeck)\n  animatePlayerDraw = ()=>this.animateDraw(...this.positionReference.playerDeck)\n  animateLeaderboardDraw = ()=>this.animateDraw(...this.positionReference.leaderBoard)\n  animateLeaderboardPlay = (content)=> this.animatePlay(content,...this.positionReference.leaderBoard)\n\n\n\n  drawSpecialInfo = ()=>{\n    const specialInfo = this.app.addObject({x:this.positionReference.playDeck[0],y:this.positionReference.playDeck[1] + 85*pd})\n    specialInfo.addShape({kind:'roundedRectangle',display:false,w:this.app.canvas.width,h:50*pd})\n    const text = specialInfo.addShape({kind:'text',font:'40px Futura',text:''})\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    this.activateInfo = (color)=>{\n      console.log(color)\n      const tc = textColor[colors.indexOf(color)]\n      text.color = tc\n      text.text = color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')\n      specialInfo.updateVisual()\n    }\n    this.cancelInfo = ()=>{\n      text.text = ''\n      specialInfo.updateVisual()\n    }\n  }\n\n  animateDraw = (endX,endY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(null,true)\n    card.x = this.positionReference.drawDeck[0]\n    card.y = this.positionReference.drawDeck[1]\n    card.zIndex = -1\n    card.display = true\n    lght.playSound('./assets/draw.mp3')\n    card.addAnimation('x',endX,animationTime)\n    card.addAnimation('y',endY,animationTime)\n    card.shapes[0].addAnimation('scaleX',0.2,animationTime,r)\n    card.shapes[0].addAnimation('scaleY',0.2,animationTime,()=>card.kill())\n  })\n\n  animatePlay = (content,startX,startY)=>new Promise(r=>{\n    const animationTime = 500\n    const card = this.createCard(content)\n    card.shapes[0].scaleX = 0.2\n    card.shapes[0].scaleY = 0.2\n    card.x = startX\n    card.y = startY\n    card.display = true\n    lght.playSound('./assets/deal.mp3')\n    card.addAnimation('x',this.playDeck.x,animationTime,()=>{\n      this.playDeck.kill()\n      this.playDeck=card\n    })\n    card.addAnimation('y',this.playDeck.y,animationTime,r)\n    card.shapes[0].addAnimation('scaleX',1,animationTime)\n    card.shapes[0].addAnimation('scaleY',1,animationTime)\n    if(content.match(/Draw 4/) || content.match(/Wild/)) this.activateInfo(content.split(' ')[0])\n    else this.cancelInfo()\n  })\n\n  createActionPanel(actionFunction){\n    const actionalPanel = this.app.addStorage({x:this.app.canvas.width / 2,y:this.app.canvas.height/2 + 120*pd,spacing:50*pd})\n    actionalPanel.addShape({kind:'roundedRectangle',display:false,w:this.app.canvas.width,h:150*pd,borderRadius:10*pd,color:'#ffffed',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    actionalPanel.addShape({kind:'text',font:'40px Futura',text:\"Actions:\",y:-40*pd})\n    actionalPanel.model = ['Copy Link','Leave Game','Restart Game']\n    actionalPanel.elementFunction = (link)=>{\n      const shape = actionalPanel.addShape({kind:'text',font:'35px Futura',text:link})\n      shape.hoverEvent(()=>{\n        shape.color = 'yellow'\n        actionalPanel.updateVisual()\n      },()=>{\n        shape.color = 'black'\n        actionalPanel.updateVisual()\n      })\n      shape.pressedEvent(()=>actionFunction[link.split(' ').join('')]())\n      return shape\n    }\n    actionalPanel.updateToModel()\n  }\n\n  createLeaderboard(){\n    const leaderBoard = this.app.addStorage({x:this.app.canvas.width/2,y:75,spacing:0})\n    const turnIndicator = this.app.addObject({display:false})\n    turnIndicator.addShape({y:55*pd,kind:'poly',specialPolygon:true,numberOfSide:3,color:'yellow',radius:7*pd,rotation:90,border:true,borderColor:'black',borderWidth:7})\n    let colors = ['#90ee90','#ee2400','#D3D3D3','#00FFFF']\n    leaderBoard.elementFunction = (content,i)=>{\n          return leaderBoard.addShape({kind:'rect',color:colors[i],w:this.app.canvas.width/4,h:150,border:true,borderColor:'black',borderWidth:5,shadow:{blur:7,color:'black',offsetY:5}})\n      }\n      leaderBoard.model = ['text1','test2','txt2','t34']\n      leaderBoard.updateToModel()\n      let textShapes = []\n      this.updateLeaderboard = (players)=>{\n            leaderBoard.model = players\n            leaderBoard.updateToModel()\n            textShapes.forEach(e=>e.kill())\n            textShapes = []\n            players.forEach((name,i)=>{\n                  const {x,y} = leaderBoard.storageShapes[i]\n                  const text = leaderBoard.addShape({kind:'text',text:name,x,y:y-20,font:'30px Arial Bold',color:'black'})\n                  textShapes.push(text)\n            })\n            this.staticApp.turnFunctions(this.staticApp)\n      }\n      let timeOut = null\n      this.emote = (name,color,emoji)=>{\n        clearTimeout(timeOut)\n        const shape = textShapes.find(e=>e.text===name)\n\n        shape.addAnimation('opacity',0,100,()=>{\n          shape.text = emoji\n          shape.font = '40px Arial Bold'\n          leaderBoard.updateVisual()\n          shape.addAnimation('opacity',1,100,()=>{\n            timeOut = setTimeout(()=>{\n              shape.addAnimation('opacity',0,100,()=>{\n                shape.text = name\n                shape.font = '30px Arial Bold'\n                leaderBoard.updateVisual()\n                shape.addAnimation('opacity',1,100)\n              })\n            },1500)\n          })\n        })\n\n        \n      }\n    \n    this.updateTurnIndicator = (turn)=>{\n      const {absoluteY,absoluteX} = leaderBoard.shapes[turn]\n      turnIndicator.addAnimation('x',absoluteX,200,()=>{\n        turnIndicator.display = true\n        let numberOfLoops = 5\n        const fadeOut = ()=>{\n          numberOfLoops--\n          if(numberOfLoops<0) return\n          turnIndicator.addAnimation('opacity',0,500,fadeIn)\n        }\n        const fadeIn = ()=>turnIndicator.addAnimation('opacity',1,500,fadeOut)\n        fadeOut()\n      })\n    }\n  }\n\n  createHand(){\n    let cards = []\n    let resolveFunction = ()=>{}\n    let verifyFunction = ()=>{}\n    let onSelect = false\n    const playerHand = this.cardApp.addStorage({spacing:-70*pd,y:0})\n    playerHand.elementFunction = (content)=>{\n      let position = []\n      if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n      else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n      else{\n        const color = content.split(' ')[0]\n        const action = content.split(' ').slice(1).join(' ')\n        position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n        if(parseInt(action)) position[1] = parseInt(action)\n        else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n      }\n      const shape = playerHand.addShape({y:-37*pd,borderOnly:true,clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*1.2 *pd,h:145.5*1.2*pd,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black'})\n      shape.pressedEvent((x,y)=>{\n            if(!verifyFunction(content) || !onSelect) return\n            if(y<100) return\n            onSelect = false\n            shape.kill()\n            resolveFunction(content)\n      })\n      return shape\n    }\n    this.updateCards = (card)=>{\n      playerHand.model = card\n      this.cardApp.canvas.width = (playerHand.totalLength+300)\n      this.cardApp.canvas.style.width = `${(playerHand.totalLength+300)/pd}px`\n      playerHand.x = this.cardApp.canvas.width/2\n      const height = 0.5*145.5*1.2*pd + 40*pd\n      this.cardApp.canvas.height = height\n      playerHand.y = height\n      const clientWidth = 0.5*(window.innerWidth)\n      const handWidth = 0.5*((playerHand.totalLength+300)/pd)\n      if(handWidth<clientWidth) this.cardApp.canvas.style.left = `${clientWidth - handWidth}px`\n      if(handWidth > clientWidth){\n            this.cardApp.canvas.style.left = `0px`\n            document.getElementById('scrollable').scrollLeft = handWidth-clientWidth\n      }\n      playerHand.updateToModel()\n    }\n    this.awaitSelection = (vf)=>new Promise(r=>{\n      verifyFunction = vf\n      resolveFunction = r\n      onSelect = true\n    })\n    this.cancelSelection = ()=>onSelect = false\n  }\n\n  createDeck(content,x,y){\n    const deckCardOption = {kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black'}\n    const deck = this.staticApp.addObject({x,y})\n    deck.addShape({x:6*pd,y:-5*pd,...deckCardOption})\n    deck.addShape({x:4*pd,y:-3.75*pd,...deckCardOption})\n    deck.addShape({x:3*pd,y:-2.5*pd,...deckCardOption})\n    deck.addShape({x:1.5*pd,y:-1.25*pd,...deckCardOption})\n    const card = this.createCard(content)\n    card.x = x; card.y = y\n    card.shapes[0].shadow = null\n    card.shapes[0].border = false\n    card.display = true\n    card.updateVisual()\n    this.staticApp.turnFunctions(this.staticApp)\n    return card\n  }\n\n  createCard(content,back = false){\n    const card = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:false})\n    if(back){\n      card.addShape({kind:'roundedRectangle',borderOnly:true,color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:'assets/back.svg',borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n    }\n    else{let flipped = false\n    let position = []\n    if(content.match(/Wild/)) position = this.cardSpriteReference.wild\n    else if(content.match(/Draw 4/)) position = this.cardSpriteReference.Draw4\n    else{\n      const color = content.split(' ')[0]\n      const action = content.split(' ').slice(1).join(' ')\n      position[0] = this.cardSpriteReference.colorReference.indexOf(color)\n      if(parseInt(action)) position[1] = parseInt(action)\n      else position[1] = this.cardSpriteReference.otherReference.indexOf(action) + 10\n    }\n    const shape = card.addShape({clipSpriteSheetX:position[1],clipSpriteSheetY:position[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:'roundedRectangle',color:'white',w:102.5*pd,h:145.5*pd,clip:true,clipImageLink:spriteLink,borderRadius:20*pd,border:true,borderWidth:1.25*pd,borderColor:'black',shadow:{color:'black',blur:1.25*pd,offsetX:1.75*pd,offSetY:1.75*pd}})\n  \n    const changeToBack =()=>{\n      shape.clipSpriteSheetX = null\n      shape.changeClipImage('assets/back.svg')\n    }\n\n    const changeToFront = ()=>{\n      shape.clipSpriteSheetX = position[1]\n      shape.changeClipImage(spriteLink)\n    }\n\n    const flipAnimation = (back=true)=>new Promise(r=>{\n      shape.addAnimation('scaleX',0,100,()=>{\n        if(back) changeToBack()\n        else changeToFront()\n        shape.addAnimation('scaleX',1,100,r)\n      })\n    })\n    card.flip = ()=>{\n      flipped = !flipped\n      return flipAnimation(flipped)\n    }}\n    return card\n  }\n\n  drawColorChoser = ()=>{\n    const colors = ['red','blue','yellow','green']\n    const textColor = ['red','blue','#9b870c','green']\n    let choosingColor = false\n    let resolveFunction = ()=>{}\n    const colorChooser = this.app.addStorage({display:false,zIndex:1000,x:this.app.canvas.width/2,y:this.app.canvas.height/2,model:colors,spacing:25,direction:'column'})\n    colorChooser.addShape({kind:'roundedRectangle',w:300*pd,h:300*pd,borderRadius:10*pd,color:'white',shadow:{color:'black',offsetX:5,offsetY:-5,blur:10},border:true,borderWidth:5,borderColor:'black'})\n    colorChooser.addShape({kind:'text',font:'35px Futura',text:'Choose a color:',y:-105*pd})\n    colorChooser.elementFunction = (color,i)=>{\n      const shape = colorChooser.addShape({kind:'roundedRectangle',w:250,h:50,color:'white'})\n      shape.pressedEvent(()=>{if(choosingColor){resolveFunction(color);colorChooser.display = false}})\n      return shape\n    }\n    colorChooser.updateToModel()\n    colorChooser.storageShapes.forEach((e,i)=>{\n      const {x,y} = e\n      const color = colors[i]\n      const shape = colorChooser.addShape({x,y,kind:'text',color:textColor[i],font:'45px Futura',text:color.split('').map((e,i)=>(i===0)?e.toUpperCase():e).join('')})\n    })\n    this.chooseColor = ()=>new Promise(r=>{\n      colorChooser.display = true\n      choosingColor = true\n      resolveFunction = r\n    })\n  }\n\n  drawAnnouncement(){\n      let animationDuration = 100\n\n      this.announcementQueue = []\n      this.announcmentPerpetual = []\n      this.onAnnouncementPerpetual = false\n      this.onAnnoucementChanged = false\n      \n      //Format: [text,color,time/perpetual,started]\n      this.announcement = this.app.addObject({x:this.app.canvas.width/2,y:110*pd,positionIndicator:false})\n      this.annoucementText = this.announcement.addShape({kind:'text',font:'70px Futura',color:'orange',text:'',display:false})\n      this.announcement.addShape({kind:'roundedRectangle',w:this.app.canvas.width/2,h:100*pd,display:false})\n      const fadeOut = (func)=>this.annoucementText.addAnimation('opacity',0,animationDuration,()=>{this.annoucementText.display=false;if(func) func()})\n      const fadeIn = (funcDone)=>this.annoucementText.addAnimation('opacity',1,animationDuration,funcDone)\n      const fadeOutThenFadeIn = (func,funcDone)=> fadeOut(()=>{func();this.annoucementText.display = true; fadeIn(funcDone)})\n\n      this.updateAnnouncement = ()=>{\n          if(this.announcementQueue.length > 0 && !this.announcementQueue[0][3]){\n              let [text,color,time] = this.announcementQueue[0]\n              fadeOutThenFadeIn(()=>{\n                  this.annoucementText.text = text\n                  this.annoucementText.color = color\n                  setTimeout(()=>{this.announcementQueue.splice(0,1);this.updateAnnouncement();},time+animationDuration)\n              })\n              this.announcementQueue[0][3] = true\n          }\n          else if(this.announcementQueue.length >0) return\n          else if(!this.onAnnouncementPerpetual && this.annoucementText.display) return fadeOut()\n          else if(this.onAnnouncementPerpetual && ((!this.annoucementText.display) || this.onAnnoucementChanged)) return fadeOutThenFadeIn(()=>{\n              let [text,color] = this.announcmentPerpetual\n              this.annoucementText.text = text\n              this.annoucementText.color = color\n          })\n      }\n    }\n\n    changeAnnoucementPerpetual(text,color){\n      this.announcmentPerpetual = [text,color]\n      this.onAnnoucementChanged = true\n      this.updateAnnouncement()\n    }\n\n    addToAnnoucementQueue(text,color,time){\n      this.announcementQueue.push([text,color,time,false])\n      this.updateAnnouncement()\n    }\n\n    configureUnoMessage(){\n      const uno = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1000})\n      const shape = uno.addShape({kind:'img',spriteLink:'./assets/polygon.svg',scaleX:0,scaleY:0})\n      uno.display = false\n      this.UNO = ()=>{\n        uno.display = true\n        shape.addAnimation('scaleX',1.5,400,()=>{\n          setTimeout(()=>{\n            shape.addAnimation('scaleX',0,100,()=>uno.display = false)\n            shape.addAnimation('scaleY',0,100)\n          },500)\n        })\n        shape.addAnimation('scaleY',1.5,400)\n      }\n    }\n\n    configureStartGameMessage(){\n      const startGameObject = this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2+50*pd,display:false})\n      const text = startGameObject.addShape({kind:'text',text:'Start Game',color:'black',font:'50px Futura'})\n      startGameObject.addShape({kind:'roundedRectangle',w:200,h:100,display:false})\n      let activated = false\n      let resolveFunction = ()=>{}\n      const fadeIn = ()=>{\n          if(!activated){\n              text.opacity = 1;\n          }\n          else text.addAnimation('opacity',1,1000,fadeOut)\n      }\n      const fadeOut = ()=>{\n          if(!activated){\n              text.opacity = 1\n          }\n          else text.addAnimation('opacity',0,1000,fadeIn)\n      }\n\n      startGameObject.pressedEvent(()=>{\n          activated = false\n          startGameObject.display = false\n          resolveFunction()\n      })\n\n      this.initiateStartGameMessage = (func=()=>{})=>{\n          if(!activated){\n              resolveFunction = func\n              activated = true\n              startGameObject.display = true\n              fadeOut()\n          }\n      }\n      this.turnOffStartGameMessage = ()=>{\n          startGameObject.display = false\n      }\n  }\n  kill = ()=>{\n    this.app.kill()\n    this.staticApp.kill()\n    lght.stopAll()\n  }\n}\n\nexport default mobileView","import webView from './webView'\nimport mobileView from './mobileView'\nwindow.mobileCheck = function() {\nlet check = false;\n(function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\nreturn check;\n};\nlet View \nif(window.mobileCheck()) View = mobileView\nelse View = webView\nexport default View","import View from './view'\nconst io = require('socket.io-client')\nconst axios = require('axios')\nconst _ = require('lodash')\n\nconst Controller = async (canvasref,canvasstatic,token,userid,CopyLink,LeaveGame,canvasSpecial)=>{\n      let view = new View(canvasref,canvasstatic,canvasSpecial)\n      view.drawTutorial()\n      let model = null\n      const url = (process.env.NODE_ENV==='production')?'/':'http://localhost:4000'\n      const socket = io.connect(url,{query:{token}})\n      view.showTutorial()\n      const play = (card)=>{\n            socket.emit('Play Card',card)\n      }\n\n      const draw = ()=>{\n            socket.emit('Draw Card')\n      }\n\n      const emote = (emoji)=>{\n            socket.emit('Emote',emoji)\n      }\n\n      const sortHand = (hand)=>{\n            if(!hand.length) return []\n            const newhand = [...hand].map(e=>e.split(' ').slice(1).join(' '))\n            const color = hand[0].split(' ')[0]\n            const countable = newhand.filter(e=>parseInt(e)).map(e=>parseInt(e))\n            const notCountable = newhand.filter(e=>!parseInt(e))\n            const sorted = countable.sort((a,b)=>parseInt(a)-parseInt(b))\n            return [...sorted,...notCountable].map(e=>`${color} ${e}`)\n      }\n\n      const sortDeck = (deck,currentTopCard)=>{\n            const wild = deck.filter(e=>e.match(/Wild/) || e.match(/Draw 4/))\n            const red = sortHand(deck.filter(e=>e.match(/red/)))\n            const blue = sortHand(deck.filter(e=>e.match(/blue/)))\n            const green = sortHand(deck.filter(e=>e.match(/green/)))\n            const yellow = sortHand(deck.filter(e=>e.match(/yellow/)))\n            const obj ={red,blue,green,yellow}\n            let final = [...wild]\n            for(let color in obj){\n                  final = [...final,...obj[color]]\n            }\n            return final\n      }\n      \n      const addBot = ()=>socket.emit('Add Bot')\n\n      const verify = card=>{\n            if(card === 'Wild' || card==='Draw 4' || model.currentTopCard === 'Wild' || model.currentTopCard === 'Draw 4') return true\n            const color = model.currentTopCard.split(' ')[0]\n            const action = model.currentTopCard.split(' ').slice(1).join(' ')\n            const color2 = card.split(' ')[0]\n            const action2 = card.split(' ').slice(1).join(' ')\n            return ((color===color2) || (action===action2))\n      }\n\n      const update = async (m)=>{\n            let oldModel = (model)?_.cloneDeep(model):null\n            model = m\n            if(!model.inGame && model.players.length > 1 && !model.endGame) view.initiateStartGameMessage(()=>socket.emit('Start Game'))\n            else view.turnOffStartGameMessage()\n            if(!model.inGame && model.players.length < 4 && !model.endGame) view.startAddBot(addBot)\n            else view.cancelAddBot()\n            if(parseInt(model.onTurn) == userid){\n                  view.awaitSelection(verify).then((content)=>{view.cancelDraw();view.cancelSelection();play(content)})\n                  view.awaitDraw().then(()=>{view.cancelSelection();view.cancelDraw();draw()})\n            }\n            else{\n                  view.cancelDraw()\n                  view.cancelSelection()\n            }\n            //check with old model\n            if(oldModel){\n                  let newAnnoucements = model.feed.slice(oldModel.feed.length)\n                  let newDirectives = model.directives.slice(oldModel.directives.length)\n                  const players = model.players.map(e=>e.username)\n                  view.updateLeaderboard(players,model.players.map(e=>e.cards.length))\n                  if(newAnnoucements.length) newAnnoucements.forEach(message=>view.addToAnnoucementQueue(message,'black',500))\n                  if(newDirectives.length){\n                        for(let [code,user,otherinfo] of newDirectives){\n                              switch(code){\n                                    case 1:\n                                          if(user === userid){\n                                                await view.animatePlayerDraw()\n                                                const latestDraw = model.players[userid].cards.slice(oldModel.players[userid].cards.length)[0]\n                                                if(verify(latestDraw)) play(latestDraw)\n                                                else socket.emit('Pass Turn')  \n                                          }\n                                          else await view.animateLeaderboardDraw()\n                                          break;\n                                    case 2:\n                                          if(user === userid) for(let i = 0;i<4;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 3:\n                                          if(user === userid) for(let i = 0;i<2;i++)(await view.animatePlayerDraw())\n                                          else for(let i = 0;i<2;i++)(await view.animateLeaderboardDraw())\n                                          break;\n                                    case 4:\n                                          if(user===userid) await view.animatePlayerPlay(model.currentTopCard)\n                                          else await view.animateLeaderboardPlay(model.currentTopCard)\n                                          break;      \n                                    case 5:\n                                          await view.UNO()\n                                          break;\n                                    case 7:\n                                          const animateToPlayer = async ()=>{for(let i = 0;i<4;i++)(await view.animatePlayerDraw())}\n                                          const animateToLeaderBoard = async ()=>{for(let i = 0;i<4;i++)(await view.animateLeaderboardDraw())}\n                                          await animateToPlayer()\n                                          await animateToLeaderBoard()\n                                          break;\n                                    case 8:\n                                          for(let i = 0;i<otherinfo;i++){\n                                                if(user===userid) await view.animatePlayerPlay(model.currentTopCard)\n                                                else await view.animateLeaderboardPlay(model.currentTopCard)\n                                          }\n                                          break;\n                                    default:break;\n                              }\n                        }\n                  }\n                  if(parseInt(oldModel.onTurn) != parseInt(model.onTurn) && model.onTurn >= 0) view.updateTurnIndicator(parseInt(model.onTurn))\n                  const oldCard = oldModel.players[userid].cards\n                  const newCard = model.players[userid].cards\n                  if(JSON.stringify(oldCard) !== JSON.stringify(newCard))view.updateCards(sortDeck(model.players[userid].cards,model.currentTopCard))\n            }\n            else{\n                  const players = model.players.map(e=>e.username)\n                  view.updateLeaderboard(players,model.players.map(e=>e.cards.length))\n                  view.updateCards(sortDeck(model.players[userid].cards,model.currentTopCard))\n                  if(model.onTurn>=0)view.updateTurnIndicator(model.onTurn)\n                  view.playDeck = view.createDeck(model.currentTopCard,...view.positionReference.playDeck)\n            }\n      }\n\n      socket.on('Update',update)\n      socket.on('New Game',(m)=>{\n            view.kill()\n            view = new View(canvasref,canvasstatic,canvasSpecial)\n            view.createActionPanel({\n                  CopyLink,\n                  LeaveGame,\n                  RestartGame:()=>socket.emit('Restart Game')\n            })\n            view.drawEmoteChooser(emote)\n            model = null\n            update(m)\n      })\n\n      socket.on('End Game',(winner)=>{\n            view.activateEndGame(model.players[winner].username,()=>socket.emit('Restart Game'))\n      })\n\n      socket.on('Choose Color',async ()=>{\n            const color = await view.chooseColor()\n            socket.emit('Choose Color',color)\n      })\n\n      socket.on('Error',(error)=>console.log(error))\n      socket.on('Emote',({emoji,userid})=>{\n            const colorCode = ['green','red','black','blue']\n            view.emote(model.players[userid].username,colorCode[userid],emoji)\n      })\n      socket.on('Delete Inactive',()=>view.changeAnnoucementPerpetual('This game was delete due to inactivity'))\n      socket.on('Critical Error',LeaveGame)\n      view.createActionPanel({\n            CopyLink,\n            LeaveGame,\n            RestartGame:()=>socket.emit('Restart Game')\n      })\n      view.drawEmoteChooser(emote)\n      console.log = ()=>{}\n}\n\nexport default Controller","import React, { useEffect, useState, useRef } from 'react'\nimport {connect} from 'react-redux'\nimport Controller from '../controller'\nimport cogoToast from 'cogo-toast'\nimport mobileView from '../mobileView'\nimport testView from '../testView'\n\nconst Game = connect(({token,playerid,id})=>({token,playerid,id}),dispatch=>({dispatch}))(({token,playerid,id,dispatch})=>{\n    const ref = useRef()\n    const ref2 = useRef()\n    const ref3 = useRef()\n    \n    const copyToClipboard = str => {\n        const el = document.createElement('textarea');\n        el.value = str;\n        document.body.appendChild(el);\n        el.select();\n        document.execCommand('copy');\n        document.body.removeChild(el);\n        cogoToast.success('Copied!')\n    };\n    const url = `http://onegame.us/join/${id}`\n\n    useEffect(()=>{\n      Controller(ref.current,ref2.current,token,playerid,()=>copyToClipboard(url),()=>dispatch({type:'LOG_OUT'}),ref3.current)\n      // testView(ref.current)\n    },[])\n    return (\n      <div className=\"App\">\n        {!window.mobileCheck()&&\n          <>\n          <div className='d-flex game' style={{alignItems:'center',height:'100%',width:'100%',position:'absolute'}}>\n            <canvas ref={ref}  style={{width:850,height:650,margin:'auto',backgroundColor:'transparent'}}></canvas>      \n          </div>\n          <div className='d-flex game2' style={{alignItems:'center',height:'100%',width:'100%',position:'absolute'}}>\n            <canvas ref={ref2} style={{width:850,height:650,margin:'auto',backgroundColor:'transparent'}}></canvas>      \n          </div>\n          </>\n        }\n        {window.mobileCheck()&&\n          <div className='position-absolute' id='scrollable' style={{overflowX:'auto',overflowY:'visible',position:'absolute',top:'0px',left:'0px',width:'100%',height:'100%'}}>\n            <canvas ref={ref}  style={{zIndex:'100',position:'fixed',left:0,top:0,width:'100%',height:'100%',margin:'auto',backgroundColor:'transparent'}}></canvas>      \n            <canvas ref={ref2} style={{zIndex:'0',position:'fixed',left:0,top:0,width:'100%',height:'100%',margin:'auto'}}></canvas>      \n            <canvas ref={ref3} style={{zIndex:'1000',margin:'auto',position:'absolute',bottom:0,left:0}}></canvas>      \n          </div>\n        }\n      </div>\n    );\n})\nexport default Game","import React, { useState, useEffect } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form} from 'formik'\nimport Logo from '../9.svg'\nimport Polygon from '../polygon.svg'\nconst {join} = require('../api')\n\nconst Join = (connect(({tempJoinId})=>({tempJoinId}),dispatch=>({dispatch}))(({dispatch,changeHistory,tempJoinId})=>{\n    const [loading,setLoading] = useState(false)\n\n\n    useEffect(()=>{\n        console.log(tempJoinId)\n        if(!tempJoinId){\n            dispatch({type:'JOINED'})\n        }\n    },[])\n\n    const joinGame = async ({username})=>{\n        setLoading(true)\n        console.log(tempJoinId)\n        const {data} = await join(tempJoinId,username)\n        const {token,id,playerid} = data\n        console.log(data)\n        dispatch({type:'JOIN_LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container'>\n            <div className={`row ${(window.mobileCheck())?'':'w-75'} mx-auto`} style={{maxWidth:(window.mobileCheck())?100000:400}}>\n            {!loading &&\n                <div className='text-center w-100 mx-auto' style={{fontFamily:'Arial Bold'}}>\n                    <div className='mt-5 mb-5 floating'>\n                      <img src={Polygon} style={{width:300,margin:'auto',width:'200px'}} className=''/>\n                    </div>\n                    <div><i>One</i> is an UNO-like card game that is completely playable online.</div>\n                    <div className='text-secondary'>Made by Long Tran</div>\n                    <div className='pt-5 pb-5 mt-3' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)',border:'1px solid black',borderRadius:'15px',backgroundColor:'white'}}>\n                        <Formik initialValues={{username:''}} onSubmit={joinGame}>\n                            {({handleSubmit,handleChange,handleBlur})=>(\n                                <Form>\n                                    <div className = 'container w-50'>\n                                        <label className='font-weight-bold'>Nickname</label>\n                                        <input type='text' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Join game!</button>\n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                </div>\n            }\n            </div>\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Join","import React, { useState } from 'react'\nimport BarLoader from 'react-spinners/BarLoader'\nimport {withRouter} from 'react-router-dom'\nimport {connect} from 'react-redux'\nimport {Formik,Form, Field} from 'formik'\nimport Polygon from '../polygon.svg'\nimport Title from '../title.svg'\nimport Logo from '../9.svg'\nconst {create} = require('../api')\n\nfunction Checkbox(props) {\n    return (\n      <Field name={props.name}>\n        {({ field, form }) => (\n        <div className='ml-n3'> \n          <input \n          className='custom-control-input'\n          type=\"checkbox\"\n          {...props}\n          checked={field.value.includes(props.value)}\n          onChange={() => {\n            if (field.value.includes(props.value)) {\n              const nextValue = field.value.filter(\n                value => value !== props.value\n              );\n              form.setFieldValue(props.name, nextValue);\n            } else {\n              const nextValue = field.value.concat(props.value);\n              form.setFieldValue(props.name, nextValue);\n            }\n          }}\n        />\n        <label className='ml-3'>\n            {props.displayname}\n          </label>\n        </div>\n        )}\n      </Field>\n    );\n  }\n\nconst Landing = withRouter(connect(null,dispatch=>({dispatch}))(({dispatch,history})=>{\n    const [loading,setLoading] = useState(false)\n\n    const createGame = async ({username,houseRule})=>{\n        setLoading(true)\n        const {data} = await create(username,houseRule)\n        const {token,id,playerid} = data\n        dispatch({type:'LOG_IN',token,id,playerid})\n        setLoading(false)\n    }\n\n    return (\n        <div className='container background'>\n            <div className={`row ${(window.mobileCheck())?\"\":'w-75'} mx-auto`} style={{maxWidth:(window.mobileCheck())?100000:400,fontFamily:'Arial Bold'}}>\n            {!loading &&\n                <div className='text-center mx-auto w-100 position-relative'>\n                    <div className='mt-5 mb-5 floating'>\n                      <img src={Polygon} style={{width:300,margin:'auto',width:'200px'}} className=''/>\n                    </div>\n                    <div><i>One</i> is an UNO-like card game that is completely playable online.</div>\n                    <div className='text-secondary'>Made by Long Tran</div>\n                    <div className='pt-4 pb-4 mt-3' style={{boxShadow:'0px 4px 16px rgba(31, 31, 31, 0.16)',border:'1px solid black',backgroundColor:'white',borderRadius:'15px'}}>\n                        <Formik initialValues={{username:'',houseRule:[]}} onSubmit={createGame}>\n                            {({handleSubmit,handleChange,handleBlur,values})=>(\n                                <Form>\n                                    <div className = 'container form-group'>\n                                        <div className='w-50 mx-auto'>\n                                            <label className='font-weight-bold '>Nickname:</label>\n                                            <input type='username' name='username' className='form-control' onChange={handleChange} onBlur={handleBlur}/>\n                                        </div>\n                                        <label className='font-weight-bold mt-3'>House Rules:</label>\n                                        <div className=' custom-control custom-checkbox mt-n1'>\n                                            <Checkbox value='tripledouble' name='houseRule' displayname='Allow triple/double' className=''/>\n                                        </div>\n                                        <button className='btn btn-success mt-4' onSubmit={handleSubmit}>Create game!</button>\n                                        \n                                    </div>\n                                </Form>\n                            )}                            \n                        </Formik>\n                    </div>\n                    <p className='text-secondary mt-2'>Joining a friend's game? Ask them for a personal link!</p>\n                </div>\n            }\n            \n            </div>\n            <div style={{position:'absolute',top:'50%',width:'100%'}}>\n                <BarLoader color='blue' loading={loading} width='200px' css={{margin:'auto'}}/>\n            </div>\n        </div>\n    )\n}))\nexport default Landing","import React,{useEffect} from 'react';\nimport './App.css';\nimport {Provider,connect} from 'react-redux'\nimport {BrowserRouter as Router,Switch,Link,Route,useLocation,withRouter} from 'react-router-dom'\nimport Store from './redux'\nimport Game from './Page/Game';\nimport Join from './Page/Join';\nimport Landing from './Page/Landing';\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport lght from './lght/lght'\n\nwindow.mobileCheck = function() {\n  let check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4))) check = true;})(navigator.userAgent||navigator.vendor||window.opera);\n  return check;\n};\n\nconst Content = withRouter(connect(({loggedIn,joined})=>({loggedIn,joined}),(dispatch)=>({dispatch}))(({loggedIn,dispatch,history,joined})=>{\n    const {pathname} = window.location\n    useEffect(()=>{\n      lght.stopAll()\n      if(pathname.match(/join/) && !joined){\n        const tempJoinId = pathname.split('/')[2]\n        console.log(tempJoinId)\n        dispatch({type:'LOG_OUT_WITH_TEMP_JOIN',tempJoinId})\n        history.push('/join')\n      }\n      else if(loggedIn){\n        console.log('hello')\n        if(!pathname.match(/game/)) history.push('/game')\n      }\n      else history.push('/')\n    },[loggedIn,joined])\n\n    return(\n      <>\n      <Switch>\n        <Route path='/game' exact component={Game}/>\n        <Route path='/join' exact>\n          <Join changeHistory={history}/>\n        </Route>\n        <Route path='/'exact component={Landing}/>\n      </Switch>\n      <div className='backgrounddiv'></div>\n      </>\n    )\n}))\n\nfunction App() {\n  return (\n    <Provider store={Store}>\n      <Router>\n        <Content/>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/polygon.8ae264e2.svg\";","module.exports = __webpack_public_path__ + \"static/media/9.f703b21f.svg\";","const axios = require('axios')\nlet url = (process.env.NODE_ENV === 'production')?'/':'http://localhost:4000'\nconst baseAPI = axios.create({baseURL:url})\nconst join = (id,username)=>baseAPI.post('join',{id,username})\nconst create = (username,houseRule)=>baseAPI.post('create',{username,houseRule})\n\nmodule.exports = {join,create}"],"sourceRoot":""}